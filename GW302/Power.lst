   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 0
  11              		.eabi_attribute 18, 4
  12              		.code	16
  13              		.file	"Power.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.SPI1Setup,"ax",%progbits
  18              		.align	2
  19              		.global	SPI1Setup
  20              		.code	16
  21              		.thumb_func
  23              	SPI1Setup:
  24              	.LFB376:
  25              		.file 1 "Power.c"
   1:Power.c       **** // -----------------------------------------------------------
   2:Power.c       **** // Software:         GW302 - McHale V6 Fixed Chamber Round Baler
   3:Power.c       **** // C Source File:    Power.c
   4:Power.c       **** // Description:      Graphic Wizard Power Task File
   5:Power.c       **** // -----------------------------------------------------------
   6:Power.c       ****  
   7:Power.c       **** 
   8:Power.c       **** // Include Standard files
   9:Power.c       **** #include "Board.h"
  10:Power.c       **** 
  11:Power.c       **** #include "string.h"
  12:Power.c       **** 
  13:Power.c       **** 
  14:Power.c       **** // functions
  15:Power.c       **** /*-----------------------------------------------------------*/
  16:Power.c       **** void SPI1Setup( void )
  17:Power.c       **** {
  26              		.loc 1 17 0
  27              		.cfi_startproc
  28              	.LVL0:
  29              	.LBB32:
  30              	.LBB33:
  31              	.LBB34:
  32              		.file 2 "./include/lib_AT91SAM7A3.h"
   1:./include/lib_AT91SAM7A3.h **** //* ----------------------------------------------------------------------------
   2:./include/lib_AT91SAM7A3.h **** //*         ATMEL Microcontroller Software Support  -  ROUSSET  -
   3:./include/lib_AT91SAM7A3.h **** //* ----------------------------------------------------------------------------
   4:./include/lib_AT91SAM7A3.h **** //* DISCLAIMER:  THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR
   5:./include/lib_AT91SAM7A3.h **** //* IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
   6:./include/lib_AT91SAM7A3.h **** //* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
   7:./include/lib_AT91SAM7A3.h **** //* DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR ANY DIRECT, INDIRECT,
   8:./include/lib_AT91SAM7A3.h **** //* INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
   9:./include/lib_AT91SAM7A3.h **** //* LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
  10:./include/lib_AT91SAM7A3.h **** //* OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  11:./include/lib_AT91SAM7A3.h **** //* LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  12:./include/lib_AT91SAM7A3.h **** //* NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  13:./include/lib_AT91SAM7A3.h **** //* EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  14:./include/lib_AT91SAM7A3.h **** //* ----------------------------------------------------------------------------
  15:./include/lib_AT91SAM7A3.h **** //* File Name           : lib_AT91SAM7A3.h
  16:./include/lib_AT91SAM7A3.h **** //* Object              : AT91SAM7A3 inlined functions
  17:./include/lib_AT91SAM7A3.h **** //* Generated           : AT91 SW Application Group  01/16/2006 (16:35:45)
  18:./include/lib_AT91SAM7A3.h **** //*
  19:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_MC_SAM.h/1.3/Thu Mar 25 15:19:14 2004//
  20:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_pdc.h/1.2/Tue Jul  2 13:29:40 2002//
  21:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_dbgu.h/1.1/Thu Aug 25 12:56:22 2005//
  22:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_shdwc_6122A.h/1.1/Wed Oct  6 14:06:00 2004//
  23:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_spi2.h/1.2/Tue Aug 23 15:37:28 2005//
  24:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_ssc.h/1.4/Fri Jan 31 12:19:20 2003//
  25:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_PWM_SAM.h/1.3/Thu Jan 22 10:10:50 2004//
  26:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_tc_1753b.h/1.1/Fri Jan 31 12:20:02 2003//
  27:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_pitc_6079A.h/1.2/Tue Nov  9 14:43:56 2004//
  28:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_adc.h/1.6/Fri Oct 17 09:12:38 2003//
  29:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_pmc_SAM.h/1.10/Fri Nov  4 09:39:44 2005//
  30:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_rstc_6098A.h/1.1/Wed Oct  6 10:39:20 2004//
  31:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_pio.h/1.3/Fri Jan 31 12:18:56 2003//
  32:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_rttc_6081A.h/1.1/Wed Oct  6 10:39:38 2004//
  33:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_twi.h/1.3/Mon Jul 19 14:27:58 2004//
  34:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_usart.h/1.5/Thu Nov 21 16:01:54 2002//
  35:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_mci.h/1.7/Wed May 19 09:27:28 2004//
  36:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_wdtc_6080A.h/1.1/Wed Oct  6 10:38:30 2004//
  37:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_udp.h/1.5/Tue Aug 30 12:13:47 2005//
  38:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_aic_6075b.h/1.2/Thu Jul  7 07:48:22 2005//
  39:./include/lib_AT91SAM7A3.h **** //* CVS Reference       : /lib_can_AT91.h/1.5/Tue Aug 23 15:37:07 2005//
  40:./include/lib_AT91SAM7A3.h **** //* ----------------------------------------------------------------------------
  41:./include/lib_AT91SAM7A3.h **** 
  42:./include/lib_AT91SAM7A3.h **** #ifndef lib_AT91SAM7A3_H
  43:./include/lib_AT91SAM7A3.h **** #define lib_AT91SAM7A3_H
  44:./include/lib_AT91SAM7A3.h **** 
  45:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
  46:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR AIC
  47:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
  48:./include/lib_AT91SAM7A3.h **** #define AT91C_AIC_BRANCH_OPCODE ((void (*) ()) 0xE51FFF20) // ldr, pc, [pc, #-&F20]
  49:./include/lib_AT91SAM7A3.h **** 
  50:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
  51:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_AIC_ConfigureIt
  52:./include/lib_AT91SAM7A3.h **** //* \brief Interrupt Handler Initialization
  53:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
  54:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_AIC_ConfigureIt (
  55:./include/lib_AT91SAM7A3.h **** 	AT91PS_AIC pAic,  // \arg pointer to the AIC registers
  56:./include/lib_AT91SAM7A3.h **** 	unsigned int irq_id,     // \arg interrupt number to initialize
  57:./include/lib_AT91SAM7A3.h **** 	unsigned int priority,   // \arg priority to give to the interrupt
  58:./include/lib_AT91SAM7A3.h **** 	unsigned int src_type,   // \arg activation and sense of activation
  59:./include/lib_AT91SAM7A3.h **** 	void (*newHandler) () ) // \arg address of the interrupt handler
  60:./include/lib_AT91SAM7A3.h **** {
  61:./include/lib_AT91SAM7A3.h **** 	unsigned int oldHandler;
  62:./include/lib_AT91SAM7A3.h ****     unsigned int mask ;
  63:./include/lib_AT91SAM7A3.h **** 
  64:./include/lib_AT91SAM7A3.h ****     oldHandler = pAic->AIC_SVR[irq_id];
  65:./include/lib_AT91SAM7A3.h **** 
  66:./include/lib_AT91SAM7A3.h ****     mask = 0x1 << irq_id ;
  67:./include/lib_AT91SAM7A3.h ****     //* Disable the interrupt on the interrupt controller
  68:./include/lib_AT91SAM7A3.h ****     pAic->AIC_IDCR = mask ;
  69:./include/lib_AT91SAM7A3.h ****     //* Save the interrupt handler routine pointer and the interrupt priority
  70:./include/lib_AT91SAM7A3.h ****     pAic->AIC_SVR[irq_id] = (unsigned int) newHandler ;
  71:./include/lib_AT91SAM7A3.h ****     //* Store the Source Mode Register
  72:./include/lib_AT91SAM7A3.h ****     pAic->AIC_SMR[irq_id] = src_type | priority  ;
  73:./include/lib_AT91SAM7A3.h ****     //* Clear the interrupt on the interrupt controller
  74:./include/lib_AT91SAM7A3.h ****     pAic->AIC_ICCR = mask ;
  75:./include/lib_AT91SAM7A3.h **** 
  76:./include/lib_AT91SAM7A3.h **** 	return oldHandler;
  77:./include/lib_AT91SAM7A3.h **** }
  78:./include/lib_AT91SAM7A3.h **** 
  79:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
  80:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_AIC_EnableIt
  81:./include/lib_AT91SAM7A3.h **** //* \brief Enable corresponding IT number
  82:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
  83:./include/lib_AT91SAM7A3.h **** __inline void AT91F_AIC_EnableIt (
  84:./include/lib_AT91SAM7A3.h **** 	AT91PS_AIC pAic,      // \arg pointer to the AIC registers
  85:./include/lib_AT91SAM7A3.h **** 	unsigned int irq_id ) // \arg interrupt number to initialize
  86:./include/lib_AT91SAM7A3.h **** {
  87:./include/lib_AT91SAM7A3.h ****     //* Enable the interrupt on the interrupt controller
  88:./include/lib_AT91SAM7A3.h ****     pAic->AIC_IECR = 0x1 << irq_id ;
  89:./include/lib_AT91SAM7A3.h **** }
  90:./include/lib_AT91SAM7A3.h **** 
  91:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
  92:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_AIC_DisableIt
  93:./include/lib_AT91SAM7A3.h **** //* \brief Disable corresponding IT number
  94:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
  95:./include/lib_AT91SAM7A3.h **** __inline void AT91F_AIC_DisableIt (
  96:./include/lib_AT91SAM7A3.h **** 	AT91PS_AIC pAic,      // \arg pointer to the AIC registers
  97:./include/lib_AT91SAM7A3.h **** 	unsigned int irq_id ) // \arg interrupt number to initialize
  98:./include/lib_AT91SAM7A3.h **** {
  99:./include/lib_AT91SAM7A3.h ****     unsigned int mask = 0x1 << irq_id;
 100:./include/lib_AT91SAM7A3.h ****     //* Disable the interrupt on the interrupt controller
 101:./include/lib_AT91SAM7A3.h ****     pAic->AIC_IDCR = mask ;
 102:./include/lib_AT91SAM7A3.h ****     //* Clear the interrupt on the Interrupt Controller ( if one is pending )
 103:./include/lib_AT91SAM7A3.h ****     pAic->AIC_ICCR = mask ;
 104:./include/lib_AT91SAM7A3.h **** }
 105:./include/lib_AT91SAM7A3.h **** 
 106:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 107:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_AIC_ClearIt
 108:./include/lib_AT91SAM7A3.h **** //* \brief Clear corresponding IT number
 109:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 110:./include/lib_AT91SAM7A3.h **** __inline void AT91F_AIC_ClearIt (
 111:./include/lib_AT91SAM7A3.h **** 	AT91PS_AIC pAic,     // \arg pointer to the AIC registers
 112:./include/lib_AT91SAM7A3.h **** 	unsigned int irq_id) // \arg interrupt number to initialize
 113:./include/lib_AT91SAM7A3.h **** {
 114:./include/lib_AT91SAM7A3.h ****     //* Clear the interrupt on the Interrupt Controller ( if one is pending )
 115:./include/lib_AT91SAM7A3.h ****     pAic->AIC_ICCR = (0x1 << irq_id);
 116:./include/lib_AT91SAM7A3.h **** }
 117:./include/lib_AT91SAM7A3.h **** 
 118:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 119:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_AIC_AcknowledgeIt
 120:./include/lib_AT91SAM7A3.h **** //* \brief Acknowledge corresponding IT number
 121:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 122:./include/lib_AT91SAM7A3.h **** __inline void AT91F_AIC_AcknowledgeIt (
 123:./include/lib_AT91SAM7A3.h **** 	AT91PS_AIC pAic)     // \arg pointer to the AIC registers
 124:./include/lib_AT91SAM7A3.h **** {
 125:./include/lib_AT91SAM7A3.h ****     pAic->AIC_EOICR = pAic->AIC_EOICR;
 126:./include/lib_AT91SAM7A3.h **** }
 127:./include/lib_AT91SAM7A3.h **** 
 128:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 129:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_AIC_SetExceptionVector
 130:./include/lib_AT91SAM7A3.h **** //* \brief Configure vector handler
 131:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 132:./include/lib_AT91SAM7A3.h **** __inline unsigned int  AT91F_AIC_SetExceptionVector (
 133:./include/lib_AT91SAM7A3.h **** 	unsigned int *pVector, // \arg pointer to the AIC registers
 134:./include/lib_AT91SAM7A3.h **** 	void (*Handler) () )   // \arg Interrupt Handler
 135:./include/lib_AT91SAM7A3.h **** {
 136:./include/lib_AT91SAM7A3.h **** 	unsigned int oldVector = *pVector;
 137:./include/lib_AT91SAM7A3.h **** 
 138:./include/lib_AT91SAM7A3.h **** 	if ((unsigned int) Handler == (unsigned int) AT91C_AIC_BRANCH_OPCODE)
 139:./include/lib_AT91SAM7A3.h **** 		*pVector = (unsigned int) AT91C_AIC_BRANCH_OPCODE;
 140:./include/lib_AT91SAM7A3.h **** 	else
 141:./include/lib_AT91SAM7A3.h **** 		*pVector = (((((unsigned int) Handler) - ((unsigned int) pVector) - 0x8) >> 2) & 0x00FFFFFF) | 0x
 142:./include/lib_AT91SAM7A3.h **** 
 143:./include/lib_AT91SAM7A3.h **** 	return oldVector;
 144:./include/lib_AT91SAM7A3.h **** }
 145:./include/lib_AT91SAM7A3.h **** 
 146:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 147:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_AIC_Trig
 148:./include/lib_AT91SAM7A3.h **** //* \brief Trig an IT
 149:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 150:./include/lib_AT91SAM7A3.h **** __inline void  AT91F_AIC_Trig (
 151:./include/lib_AT91SAM7A3.h **** 	AT91PS_AIC pAic,     // \arg pointer to the AIC registers
 152:./include/lib_AT91SAM7A3.h **** 	unsigned int irq_id) // \arg interrupt number
 153:./include/lib_AT91SAM7A3.h **** {
 154:./include/lib_AT91SAM7A3.h **** 	pAic->AIC_ISCR = (0x1 << irq_id) ;
 155:./include/lib_AT91SAM7A3.h **** }
 156:./include/lib_AT91SAM7A3.h **** 
 157:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 158:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_AIC_IsActive
 159:./include/lib_AT91SAM7A3.h **** //* \brief Test if an IT is active
 160:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 161:./include/lib_AT91SAM7A3.h **** __inline unsigned int  AT91F_AIC_IsActive (
 162:./include/lib_AT91SAM7A3.h **** 	AT91PS_AIC pAic,     // \arg pointer to the AIC registers
 163:./include/lib_AT91SAM7A3.h **** 	unsigned int irq_id) // \arg Interrupt Number
 164:./include/lib_AT91SAM7A3.h **** {
 165:./include/lib_AT91SAM7A3.h **** 	return (pAic->AIC_ISR & (0x1 << irq_id));
 166:./include/lib_AT91SAM7A3.h **** }
 167:./include/lib_AT91SAM7A3.h **** 
 168:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 169:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_AIC_IsPending
 170:./include/lib_AT91SAM7A3.h **** //* \brief Test if an IT is pending
 171:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 172:./include/lib_AT91SAM7A3.h **** __inline unsigned int  AT91F_AIC_IsPending (
 173:./include/lib_AT91SAM7A3.h **** 	AT91PS_AIC pAic,     // \arg pointer to the AIC registers
 174:./include/lib_AT91SAM7A3.h **** 	unsigned int irq_id) // \arg Interrupt Number
 175:./include/lib_AT91SAM7A3.h **** {
 176:./include/lib_AT91SAM7A3.h **** 	return (pAic->AIC_IPR & (0x1 << irq_id));
 177:./include/lib_AT91SAM7A3.h **** }
 178:./include/lib_AT91SAM7A3.h **** 
 179:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 180:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_AIC_Open
 181:./include/lib_AT91SAM7A3.h **** //* \brief Set exception vectors and AIC registers to default values
 182:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 183:./include/lib_AT91SAM7A3.h **** __inline void AT91F_AIC_Open(
 184:./include/lib_AT91SAM7A3.h **** 	AT91PS_AIC pAic,        // \arg pointer to the AIC registers
 185:./include/lib_AT91SAM7A3.h **** 	void (*IrqHandler) (),  // \arg Default IRQ vector exception
 186:./include/lib_AT91SAM7A3.h **** 	void (*FiqHandler) (),  // \arg Default FIQ vector exception
 187:./include/lib_AT91SAM7A3.h **** 	void (*DefaultHandler)  (), // \arg Default Handler set in ISR
 188:./include/lib_AT91SAM7A3.h **** 	void (*SpuriousHandler) (), // \arg Default Spurious Handler
 189:./include/lib_AT91SAM7A3.h **** 	unsigned int protectMode)   // \arg Debug Control Register
 190:./include/lib_AT91SAM7A3.h **** {
 191:./include/lib_AT91SAM7A3.h **** 	int i;
 192:./include/lib_AT91SAM7A3.h **** 
 193:./include/lib_AT91SAM7A3.h **** 	// Disable all interrupts and set IVR to the default handler
 194:./include/lib_AT91SAM7A3.h **** 	for (i = 0; i < 32; ++i) {
 195:./include/lib_AT91SAM7A3.h **** 		AT91F_AIC_DisableIt(pAic, i);
 196:./include/lib_AT91SAM7A3.h **** 		AT91F_AIC_ConfigureIt(pAic, i, AT91C_AIC_PRIOR_LOWEST, AT91C_AIC_SRCTYPE_HIGH_LEVEL, DefaultHandl
 197:./include/lib_AT91SAM7A3.h **** 	}
 198:./include/lib_AT91SAM7A3.h **** 
 199:./include/lib_AT91SAM7A3.h **** 	// Set the IRQ exception vector
 200:./include/lib_AT91SAM7A3.h **** 	AT91F_AIC_SetExceptionVector((unsigned int *) 0x18, IrqHandler);
 201:./include/lib_AT91SAM7A3.h **** 	// Set the Fast Interrupt exception vector
 202:./include/lib_AT91SAM7A3.h **** 	AT91F_AIC_SetExceptionVector((unsigned int *) 0x1C, FiqHandler);
 203:./include/lib_AT91SAM7A3.h **** 
 204:./include/lib_AT91SAM7A3.h **** 	pAic->AIC_SPU = (unsigned int) SpuriousHandler;
 205:./include/lib_AT91SAM7A3.h **** 	pAic->AIC_DCR = protectMode;
 206:./include/lib_AT91SAM7A3.h **** }
 207:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
 208:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR PDC
 209:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
 210:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 211:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_SetNextRx
 212:./include/lib_AT91SAM7A3.h **** //* \brief Set the next receive transfer descriptor
 213:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 214:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PDC_SetNextRx (
 215:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC,     // \arg pointer to a PDC controller
 216:./include/lib_AT91SAM7A3.h **** 	char *address,       // \arg address to the next bloc to be received
 217:./include/lib_AT91SAM7A3.h **** 	unsigned int bytes)  // \arg number of bytes to be received
 218:./include/lib_AT91SAM7A3.h **** {
 219:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_RNPR = (unsigned int) address;
 220:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_RNCR = bytes;
 221:./include/lib_AT91SAM7A3.h **** }
 222:./include/lib_AT91SAM7A3.h **** 
 223:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 224:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_SetNextTx
 225:./include/lib_AT91SAM7A3.h **** //* \brief Set the next transmit transfer descriptor
 226:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 227:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PDC_SetNextTx (
 228:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC,       // \arg pointer to a PDC controller
 229:./include/lib_AT91SAM7A3.h **** 	char *address,         // \arg address to the next bloc to be transmitted
 230:./include/lib_AT91SAM7A3.h **** 	unsigned int bytes)    // \arg number of bytes to be transmitted
 231:./include/lib_AT91SAM7A3.h **** {
 232:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_TNPR = (unsigned int) address;
 233:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_TNCR = bytes;
 234:./include/lib_AT91SAM7A3.h **** }
 235:./include/lib_AT91SAM7A3.h **** 
 236:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 237:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_SetRx
 238:./include/lib_AT91SAM7A3.h **** //* \brief Set the receive transfer descriptor
 239:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 240:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PDC_SetRx (
 241:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC,       // \arg pointer to a PDC controller
 242:./include/lib_AT91SAM7A3.h **** 	char *address,         // \arg address to the next bloc to be received
 243:./include/lib_AT91SAM7A3.h **** 	unsigned int bytes)    // \arg number of bytes to be received
 244:./include/lib_AT91SAM7A3.h **** {
 245:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_RPR = (unsigned int) address;
 246:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_RCR = bytes;
 247:./include/lib_AT91SAM7A3.h **** }
 248:./include/lib_AT91SAM7A3.h **** 
 249:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 250:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_SetTx
 251:./include/lib_AT91SAM7A3.h **** //* \brief Set the transmit transfer descriptor
 252:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 253:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PDC_SetTx (
 254:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC,       // \arg pointer to a PDC controller
 255:./include/lib_AT91SAM7A3.h **** 	char *address,         // \arg address to the next bloc to be transmitted
 256:./include/lib_AT91SAM7A3.h **** 	unsigned int bytes)    // \arg number of bytes to be transmitted
 257:./include/lib_AT91SAM7A3.h **** {
 258:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_TPR = (unsigned int) address;
 259:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_TCR = bytes;
 260:./include/lib_AT91SAM7A3.h **** }
 261:./include/lib_AT91SAM7A3.h **** 
 262:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 263:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_EnableTx
 264:./include/lib_AT91SAM7A3.h **** //* \brief Enable transmit
 265:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 266:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PDC_EnableTx (
 267:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 268:./include/lib_AT91SAM7A3.h **** {
 269:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_PTCR = AT91C_PDC_TXTEN;
 270:./include/lib_AT91SAM7A3.h **** }
 271:./include/lib_AT91SAM7A3.h **** 
 272:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 273:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_EnableRx
 274:./include/lib_AT91SAM7A3.h **** //* \brief Enable receive
 275:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 276:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PDC_EnableRx (
 277:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 278:./include/lib_AT91SAM7A3.h **** {
 279:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_PTCR = AT91C_PDC_RXTEN;
 280:./include/lib_AT91SAM7A3.h **** }
 281:./include/lib_AT91SAM7A3.h **** 
 282:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 283:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_DisableTx
 284:./include/lib_AT91SAM7A3.h **** //* \brief Disable transmit
 285:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 286:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PDC_DisableTx (
 287:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 288:./include/lib_AT91SAM7A3.h **** {
 289:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_PTCR = AT91C_PDC_TXTDIS;
 290:./include/lib_AT91SAM7A3.h **** }
 291:./include/lib_AT91SAM7A3.h **** 
 292:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 293:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_DisableRx
 294:./include/lib_AT91SAM7A3.h **** //* \brief Disable receive
 295:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 296:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PDC_DisableRx (
 297:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 298:./include/lib_AT91SAM7A3.h **** {
 299:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_PTCR = AT91C_PDC_RXTDIS;
 300:./include/lib_AT91SAM7A3.h **** }
 301:./include/lib_AT91SAM7A3.h **** 
 302:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 303:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_IsTxEmpty
 304:./include/lib_AT91SAM7A3.h **** //* \brief Test if the current transfer descriptor has been sent
 305:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 306:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PDC_IsTxEmpty ( // \return return 1 if transfer is complete
 307:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 308:./include/lib_AT91SAM7A3.h **** {
 309:./include/lib_AT91SAM7A3.h **** 	return !(pPDC->PDC_TCR);
 310:./include/lib_AT91SAM7A3.h **** }
 311:./include/lib_AT91SAM7A3.h **** 
 312:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 313:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_IsNextTxEmpty
 314:./include/lib_AT91SAM7A3.h **** //* \brief Test if the next transfer descriptor has been moved to the current td
 315:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 316:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PDC_IsNextTxEmpty ( // \return return 1 if transfer is complete
 317:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 318:./include/lib_AT91SAM7A3.h **** {
 319:./include/lib_AT91SAM7A3.h **** 	return !(pPDC->PDC_TNCR);
 320:./include/lib_AT91SAM7A3.h **** }
 321:./include/lib_AT91SAM7A3.h **** 
 322:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 323:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_IsRxEmpty
 324:./include/lib_AT91SAM7A3.h **** //* \brief Test if the current transfer descriptor has been filled
 325:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 326:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PDC_IsRxEmpty ( // \return return 1 if transfer is complete
 327:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 328:./include/lib_AT91SAM7A3.h **** {
 329:./include/lib_AT91SAM7A3.h **** 	return !(pPDC->PDC_RCR);
 330:./include/lib_AT91SAM7A3.h **** }
 331:./include/lib_AT91SAM7A3.h **** 
 332:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 333:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_IsNextRxEmpty
 334:./include/lib_AT91SAM7A3.h **** //* \brief Test if the next transfer descriptor has been moved to the current td
 335:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 336:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PDC_IsNextRxEmpty ( // \return return 1 if transfer is complete
 337:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC )       // \arg pointer to a PDC controller
 338:./include/lib_AT91SAM7A3.h **** {
 339:./include/lib_AT91SAM7A3.h **** 	return !(pPDC->PDC_RNCR);
 340:./include/lib_AT91SAM7A3.h **** }
 341:./include/lib_AT91SAM7A3.h **** 
 342:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 343:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_Open
 344:./include/lib_AT91SAM7A3.h **** //* \brief Open PDC: disable TX and RX reset transfer descriptors, re-enable RX and TX
 345:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 346:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PDC_Open (
 347:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC)       // \arg pointer to a PDC controller
 348:./include/lib_AT91SAM7A3.h **** {
 349:./include/lib_AT91SAM7A3.h ****     //* Disable the RX and TX PDC transfer requests
 350:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_DisableRx(pPDC);
 351:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_DisableTx(pPDC);
 352:./include/lib_AT91SAM7A3.h **** 
 353:./include/lib_AT91SAM7A3.h **** 	//* Reset all Counter register Next buffer first
 354:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_SetNextTx(pPDC, (char *) 0, 0);
 355:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_SetNextRx(pPDC, (char *) 0, 0);
 356:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_SetTx(pPDC, (char *) 0, 0);
 357:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_SetRx(pPDC, (char *) 0, 0);
 358:./include/lib_AT91SAM7A3.h **** 
 359:./include/lib_AT91SAM7A3.h ****     //* Enable the RX and TX PDC transfer requests
 360:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_EnableRx(pPDC);
 361:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_EnableTx(pPDC);
 362:./include/lib_AT91SAM7A3.h **** }
 363:./include/lib_AT91SAM7A3.h **** 
 364:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 365:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_Close
 366:./include/lib_AT91SAM7A3.h **** //* \brief Close PDC: disable TX and RX reset transfer descriptors
 367:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 368:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PDC_Close (
 369:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC)       // \arg pointer to a PDC controller
 370:./include/lib_AT91SAM7A3.h **** {
 371:./include/lib_AT91SAM7A3.h ****     //* Disable the RX and TX PDC transfer requests
 372:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_DisableRx(pPDC);
 373:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_DisableTx(pPDC);
 374:./include/lib_AT91SAM7A3.h **** 
 375:./include/lib_AT91SAM7A3.h **** 	//* Reset all Counter register Next buffer first
 376:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_SetNextTx(pPDC, (char *) 0, 0);
 377:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_SetNextRx(pPDC, (char *) 0, 0);
 378:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_SetTx(pPDC, (char *) 0, 0);
 379:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_SetRx(pPDC, (char *) 0, 0);
 380:./include/lib_AT91SAM7A3.h **** 
 381:./include/lib_AT91SAM7A3.h **** }
 382:./include/lib_AT91SAM7A3.h **** 
 383:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 384:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_SendFrame
 385:./include/lib_AT91SAM7A3.h **** //* \brief Close PDC: disable TX and RX reset transfer descriptors
 386:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 387:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PDC_SendFrame(
 388:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC,
 389:./include/lib_AT91SAM7A3.h **** 	char *pBuffer,
 390:./include/lib_AT91SAM7A3.h **** 	unsigned int szBuffer,
 391:./include/lib_AT91SAM7A3.h **** 	char *pNextBuffer,
 392:./include/lib_AT91SAM7A3.h **** 	unsigned int szNextBuffer )
 393:./include/lib_AT91SAM7A3.h **** {
 394:./include/lib_AT91SAM7A3.h **** 	if (AT91F_PDC_IsTxEmpty(pPDC)) {
 395:./include/lib_AT91SAM7A3.h **** 		//* Buffer and next buffer can be initialized
 396:./include/lib_AT91SAM7A3.h **** 		AT91F_PDC_SetTx(pPDC, pBuffer, szBuffer);
 397:./include/lib_AT91SAM7A3.h **** 		AT91F_PDC_SetNextTx(pPDC, pNextBuffer, szNextBuffer);
 398:./include/lib_AT91SAM7A3.h **** 		return 2;
 399:./include/lib_AT91SAM7A3.h **** 	}
 400:./include/lib_AT91SAM7A3.h **** 	else if (AT91F_PDC_IsNextTxEmpty(pPDC)) {
 401:./include/lib_AT91SAM7A3.h **** 		//* Only one buffer can be initialized
 402:./include/lib_AT91SAM7A3.h **** 		AT91F_PDC_SetNextTx(pPDC, pBuffer, szBuffer);
 403:./include/lib_AT91SAM7A3.h **** 		return 1;
 404:./include/lib_AT91SAM7A3.h **** 	}
 405:./include/lib_AT91SAM7A3.h **** 	else {
 406:./include/lib_AT91SAM7A3.h **** 		//* All buffer are in use...
 407:./include/lib_AT91SAM7A3.h **** 		return 0;
 408:./include/lib_AT91SAM7A3.h **** 	}
 409:./include/lib_AT91SAM7A3.h **** }
 410:./include/lib_AT91SAM7A3.h **** 
 411:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 412:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PDC_ReceiveFrame
 413:./include/lib_AT91SAM7A3.h **** //* \brief Close PDC: disable TX and RX reset transfer descriptors
 414:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 415:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PDC_ReceiveFrame (
 416:./include/lib_AT91SAM7A3.h **** 	AT91PS_PDC pPDC,
 417:./include/lib_AT91SAM7A3.h **** 	char *pBuffer,
 418:./include/lib_AT91SAM7A3.h **** 	unsigned int szBuffer,
 419:./include/lib_AT91SAM7A3.h **** 	char *pNextBuffer,
 420:./include/lib_AT91SAM7A3.h **** 	unsigned int szNextBuffer )
 421:./include/lib_AT91SAM7A3.h **** {
 422:./include/lib_AT91SAM7A3.h **** 	if (AT91F_PDC_IsRxEmpty(pPDC)) {
 423:./include/lib_AT91SAM7A3.h **** 		//* Buffer and next buffer can be initialized
 424:./include/lib_AT91SAM7A3.h **** 		AT91F_PDC_SetRx(pPDC, pBuffer, szBuffer);
 425:./include/lib_AT91SAM7A3.h **** 		AT91F_PDC_SetNextRx(pPDC, pNextBuffer, szNextBuffer);
 426:./include/lib_AT91SAM7A3.h **** 		return 2;
 427:./include/lib_AT91SAM7A3.h **** 	}
 428:./include/lib_AT91SAM7A3.h **** 	else if (AT91F_PDC_IsNextRxEmpty(pPDC)) {
 429:./include/lib_AT91SAM7A3.h **** 		//* Only one buffer can be initialized
 430:./include/lib_AT91SAM7A3.h **** 		AT91F_PDC_SetNextRx(pPDC, pBuffer, szBuffer);
 431:./include/lib_AT91SAM7A3.h **** 		return 1;
 432:./include/lib_AT91SAM7A3.h **** 	}
 433:./include/lib_AT91SAM7A3.h **** 	else {
 434:./include/lib_AT91SAM7A3.h **** 		//* All buffer are in use...
 435:./include/lib_AT91SAM7A3.h **** 		return 0;
 436:./include/lib_AT91SAM7A3.h **** 	}
 437:./include/lib_AT91SAM7A3.h **** }
 438:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
 439:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR DBGU
 440:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
 441:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 442:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_DBGU_InterruptEnable
 443:./include/lib_AT91SAM7A3.h **** //* \brief Enable DBGU Interrupt
 444:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 445:./include/lib_AT91SAM7A3.h **** __inline void AT91F_DBGU_InterruptEnable(
 446:./include/lib_AT91SAM7A3.h ****         AT91PS_DBGU pDbgu,   // \arg  pointer to a DBGU controller
 447:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  dbgu interrupt to be enabled
 448:./include/lib_AT91SAM7A3.h **** {
 449:./include/lib_AT91SAM7A3.h ****         pDbgu->DBGU_IER = flag;
 450:./include/lib_AT91SAM7A3.h **** }
 451:./include/lib_AT91SAM7A3.h **** 
 452:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 453:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_DBGU_InterruptDisable
 454:./include/lib_AT91SAM7A3.h **** //* \brief Disable DBGU Interrupt
 455:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 456:./include/lib_AT91SAM7A3.h **** __inline void AT91F_DBGU_InterruptDisable(
 457:./include/lib_AT91SAM7A3.h ****         AT91PS_DBGU pDbgu,   // \arg  pointer to a DBGU controller
 458:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  dbgu interrupt to be disabled
 459:./include/lib_AT91SAM7A3.h **** {
 460:./include/lib_AT91SAM7A3.h ****         pDbgu->DBGU_IDR = flag;
 461:./include/lib_AT91SAM7A3.h **** }
 462:./include/lib_AT91SAM7A3.h **** 
 463:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 464:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_DBGU_GetInterruptMaskStatus
 465:./include/lib_AT91SAM7A3.h **** //* \brief Return DBGU Interrupt Mask Status
 466:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 467:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_DBGU_GetInterruptMaskStatus( // \return DBGU Interrupt Mask Status
 468:./include/lib_AT91SAM7A3.h ****         AT91PS_DBGU pDbgu) // \arg  pointer to a DBGU controller
 469:./include/lib_AT91SAM7A3.h **** {
 470:./include/lib_AT91SAM7A3.h ****         return pDbgu->DBGU_IMR;
 471:./include/lib_AT91SAM7A3.h **** }
 472:./include/lib_AT91SAM7A3.h **** 
 473:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 474:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_DBGU_IsInterruptMasked
 475:./include/lib_AT91SAM7A3.h **** //* \brief Test if DBGU Interrupt is Masked 
 476:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 477:./include/lib_AT91SAM7A3.h **** __inline int AT91F_DBGU_IsInterruptMasked(
 478:./include/lib_AT91SAM7A3.h ****         AT91PS_DBGU pDbgu,   // \arg  pointer to a DBGU controller
 479:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
 480:./include/lib_AT91SAM7A3.h **** {
 481:./include/lib_AT91SAM7A3.h ****         return (AT91F_DBGU_GetInterruptMaskStatus(pDbgu) & flag);
 482:./include/lib_AT91SAM7A3.h **** }
 483:./include/lib_AT91SAM7A3.h **** 
 484:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
 485:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR PIO
 486:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
 487:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 488:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_CfgPeriph
 489:./include/lib_AT91SAM7A3.h **** //* \brief Enable pins to be drived by peripheral
 490:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 491:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_CfgPeriph(
 492:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 493:./include/lib_AT91SAM7A3.h **** 	unsigned int periphAEnable,  // \arg PERIPH A to enable
 494:./include/lib_AT91SAM7A3.h **** 	unsigned int periphBEnable)  // \arg PERIPH B to enable
 495:./include/lib_AT91SAM7A3.h **** 
 496:./include/lib_AT91SAM7A3.h **** {
 497:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_ASR = periphAEnable;
 498:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_BSR = periphBEnable;
 499:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_PDR = (periphAEnable | periphBEnable); // Set in Periph mode
 500:./include/lib_AT91SAM7A3.h **** }
 501:./include/lib_AT91SAM7A3.h **** 
 502:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 503:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_CfgOutput
 504:./include/lib_AT91SAM7A3.h **** //* \brief Enable PIO in output mode
 505:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 506:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_CfgOutput(
 507:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 508:./include/lib_AT91SAM7A3.h **** 	unsigned int pioEnable)      // \arg PIO to be enabled
 509:./include/lib_AT91SAM7A3.h **** {
 510:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_PER = pioEnable; // Set in PIO mode
 511:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_OER = pioEnable; // Configure in Output
 512:./include/lib_AT91SAM7A3.h **** }
 513:./include/lib_AT91SAM7A3.h **** 
 514:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 515:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_CfgInput
 516:./include/lib_AT91SAM7A3.h **** //* \brief Enable PIO in input mode
 517:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 518:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_CfgInput(
 519:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 520:./include/lib_AT91SAM7A3.h **** 	unsigned int inputEnable)      // \arg PIO to be enabled
 521:./include/lib_AT91SAM7A3.h **** {
 522:./include/lib_AT91SAM7A3.h **** 	// Disable output
 523:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_ODR  = inputEnable;
 524:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_PER  = inputEnable;
 525:./include/lib_AT91SAM7A3.h **** }
 526:./include/lib_AT91SAM7A3.h **** 
 527:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 528:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_CfgOpendrain
 529:./include/lib_AT91SAM7A3.h **** //* \brief Configure PIO in open drain
 530:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 531:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_CfgOpendrain(
 532:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 533:./include/lib_AT91SAM7A3.h **** 	unsigned int multiDrvEnable) // \arg pio to be configured in open drain
 534:./include/lib_AT91SAM7A3.h **** {
 535:./include/lib_AT91SAM7A3.h **** 	// Configure the multi-drive option
 536:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_MDDR = ~multiDrvEnable;
 537:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_MDER = multiDrvEnable;
 538:./include/lib_AT91SAM7A3.h **** }
 539:./include/lib_AT91SAM7A3.h **** 
 540:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 541:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_CfgPullup
 542:./include/lib_AT91SAM7A3.h **** //* \brief Enable pullup on PIO
 543:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 544:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_CfgPullup(
 545:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 546:./include/lib_AT91SAM7A3.h **** 	unsigned int pullupEnable)   // \arg enable pullup on PIO
 547:./include/lib_AT91SAM7A3.h **** {
 548:./include/lib_AT91SAM7A3.h **** 		// Connect or not Pullup
 549:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_PPUDR = ~pullupEnable;
 550:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_PPUER = pullupEnable;
 551:./include/lib_AT91SAM7A3.h **** }
 552:./include/lib_AT91SAM7A3.h **** 
 553:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 554:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_CfgDirectDrive
 555:./include/lib_AT91SAM7A3.h **** //* \brief Enable direct drive on PIO
 556:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 557:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_CfgDirectDrive(
 558:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 559:./include/lib_AT91SAM7A3.h **** 	unsigned int directDrive)    // \arg PIO to be configured with direct drive
 560:./include/lib_AT91SAM7A3.h **** 
 561:./include/lib_AT91SAM7A3.h **** {
 562:./include/lib_AT91SAM7A3.h **** 	// Configure the Direct Drive
 563:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_OWDR  = ~directDrive;
 564:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_OWER  = directDrive;
 565:./include/lib_AT91SAM7A3.h **** }
 566:./include/lib_AT91SAM7A3.h **** 
 567:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 568:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_CfgInputFilter
 569:./include/lib_AT91SAM7A3.h **** //* \brief Enable input filter on input PIO
 570:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 571:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_CfgInputFilter(
 572:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio,             // \arg pointer to a PIO controller
 573:./include/lib_AT91SAM7A3.h **** 	unsigned int inputFilter)    // \arg PIO to be configured with input filter
 574:./include/lib_AT91SAM7A3.h **** 
 575:./include/lib_AT91SAM7A3.h **** {
 576:./include/lib_AT91SAM7A3.h **** 	// Configure the Direct Drive
 577:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_IFDR  = ~inputFilter;
 578:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_IFER  = inputFilter;
 579:./include/lib_AT91SAM7A3.h **** }
 580:./include/lib_AT91SAM7A3.h **** 
 581:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 582:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_GetInput
 583:./include/lib_AT91SAM7A3.h **** //* \brief Return PIO input value
 584:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 585:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PIO_GetInput( // \return PIO input
 586:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 587:./include/lib_AT91SAM7A3.h **** {
 588:./include/lib_AT91SAM7A3.h **** 	return pPio->PIO_PDSR;
 589:./include/lib_AT91SAM7A3.h **** }
 590:./include/lib_AT91SAM7A3.h **** 
 591:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 592:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_IsInputSet
 593:./include/lib_AT91SAM7A3.h **** //* \brief Test if PIO is input flag is active
 594:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 595:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PIO_IsInputSet(
 596:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 597:./include/lib_AT91SAM7A3.h **** 	unsigned int flag) // \arg  flag to be tested
 598:./include/lib_AT91SAM7A3.h **** {
 599:./include/lib_AT91SAM7A3.h **** 	return (AT91F_PIO_GetInput(pPio) & flag);
 600:./include/lib_AT91SAM7A3.h **** }
 601:./include/lib_AT91SAM7A3.h **** 
 602:./include/lib_AT91SAM7A3.h **** 
 603:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 604:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_SetOutput
 605:./include/lib_AT91SAM7A3.h **** //* \brief Set to 1 output PIO
 606:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 607:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_SetOutput(
 608:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 609:./include/lib_AT91SAM7A3.h **** 	unsigned int flag) // \arg  output to be set
 610:./include/lib_AT91SAM7A3.h **** {
 611:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_SODR = flag;
 612:./include/lib_AT91SAM7A3.h **** }
 613:./include/lib_AT91SAM7A3.h **** 
 614:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 615:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_ClearOutput
 616:./include/lib_AT91SAM7A3.h **** //* \brief Set to 0 output PIO
 617:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 618:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_ClearOutput(
 619:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 620:./include/lib_AT91SAM7A3.h **** 	unsigned int flag) // \arg  output to be cleared
 621:./include/lib_AT91SAM7A3.h **** {
 622:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_CODR = flag;
 623:./include/lib_AT91SAM7A3.h **** }
 624:./include/lib_AT91SAM7A3.h **** 
 625:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 626:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_ForceOutput
 627:./include/lib_AT91SAM7A3.h **** //* \brief Force output when Direct drive option is enabled
 628:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 629:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_ForceOutput(
 630:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 631:./include/lib_AT91SAM7A3.h **** 	unsigned int flag) // \arg  output to be forced
 632:./include/lib_AT91SAM7A3.h **** {
 633:./include/lib_AT91SAM7A3.h **** 	pPio->PIO_ODSR = flag;
 634:./include/lib_AT91SAM7A3.h **** }
 635:./include/lib_AT91SAM7A3.h **** 
 636:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 637:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_Enable
 638:./include/lib_AT91SAM7A3.h **** //* \brief Enable PIO
 639:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 640:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_Enable(
 641:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 642:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio to be enabled 
 643:./include/lib_AT91SAM7A3.h **** {
 644:./include/lib_AT91SAM7A3.h ****         pPio->PIO_PER = flag;
 645:./include/lib_AT91SAM7A3.h **** }
 646:./include/lib_AT91SAM7A3.h **** 
 647:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 648:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_Disable
 649:./include/lib_AT91SAM7A3.h **** //* \brief Disable PIO
 650:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 651:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_Disable(
 652:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 653:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio to be disabled 
 654:./include/lib_AT91SAM7A3.h **** {
 655:./include/lib_AT91SAM7A3.h ****         pPio->PIO_PDR = flag;
 656:./include/lib_AT91SAM7A3.h **** }
 657:./include/lib_AT91SAM7A3.h **** 
 658:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 659:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_GetStatus
 660:./include/lib_AT91SAM7A3.h **** //* \brief Return PIO Status
 661:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 662:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PIO_GetStatus( // \return PIO Status
 663:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 664:./include/lib_AT91SAM7A3.h **** {
 665:./include/lib_AT91SAM7A3.h ****         return pPio->PIO_PSR;
 666:./include/lib_AT91SAM7A3.h **** }
 667:./include/lib_AT91SAM7A3.h **** 
 668:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 669:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_IsSet
 670:./include/lib_AT91SAM7A3.h **** //* \brief Test if PIO is Set
 671:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 672:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PIO_IsSet(
 673:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 674:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
 675:./include/lib_AT91SAM7A3.h **** {
 676:./include/lib_AT91SAM7A3.h ****         return (AT91F_PIO_GetStatus(pPio) & flag);
 677:./include/lib_AT91SAM7A3.h **** }
 678:./include/lib_AT91SAM7A3.h **** 
 679:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 680:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_OutputEnable
 681:./include/lib_AT91SAM7A3.h **** //* \brief Output Enable PIO
 682:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 683:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_OutputEnable(
 684:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 685:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio output to be enabled
 686:./include/lib_AT91SAM7A3.h **** {
 687:./include/lib_AT91SAM7A3.h ****         pPio->PIO_OER = flag;
 688:./include/lib_AT91SAM7A3.h **** }
 689:./include/lib_AT91SAM7A3.h **** 
 690:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 691:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_OutputDisable
 692:./include/lib_AT91SAM7A3.h **** //* \brief Output Enable PIO
 693:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 694:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_OutputDisable(
 695:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 696:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio output to be disabled
 697:./include/lib_AT91SAM7A3.h **** {
 698:./include/lib_AT91SAM7A3.h ****         pPio->PIO_ODR = flag;
 699:./include/lib_AT91SAM7A3.h **** }
 700:./include/lib_AT91SAM7A3.h **** 
 701:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 702:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_GetOutputStatus
 703:./include/lib_AT91SAM7A3.h **** //* \brief Return PIO Output Status
 704:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 705:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PIO_GetOutputStatus( // \return PIO Output Status
 706:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 707:./include/lib_AT91SAM7A3.h **** {
 708:./include/lib_AT91SAM7A3.h ****         return pPio->PIO_OSR;
 709:./include/lib_AT91SAM7A3.h **** }
 710:./include/lib_AT91SAM7A3.h **** 
 711:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 712:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_IsOuputSet
 713:./include/lib_AT91SAM7A3.h **** //* \brief Test if PIO Output is Set
 714:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 715:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PIO_IsOutputSet(
 716:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 717:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
 718:./include/lib_AT91SAM7A3.h **** {
 719:./include/lib_AT91SAM7A3.h ****         return (AT91F_PIO_GetOutputStatus(pPio) & flag);
 720:./include/lib_AT91SAM7A3.h **** }
 721:./include/lib_AT91SAM7A3.h **** 
 722:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 723:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_InputFilterEnable
 724:./include/lib_AT91SAM7A3.h **** //* \brief Input Filter Enable PIO
 725:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 726:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_InputFilterEnable(
 727:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 728:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio input filter to be enabled
 729:./include/lib_AT91SAM7A3.h **** {
 730:./include/lib_AT91SAM7A3.h ****         pPio->PIO_IFER = flag;
 731:./include/lib_AT91SAM7A3.h **** }
 732:./include/lib_AT91SAM7A3.h **** 
 733:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 734:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_InputFilterDisable
 735:./include/lib_AT91SAM7A3.h **** //* \brief Input Filter Disable PIO
 736:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 737:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_InputFilterDisable(
 738:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 739:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio input filter to be disabled
 740:./include/lib_AT91SAM7A3.h **** {
 741:./include/lib_AT91SAM7A3.h ****         pPio->PIO_IFDR = flag;
 742:./include/lib_AT91SAM7A3.h **** }
 743:./include/lib_AT91SAM7A3.h **** 
 744:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 745:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_GetInputFilterStatus
 746:./include/lib_AT91SAM7A3.h **** //* \brief Return PIO Input Filter Status
 747:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 748:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PIO_GetInputFilterStatus( // \return PIO Input Filter Status
 749:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 750:./include/lib_AT91SAM7A3.h **** {
 751:./include/lib_AT91SAM7A3.h ****         return pPio->PIO_IFSR;
 752:./include/lib_AT91SAM7A3.h **** }
 753:./include/lib_AT91SAM7A3.h **** 
 754:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 755:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_IsInputFilterSet
 756:./include/lib_AT91SAM7A3.h **** //* \brief Test if PIO Input filter is Set
 757:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 758:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PIO_IsInputFilterSet(
 759:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 760:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
 761:./include/lib_AT91SAM7A3.h **** {
 762:./include/lib_AT91SAM7A3.h ****         return (AT91F_PIO_GetInputFilterStatus(pPio) & flag);
 763:./include/lib_AT91SAM7A3.h **** }
 764:./include/lib_AT91SAM7A3.h **** 
 765:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 766:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_GetOutputDataStatus
 767:./include/lib_AT91SAM7A3.h **** //* \brief Return PIO Output Data Status 
 768:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 769:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PIO_GetOutputDataStatus( // \return PIO Output Data Status 
 770:./include/lib_AT91SAM7A3.h **** 	AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 771:./include/lib_AT91SAM7A3.h **** {
 772:./include/lib_AT91SAM7A3.h ****         return pPio->PIO_ODSR;
 773:./include/lib_AT91SAM7A3.h **** }
 774:./include/lib_AT91SAM7A3.h **** 
 775:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 776:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_InterruptEnable
 777:./include/lib_AT91SAM7A3.h **** //* \brief Enable PIO Interrupt
 778:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 779:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_InterruptEnable(
 780:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 781:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio interrupt to be enabled
 782:./include/lib_AT91SAM7A3.h **** {
 783:./include/lib_AT91SAM7A3.h ****         pPio->PIO_IER = flag;
 784:./include/lib_AT91SAM7A3.h **** }
 785:./include/lib_AT91SAM7A3.h **** 
 786:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 787:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_InterruptDisable
 788:./include/lib_AT91SAM7A3.h **** //* \brief Disable PIO Interrupt
 789:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 790:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_InterruptDisable(
 791:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 792:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio interrupt to be disabled
 793:./include/lib_AT91SAM7A3.h **** {
 794:./include/lib_AT91SAM7A3.h ****         pPio->PIO_IDR = flag;
 795:./include/lib_AT91SAM7A3.h **** }
 796:./include/lib_AT91SAM7A3.h **** 
 797:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 798:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_GetInterruptMaskStatus
 799:./include/lib_AT91SAM7A3.h **** //* \brief Return PIO Interrupt Mask Status
 800:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 801:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PIO_GetInterruptMaskStatus( // \return PIO Interrupt Mask Status
 802:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 803:./include/lib_AT91SAM7A3.h **** {
 804:./include/lib_AT91SAM7A3.h ****         return pPio->PIO_IMR;
 805:./include/lib_AT91SAM7A3.h **** }
 806:./include/lib_AT91SAM7A3.h **** 
 807:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 808:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_GetInterruptStatus
 809:./include/lib_AT91SAM7A3.h **** //* \brief Return PIO Interrupt Status
 810:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 811:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PIO_GetInterruptStatus( // \return PIO Interrupt Status
 812:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 813:./include/lib_AT91SAM7A3.h **** {
 814:./include/lib_AT91SAM7A3.h ****         return pPio->PIO_ISR;
 815:./include/lib_AT91SAM7A3.h **** }
 816:./include/lib_AT91SAM7A3.h **** 
 817:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 818:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_IsInterruptMasked
 819:./include/lib_AT91SAM7A3.h **** //* \brief Test if PIO Interrupt is Masked 
 820:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 821:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PIO_IsInterruptMasked(
 822:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 823:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
 824:./include/lib_AT91SAM7A3.h **** {
 825:./include/lib_AT91SAM7A3.h ****         return (AT91F_PIO_GetInterruptMaskStatus(pPio) & flag);
 826:./include/lib_AT91SAM7A3.h **** }
 827:./include/lib_AT91SAM7A3.h **** 
 828:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 829:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_IsInterruptSet
 830:./include/lib_AT91SAM7A3.h **** //* \brief Test if PIO Interrupt is Set
 831:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 832:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PIO_IsInterruptSet(
 833:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 834:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
 835:./include/lib_AT91SAM7A3.h **** {
 836:./include/lib_AT91SAM7A3.h ****         return (AT91F_PIO_GetInterruptStatus(pPio) & flag);
 837:./include/lib_AT91SAM7A3.h **** }
 838:./include/lib_AT91SAM7A3.h **** 
 839:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 840:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_MultiDriverEnable
 841:./include/lib_AT91SAM7A3.h **** //* \brief Multi Driver Enable PIO
 842:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 843:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_MultiDriverEnable(
 844:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 845:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio to be enabled
 846:./include/lib_AT91SAM7A3.h **** {
 847:./include/lib_AT91SAM7A3.h ****         pPio->PIO_MDER = flag;
 848:./include/lib_AT91SAM7A3.h **** }
 849:./include/lib_AT91SAM7A3.h **** 
 850:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 851:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_MultiDriverDisable
 852:./include/lib_AT91SAM7A3.h **** //* \brief Multi Driver Disable PIO
 853:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 854:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_MultiDriverDisable(
 855:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 856:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio to be disabled
 857:./include/lib_AT91SAM7A3.h **** {
 858:./include/lib_AT91SAM7A3.h ****         pPio->PIO_MDDR = flag;
 859:./include/lib_AT91SAM7A3.h **** }
 860:./include/lib_AT91SAM7A3.h **** 
 861:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 862:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_GetMultiDriverStatus
 863:./include/lib_AT91SAM7A3.h **** //* \brief Return PIO Multi Driver Status
 864:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 865:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PIO_GetMultiDriverStatus( // \return PIO Multi Driver Status
 866:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 867:./include/lib_AT91SAM7A3.h **** {
 868:./include/lib_AT91SAM7A3.h ****         return pPio->PIO_MDSR;
 869:./include/lib_AT91SAM7A3.h **** }
 870:./include/lib_AT91SAM7A3.h **** 
 871:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 872:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_IsMultiDriverSet
 873:./include/lib_AT91SAM7A3.h **** //* \brief Test if PIO MultiDriver is Set
 874:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 875:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PIO_IsMultiDriverSet(
 876:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 877:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
 878:./include/lib_AT91SAM7A3.h **** {
 879:./include/lib_AT91SAM7A3.h ****         return (AT91F_PIO_GetMultiDriverStatus(pPio) & flag);
 880:./include/lib_AT91SAM7A3.h **** }
 881:./include/lib_AT91SAM7A3.h **** 
 882:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 883:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_A_RegisterSelection
 884:./include/lib_AT91SAM7A3.h **** //* \brief PIO A Register Selection 
 885:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 886:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_A_RegisterSelection(
 887:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 888:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio A register selection
 889:./include/lib_AT91SAM7A3.h **** {
 890:./include/lib_AT91SAM7A3.h ****         pPio->PIO_ASR = flag;
 891:./include/lib_AT91SAM7A3.h **** }
 892:./include/lib_AT91SAM7A3.h **** 
 893:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 894:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_B_RegisterSelection
 895:./include/lib_AT91SAM7A3.h **** //* \brief PIO B Register Selection 
 896:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 897:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_B_RegisterSelection(
 898:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 899:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio B register selection 
 900:./include/lib_AT91SAM7A3.h **** {
 901:./include/lib_AT91SAM7A3.h ****         pPio->PIO_BSR = flag;
 902:./include/lib_AT91SAM7A3.h **** }
 903:./include/lib_AT91SAM7A3.h **** 
 904:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 905:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_Get_AB_RegisterStatus
 906:./include/lib_AT91SAM7A3.h **** //* \brief Return PIO Interrupt Status
 907:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 908:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PIO_Get_AB_RegisterStatus( // \return PIO AB Register Status
 909:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 910:./include/lib_AT91SAM7A3.h **** {
 911:./include/lib_AT91SAM7A3.h ****         return pPio->PIO_ABSR;
 912:./include/lib_AT91SAM7A3.h **** }
 913:./include/lib_AT91SAM7A3.h **** 
 914:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 915:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_IsAB_RegisterSet
 916:./include/lib_AT91SAM7A3.h **** //* \brief Test if PIO AB Register is Set
 917:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 918:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PIO_IsAB_RegisterSet(
 919:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 920:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
 921:./include/lib_AT91SAM7A3.h **** {
 922:./include/lib_AT91SAM7A3.h ****         return (AT91F_PIO_Get_AB_RegisterStatus(pPio) & flag);
 923:./include/lib_AT91SAM7A3.h **** }
 924:./include/lib_AT91SAM7A3.h **** 
 925:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 926:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_OutputWriteEnable
 927:./include/lib_AT91SAM7A3.h **** //* \brief Output Write Enable PIO
 928:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 929:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_OutputWriteEnable(
 930:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 931:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio output write to be enabled
 932:./include/lib_AT91SAM7A3.h **** {
 933:./include/lib_AT91SAM7A3.h ****         pPio->PIO_OWER = flag;
 934:./include/lib_AT91SAM7A3.h **** }
 935:./include/lib_AT91SAM7A3.h **** 
 936:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 937:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_OutputWriteDisable
 938:./include/lib_AT91SAM7A3.h **** //* \brief Output Write Disable PIO
 939:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 940:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PIO_OutputWriteDisable(
 941:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 942:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  pio output write to be disabled
 943:./include/lib_AT91SAM7A3.h **** {
 944:./include/lib_AT91SAM7A3.h ****         pPio->PIO_OWDR = flag;
 945:./include/lib_AT91SAM7A3.h **** }
 946:./include/lib_AT91SAM7A3.h **** 
 947:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 948:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_GetOutputWriteStatus
 949:./include/lib_AT91SAM7A3.h **** //* \brief Return PIO Output Write Status
 950:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 951:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PIO_GetOutputWriteStatus( // \return PIO Output Write Status
 952:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 953:./include/lib_AT91SAM7A3.h **** {
 954:./include/lib_AT91SAM7A3.h ****         return pPio->PIO_OWSR;
 955:./include/lib_AT91SAM7A3.h **** }
 956:./include/lib_AT91SAM7A3.h **** 
 957:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 958:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_IsOutputWriteSet
 959:./include/lib_AT91SAM7A3.h **** //* \brief Test if PIO OutputWrite is Set
 960:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 961:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PIO_IsOutputWriteSet(
 962:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 963:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
 964:./include/lib_AT91SAM7A3.h **** {
 965:./include/lib_AT91SAM7A3.h ****         return (AT91F_PIO_GetOutputWriteStatus(pPio) & flag);
 966:./include/lib_AT91SAM7A3.h **** }
 967:./include/lib_AT91SAM7A3.h **** 
 968:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 969:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_GetCfgPullup
 970:./include/lib_AT91SAM7A3.h **** //* \brief Return PIO Configuration Pullup
 971:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 972:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PIO_GetCfgPullup( // \return PIO Configuration Pullup 
 973:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio) // \arg  pointer to a PIO controller
 974:./include/lib_AT91SAM7A3.h **** {
 975:./include/lib_AT91SAM7A3.h ****         return pPio->PIO_PPUSR;
 976:./include/lib_AT91SAM7A3.h **** }
 977:./include/lib_AT91SAM7A3.h **** 
 978:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 979:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_IsOutputDataStatusSet
 980:./include/lib_AT91SAM7A3.h **** //* \brief Test if PIO Output Data Status is Set 
 981:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 982:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PIO_IsOutputDataStatusSet(
 983:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 984:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
 985:./include/lib_AT91SAM7A3.h **** {
 986:./include/lib_AT91SAM7A3.h ****         return (AT91F_PIO_GetOutputDataStatus(pPio) & flag);
 987:./include/lib_AT91SAM7A3.h **** }
 988:./include/lib_AT91SAM7A3.h **** 
 989:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 990:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PIO_IsCfgPullupStatusSet
 991:./include/lib_AT91SAM7A3.h **** //* \brief Test if PIO Configuration Pullup Status is Set
 992:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
 993:./include/lib_AT91SAM7A3.h **** __inline int AT91F_PIO_IsCfgPullupStatusSet(
 994:./include/lib_AT91SAM7A3.h ****         AT91PS_PIO pPio,   // \arg  pointer to a PIO controller
 995:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
 996:./include/lib_AT91SAM7A3.h **** {
 997:./include/lib_AT91SAM7A3.h ****         return (~AT91F_PIO_GetCfgPullup(pPio) & flag);
 998:./include/lib_AT91SAM7A3.h **** }
 999:./include/lib_AT91SAM7A3.h **** 
1000:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
1001:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR PMC
1002:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
1003:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1004:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_CfgSysClkEnableReg
1005:./include/lib_AT91SAM7A3.h **** //* \brief Configure the System Clock Enable Register of the PMC controller
1006:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1007:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PMC_CfgSysClkEnableReg (
1008:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1009:./include/lib_AT91SAM7A3.h **** 	unsigned int mode)
1010:./include/lib_AT91SAM7A3.h **** {
1011:./include/lib_AT91SAM7A3.h **** 	//* Write to the SCER register
1012:./include/lib_AT91SAM7A3.h **** 	pPMC->PMC_SCER = mode;
1013:./include/lib_AT91SAM7A3.h **** }
1014:./include/lib_AT91SAM7A3.h **** 
1015:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1016:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_CfgSysClkDisableReg
1017:./include/lib_AT91SAM7A3.h **** //* \brief Configure the System Clock Disable Register of the PMC controller
1018:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1019:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PMC_CfgSysClkDisableReg (
1020:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1021:./include/lib_AT91SAM7A3.h **** 	unsigned int mode)
1022:./include/lib_AT91SAM7A3.h **** {
1023:./include/lib_AT91SAM7A3.h **** 	//* Write to the SCDR register
1024:./include/lib_AT91SAM7A3.h **** 	pPMC->PMC_SCDR = mode;
1025:./include/lib_AT91SAM7A3.h **** }
1026:./include/lib_AT91SAM7A3.h **** 
1027:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1028:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_GetSysClkStatusReg
1029:./include/lib_AT91SAM7A3.h **** //* \brief Return the System Clock Status Register of the PMC controller
1030:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1031:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PMC_GetSysClkStatusReg (
1032:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC // pointer to a CAN controller
1033:./include/lib_AT91SAM7A3.h **** 	)
1034:./include/lib_AT91SAM7A3.h **** {
1035:./include/lib_AT91SAM7A3.h **** 	return pPMC->PMC_SCSR;
1036:./include/lib_AT91SAM7A3.h **** }
1037:./include/lib_AT91SAM7A3.h **** 
1038:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1039:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_EnablePeriphClock
1040:./include/lib_AT91SAM7A3.h **** //* \brief Enable peripheral clock
1041:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1042:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PMC_EnablePeriphClock (
1043:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1044:./include/lib_AT91SAM7A3.h **** 	unsigned int periphIds)  // \arg IDs of peripherals
1045:./include/lib_AT91SAM7A3.h **** {
1046:./include/lib_AT91SAM7A3.h **** 	pPMC->PMC_PCER = periphIds;
  33              		.loc 2 1046 0
  34 0000 8022     		mov	r2, #128
  35 0002 5201     		lsl	r2, r2, #5
  36 0004 0C4B     		ldr	r3, .L2
  37 0006 1A61     		str	r2, [r3, #16]
  38              	.LVL1:
  39              	.LBE34:
  40              	.LBE33:
  41              	.LBE32:
  42              	.LBB35:
  43              	.LBB36:
1047:./include/lib_AT91SAM7A3.h **** }
1048:./include/lib_AT91SAM7A3.h **** 
1049:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1050:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_DisablePeriphClock
1051:./include/lib_AT91SAM7A3.h **** //* \brief Disable peripheral clock
1052:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1053:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PMC_DisablePeriphClock (
1054:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1055:./include/lib_AT91SAM7A3.h **** 	unsigned int periphIds)  // \arg IDs of peripherals
1056:./include/lib_AT91SAM7A3.h **** {
1057:./include/lib_AT91SAM7A3.h **** 	pPMC->PMC_PCDR = periphIds;
1058:./include/lib_AT91SAM7A3.h **** }
1059:./include/lib_AT91SAM7A3.h **** 
1060:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1061:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_GetPeriphClock
1062:./include/lib_AT91SAM7A3.h **** //* \brief Get peripheral clock status
1063:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1064:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PMC_GetPeriphClock (
1065:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC) // \arg pointer to PMC controller
1066:./include/lib_AT91SAM7A3.h **** {
1067:./include/lib_AT91SAM7A3.h **** 	return pPMC->PMC_PCSR;
1068:./include/lib_AT91SAM7A3.h **** }
1069:./include/lib_AT91SAM7A3.h **** 
1070:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1071:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CKGR_CfgMainOscillatorReg
1072:./include/lib_AT91SAM7A3.h **** //* \brief Cfg the main oscillator
1073:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1074:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CKGR_CfgMainOscillatorReg (
1075:./include/lib_AT91SAM7A3.h **** 	AT91PS_CKGR pCKGR, // \arg pointer to CKGR controller
1076:./include/lib_AT91SAM7A3.h **** 	unsigned int mode)
1077:./include/lib_AT91SAM7A3.h **** {
1078:./include/lib_AT91SAM7A3.h **** 	pCKGR->CKGR_MOR = mode;
1079:./include/lib_AT91SAM7A3.h **** }
1080:./include/lib_AT91SAM7A3.h **** 
1081:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1082:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CKGR_GetMainOscillatorReg
1083:./include/lib_AT91SAM7A3.h **** //* \brief Cfg the main oscillator
1084:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1085:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CKGR_GetMainOscillatorReg (
1086:./include/lib_AT91SAM7A3.h **** 	AT91PS_CKGR pCKGR) // \arg pointer to CKGR controller
1087:./include/lib_AT91SAM7A3.h **** {
1088:./include/lib_AT91SAM7A3.h **** 	return pCKGR->CKGR_MOR;
1089:./include/lib_AT91SAM7A3.h **** }
1090:./include/lib_AT91SAM7A3.h **** 
1091:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1092:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CKGR_EnableMainOscillator
1093:./include/lib_AT91SAM7A3.h **** //* \brief Enable the main oscillator
1094:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1095:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CKGR_EnableMainOscillator(
1096:./include/lib_AT91SAM7A3.h **** 	AT91PS_CKGR pCKGR) // \arg pointer to CKGR controller
1097:./include/lib_AT91SAM7A3.h **** {
1098:./include/lib_AT91SAM7A3.h **** 	pCKGR->CKGR_MOR |= AT91C_CKGR_MOSCEN;
1099:./include/lib_AT91SAM7A3.h **** }
1100:./include/lib_AT91SAM7A3.h **** 
1101:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1102:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CKGR_DisableMainOscillator
1103:./include/lib_AT91SAM7A3.h **** //* \brief Disable the main oscillator
1104:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1105:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CKGR_DisableMainOscillator (
1106:./include/lib_AT91SAM7A3.h **** 	AT91PS_CKGR pCKGR) // \arg pointer to CKGR controller
1107:./include/lib_AT91SAM7A3.h **** {
1108:./include/lib_AT91SAM7A3.h **** 	pCKGR->CKGR_MOR &= ~AT91C_CKGR_MOSCEN;
1109:./include/lib_AT91SAM7A3.h **** }
1110:./include/lib_AT91SAM7A3.h **** 
1111:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1112:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CKGR_CfgMainOscStartUpTime
1113:./include/lib_AT91SAM7A3.h **** //* \brief Cfg MOR Register according to the main osc startup time
1114:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1115:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CKGR_CfgMainOscStartUpTime (
1116:./include/lib_AT91SAM7A3.h **** 	AT91PS_CKGR pCKGR, // \arg pointer to CKGR controller
1117:./include/lib_AT91SAM7A3.h **** 	unsigned int startup_time,  // \arg main osc startup time in microsecond (us)
1118:./include/lib_AT91SAM7A3.h **** 	unsigned int slowClock)  // \arg slowClock in Hz
1119:./include/lib_AT91SAM7A3.h **** {
1120:./include/lib_AT91SAM7A3.h **** 	pCKGR->CKGR_MOR &= ~AT91C_CKGR_OSCOUNT;
1121:./include/lib_AT91SAM7A3.h **** 	pCKGR->CKGR_MOR |= ((slowClock * startup_time)/(8*1000000)) << 8;
1122:./include/lib_AT91SAM7A3.h **** }
1123:./include/lib_AT91SAM7A3.h **** 
1124:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1125:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CKGR_GetMainClockFreqReg
1126:./include/lib_AT91SAM7A3.h **** //* \brief Cfg the main oscillator
1127:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1128:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CKGR_GetMainClockFreqReg (
1129:./include/lib_AT91SAM7A3.h **** 	AT91PS_CKGR pCKGR) // \arg pointer to CKGR controller
1130:./include/lib_AT91SAM7A3.h **** {
1131:./include/lib_AT91SAM7A3.h **** 	return pCKGR->CKGR_MCFR;
1132:./include/lib_AT91SAM7A3.h **** }
1133:./include/lib_AT91SAM7A3.h **** 
1134:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1135:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CKGR_GetMainClock
1136:./include/lib_AT91SAM7A3.h **** //* \brief Return Main clock in Hz
1137:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1138:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CKGR_GetMainClock (
1139:./include/lib_AT91SAM7A3.h **** 	AT91PS_CKGR pCKGR, // \arg pointer to CKGR controller
1140:./include/lib_AT91SAM7A3.h **** 	unsigned int slowClock)  // \arg slowClock in Hz
1141:./include/lib_AT91SAM7A3.h **** {
1142:./include/lib_AT91SAM7A3.h **** 	return ((pCKGR->CKGR_MCFR  & AT91C_CKGR_MAINF) * slowClock) >> 4;
1143:./include/lib_AT91SAM7A3.h **** }
1144:./include/lib_AT91SAM7A3.h **** 
1145:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1146:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_CfgMCKReg
1147:./include/lib_AT91SAM7A3.h **** //* \brief Cfg Master Clock Register
1148:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1149:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PMC_CfgMCKReg (
1150:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1151:./include/lib_AT91SAM7A3.h **** 	unsigned int mode)
1152:./include/lib_AT91SAM7A3.h **** {
1153:./include/lib_AT91SAM7A3.h **** 	pPMC->PMC_MCKR = mode;
1154:./include/lib_AT91SAM7A3.h **** }
1155:./include/lib_AT91SAM7A3.h **** 
1156:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1157:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_GetMCKReg
1158:./include/lib_AT91SAM7A3.h **** //* \brief Return Master Clock Register
1159:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1160:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PMC_GetMCKReg(
1161:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC) // \arg pointer to PMC controller
1162:./include/lib_AT91SAM7A3.h **** {
1163:./include/lib_AT91SAM7A3.h **** 	return pPMC->PMC_MCKR;
1164:./include/lib_AT91SAM7A3.h **** }
1165:./include/lib_AT91SAM7A3.h **** 
1166:./include/lib_AT91SAM7A3.h **** //*------------------------------------------------------------------------------
1167:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_GetMasterClock
1168:./include/lib_AT91SAM7A3.h **** //* \brief Return master clock in Hz which correponds to processor clock for ARM7
1169:./include/lib_AT91SAM7A3.h **** //*------------------------------------------------------------------------------
1170:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PMC_GetMasterClock (
1171:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1172:./include/lib_AT91SAM7A3.h **** 	AT91PS_CKGR pCKGR, // \arg pointer to CKGR controller
1173:./include/lib_AT91SAM7A3.h **** 	unsigned int slowClock)  // \arg slowClock in Hz
1174:./include/lib_AT91SAM7A3.h **** {
1175:./include/lib_AT91SAM7A3.h **** 	unsigned int reg = pPMC->PMC_MCKR;
1176:./include/lib_AT91SAM7A3.h **** 	unsigned int prescaler = (1 << ((reg & AT91C_PMC_PRES) >> 2));
1177:./include/lib_AT91SAM7A3.h **** 	unsigned int pllDivider, pllMultiplier;
1178:./include/lib_AT91SAM7A3.h **** 
1179:./include/lib_AT91SAM7A3.h **** 	switch (reg & AT91C_PMC_CSS) {
1180:./include/lib_AT91SAM7A3.h **** 		case AT91C_PMC_CSS_SLOW_CLK: // Slow clock selected
1181:./include/lib_AT91SAM7A3.h **** 			return slowClock / prescaler;
1182:./include/lib_AT91SAM7A3.h **** 		case AT91C_PMC_CSS_MAIN_CLK: // Main clock is selected
1183:./include/lib_AT91SAM7A3.h **** 			return AT91F_CKGR_GetMainClock(pCKGR, slowClock) / prescaler;
1184:./include/lib_AT91SAM7A3.h **** 		case AT91C_PMC_CSS_PLL_CLK: // PLLB clock is selected
1185:./include/lib_AT91SAM7A3.h **** 			reg = pCKGR->CKGR_PLLR;
1186:./include/lib_AT91SAM7A3.h **** 			pllDivider    = (reg  & AT91C_CKGR_DIV);
1187:./include/lib_AT91SAM7A3.h **** 			pllMultiplier = ((reg  & AT91C_CKGR_MUL) >> 16) + 1;
1188:./include/lib_AT91SAM7A3.h **** 			return AT91F_CKGR_GetMainClock(pCKGR, slowClock) / pllDivider * pllMultiplier / prescaler;
1189:./include/lib_AT91SAM7A3.h **** 	}
1190:./include/lib_AT91SAM7A3.h **** 	return 0;
1191:./include/lib_AT91SAM7A3.h **** }
1192:./include/lib_AT91SAM7A3.h **** 
1193:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1194:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_EnablePCK
1195:./include/lib_AT91SAM7A3.h **** //* \brief Enable Programmable Clock x Output
1196:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1197:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PMC_EnablePCK (
1198:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1199:./include/lib_AT91SAM7A3.h **** 	unsigned int pck,  // \arg Programmable Clock x Output
1200:./include/lib_AT91SAM7A3.h **** 	unsigned int mode)
1201:./include/lib_AT91SAM7A3.h **** {
1202:./include/lib_AT91SAM7A3.h **** 	pPMC->PMC_PCKR[pck] = mode;
1203:./include/lib_AT91SAM7A3.h **** 	pPMC->PMC_SCER = (1 << pck) << 8;
1204:./include/lib_AT91SAM7A3.h **** }
1205:./include/lib_AT91SAM7A3.h **** 
1206:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1207:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_DisablePCK
1208:./include/lib_AT91SAM7A3.h **** //* \brief Disable Programmable Clock x Output
1209:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1210:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PMC_DisablePCK (
1211:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC, // \arg pointer to PMC controller
1212:./include/lib_AT91SAM7A3.h **** 	unsigned int pck)  // \arg Programmable Clock x Output
1213:./include/lib_AT91SAM7A3.h **** {
1214:./include/lib_AT91SAM7A3.h **** 	pPMC->PMC_SCDR = (1 << pck) << 8;
1215:./include/lib_AT91SAM7A3.h **** }
1216:./include/lib_AT91SAM7A3.h **** 
1217:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1218:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_EnableIt
1219:./include/lib_AT91SAM7A3.h **** //* \brief Enable PMC interrupt
1220:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1221:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PMC_EnableIt (
1222:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC,     // pointer to a PMC controller
1223:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // IT to be enabled
1224:./include/lib_AT91SAM7A3.h **** {
1225:./include/lib_AT91SAM7A3.h **** 	//* Write to the IER register
1226:./include/lib_AT91SAM7A3.h **** 	pPMC->PMC_IER = flag;
1227:./include/lib_AT91SAM7A3.h **** }
1228:./include/lib_AT91SAM7A3.h **** 
1229:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1230:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_DisableIt
1231:./include/lib_AT91SAM7A3.h **** //* \brief Disable PMC interrupt
1232:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1233:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PMC_DisableIt (
1234:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC, // pointer to a PMC controller
1235:./include/lib_AT91SAM7A3.h **** 	unsigned int flag) // IT to be disabled
1236:./include/lib_AT91SAM7A3.h **** {
1237:./include/lib_AT91SAM7A3.h **** 	//* Write to the IDR register
1238:./include/lib_AT91SAM7A3.h **** 	pPMC->PMC_IDR = flag;
1239:./include/lib_AT91SAM7A3.h **** }
1240:./include/lib_AT91SAM7A3.h **** 
1241:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1242:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_GetStatus
1243:./include/lib_AT91SAM7A3.h **** //* \brief Return PMC Interrupt Status
1244:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1245:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PMC_GetStatus( // \return PMC Interrupt Status
1246:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC) // pointer to a PMC controller
1247:./include/lib_AT91SAM7A3.h **** {
1248:./include/lib_AT91SAM7A3.h **** 	return pPMC->PMC_SR;
1249:./include/lib_AT91SAM7A3.h **** }
1250:./include/lib_AT91SAM7A3.h **** 
1251:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1252:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_GetInterruptMaskStatus
1253:./include/lib_AT91SAM7A3.h **** //* \brief Return PMC Interrupt Mask Status
1254:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1255:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PMC_GetInterruptMaskStatus( // \return PMC Interrupt Mask Status
1256:./include/lib_AT91SAM7A3.h **** 	AT91PS_PMC pPMC) // pointer to a PMC controller
1257:./include/lib_AT91SAM7A3.h **** {
1258:./include/lib_AT91SAM7A3.h **** 	return pPMC->PMC_IMR;
1259:./include/lib_AT91SAM7A3.h **** }
1260:./include/lib_AT91SAM7A3.h **** 
1261:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1262:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_IsInterruptMasked
1263:./include/lib_AT91SAM7A3.h **** //* \brief Test if PMC Interrupt is Masked
1264:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1265:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PMC_IsInterruptMasked(
1266:./include/lib_AT91SAM7A3.h ****         AT91PS_PMC pPMC,   // \arg  pointer to a PMC controller
1267:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
1268:./include/lib_AT91SAM7A3.h **** {
1269:./include/lib_AT91SAM7A3.h **** 	return (AT91F_PMC_GetInterruptMaskStatus(pPMC) & flag);
1270:./include/lib_AT91SAM7A3.h **** }
1271:./include/lib_AT91SAM7A3.h **** 
1272:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1273:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PMC_IsStatusSet
1274:./include/lib_AT91SAM7A3.h **** //* \brief Test if PMC Status is Set
1275:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1276:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PMC_IsStatusSet(
1277:./include/lib_AT91SAM7A3.h ****         AT91PS_PMC pPMC,   // \arg  pointer to a PMC controller
1278:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
1279:./include/lib_AT91SAM7A3.h **** {
1280:./include/lib_AT91SAM7A3.h **** 	return (AT91F_PMC_GetStatus(pPMC) & flag);
1281:./include/lib_AT91SAM7A3.h **** }
1282:./include/lib_AT91SAM7A3.h **** 
1283:./include/lib_AT91SAM7A3.h **** // ----------------------------------------------------------------------------
1284:./include/lib_AT91SAM7A3.h **** //  \fn    AT91F_CKGR_CfgPLLReg
1285:./include/lib_AT91SAM7A3.h **** //  \brief Cfg the PLL Register
1286:./include/lib_AT91SAM7A3.h **** // ----------------------------------------------------------------------------
1287:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CKGR_CfgPLLReg (
1288:./include/lib_AT91SAM7A3.h **** 	AT91PS_CKGR pCKGR, // \arg pointer to CKGR controller
1289:./include/lib_AT91SAM7A3.h **** 	unsigned int mode)
1290:./include/lib_AT91SAM7A3.h **** {
1291:./include/lib_AT91SAM7A3.h **** 	pCKGR->CKGR_PLLR = mode;
1292:./include/lib_AT91SAM7A3.h **** }
1293:./include/lib_AT91SAM7A3.h **** 
1294:./include/lib_AT91SAM7A3.h **** // ----------------------------------------------------------------------------
1295:./include/lib_AT91SAM7A3.h **** //  \fn    AT91F_CKGR_GetPLLReg
1296:./include/lib_AT91SAM7A3.h **** //  \brief Get the PLL Register
1297:./include/lib_AT91SAM7A3.h **** // ----------------------------------------------------------------------------
1298:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CKGR_GetPLLReg (
1299:./include/lib_AT91SAM7A3.h **** 	AT91PS_CKGR pCKGR) // \arg pointer to CKGR controller
1300:./include/lib_AT91SAM7A3.h **** {
1301:./include/lib_AT91SAM7A3.h **** 	return pCKGR->CKGR_PLLR;
1302:./include/lib_AT91SAM7A3.h **** }
1303:./include/lib_AT91SAM7A3.h **** 
1304:./include/lib_AT91SAM7A3.h **** 
1305:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
1306:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR RSTC
1307:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
1308:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1309:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_RSTSoftReset
1310:./include/lib_AT91SAM7A3.h **** //* \brief Start Software Reset
1311:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1312:./include/lib_AT91SAM7A3.h **** __inline void AT91F_RSTSoftReset(
1313:./include/lib_AT91SAM7A3.h ****         AT91PS_RSTC pRSTC,
1314:./include/lib_AT91SAM7A3.h ****         unsigned int reset)
1315:./include/lib_AT91SAM7A3.h **** {
1316:./include/lib_AT91SAM7A3.h **** 	pRSTC->RSTC_RCR = (0xA5000000 | reset);
1317:./include/lib_AT91SAM7A3.h **** }
1318:./include/lib_AT91SAM7A3.h **** 
1319:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1320:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_RSTSetMode
1321:./include/lib_AT91SAM7A3.h **** //* \brief Set Reset Mode
1322:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1323:./include/lib_AT91SAM7A3.h **** __inline void AT91F_RSTSetMode(
1324:./include/lib_AT91SAM7A3.h ****         AT91PS_RSTC pRSTC,
1325:./include/lib_AT91SAM7A3.h ****         unsigned int mode)
1326:./include/lib_AT91SAM7A3.h **** {
1327:./include/lib_AT91SAM7A3.h **** 	pRSTC->RSTC_RMR = (0xA5000000 | mode);
1328:./include/lib_AT91SAM7A3.h **** }
1329:./include/lib_AT91SAM7A3.h **** 
1330:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1331:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_RSTGetMode
1332:./include/lib_AT91SAM7A3.h **** //* \brief Get Reset Mode
1333:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1334:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_RSTGetMode(
1335:./include/lib_AT91SAM7A3.h ****         AT91PS_RSTC pRSTC)
1336:./include/lib_AT91SAM7A3.h **** {
1337:./include/lib_AT91SAM7A3.h **** 	return (pRSTC->RSTC_RMR);
1338:./include/lib_AT91SAM7A3.h **** }
1339:./include/lib_AT91SAM7A3.h **** 
1340:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1341:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_RSTGetStatus
1342:./include/lib_AT91SAM7A3.h **** //* \brief Get Reset Status
1343:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1344:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_RSTGetStatus(
1345:./include/lib_AT91SAM7A3.h ****         AT91PS_RSTC pRSTC)
1346:./include/lib_AT91SAM7A3.h **** {
1347:./include/lib_AT91SAM7A3.h **** 	return (pRSTC->RSTC_RSR);
1348:./include/lib_AT91SAM7A3.h **** }
1349:./include/lib_AT91SAM7A3.h **** 
1350:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1351:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_RSTIsSoftRstActive
1352:./include/lib_AT91SAM7A3.h **** //* \brief Return !=0 if software reset is still not completed
1353:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1354:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_RSTIsSoftRstActive(
1355:./include/lib_AT91SAM7A3.h ****         AT91PS_RSTC pRSTC)
1356:./include/lib_AT91SAM7A3.h **** {
1357:./include/lib_AT91SAM7A3.h **** 	return ((pRSTC->RSTC_RSR) & AT91C_RSTC_SRCMP);
1358:./include/lib_AT91SAM7A3.h **** }
1359:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
1360:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR SHDWC
1361:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
1362:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1363:./include/lib_AT91SAM7A3.h **** //* Function Name       : AT91F_SHDWNSetMode()
1364:./include/lib_AT91SAM7A3.h **** //* Object              : Set the Shutdown mode register
1365:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1366:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_SHDWNSetMode(
1367:./include/lib_AT91SAM7A3.h ****         AT91PS_SHDWC pSHDWC,
1368:./include/lib_AT91SAM7A3.h ****         unsigned int mode)
1369:./include/lib_AT91SAM7A3.h **** {
1370:./include/lib_AT91SAM7A3.h **** 	pSHDWC->SHDWC_SHMR = mode;
1371:./include/lib_AT91SAM7A3.h **** 	return(pSHDWC->SHDWC_SHMR);
1372:./include/lib_AT91SAM7A3.h **** }
1373:./include/lib_AT91SAM7A3.h **** 
1374:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1375:./include/lib_AT91SAM7A3.h **** //* Function Name       : AT91F_SHDWNGetMode()
1376:./include/lib_AT91SAM7A3.h **** //* Object              : Get the Shutdown mode register
1377:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1378:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_SHDWNGetMode(
1379:./include/lib_AT91SAM7A3.h ****         AT91PS_SHDWC pSHDWC)
1380:./include/lib_AT91SAM7A3.h **** {
1381:./include/lib_AT91SAM7A3.h **** 	return(pSHDWC->SHDWC_SHMR);
1382:./include/lib_AT91SAM7A3.h **** }
1383:./include/lib_AT91SAM7A3.h **** 
1384:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1385:./include/lib_AT91SAM7A3.h **** //* Function Name       : AT91F_SHDWNEnable()
1386:./include/lib_AT91SAM7A3.h **** //* Object              : Enable Shutdown
1387:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1388:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SHDWNEnable(
1389:./include/lib_AT91SAM7A3.h ****         AT91PS_SHDWC pSHDWC)
1390:./include/lib_AT91SAM7A3.h **** {
1391:./include/lib_AT91SAM7A3.h **** 	pSHDWC->SHDWC_SHCR = 0xA5000001;
1392:./include/lib_AT91SAM7A3.h **** }
1393:./include/lib_AT91SAM7A3.h **** 
1394:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1395:./include/lib_AT91SAM7A3.h **** //* Function Name       : AT91F_SHDWNGetStatus()
1396:./include/lib_AT91SAM7A3.h **** //* Object              : Get Shutdown Status
1397:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1398:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_SHDWNGetStatus(
1399:./include/lib_AT91SAM7A3.h ****         AT91PS_SHDWC pSHDWC)
1400:./include/lib_AT91SAM7A3.h **** {
1401:./include/lib_AT91SAM7A3.h **** 	return(pSHDWC->SHDWC_SHSR);
1402:./include/lib_AT91SAM7A3.h **** }
1403:./include/lib_AT91SAM7A3.h **** 
1404:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
1405:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR RTTC
1406:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
1407:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1408:./include/lib_AT91SAM7A3.h **** //* \fn     AT91F_SetRTT_TimeBase()
1409:./include/lib_AT91SAM7A3.h **** //* \brief  Set the RTT prescaler according to the TimeBase in ms
1410:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1411:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_RTTSetTimeBase(
1412:./include/lib_AT91SAM7A3.h ****         AT91PS_RTTC pRTTC, 
1413:./include/lib_AT91SAM7A3.h ****         unsigned int ms)
1414:./include/lib_AT91SAM7A3.h **** {
1415:./include/lib_AT91SAM7A3.h **** 	if (ms > 2000)
1416:./include/lib_AT91SAM7A3.h **** 		return 1;   // AT91C_TIME_OUT_OF_RANGE
1417:./include/lib_AT91SAM7A3.h **** 	pRTTC->RTTC_RTMR &= ~0xFFFF;	
1418:./include/lib_AT91SAM7A3.h **** 	pRTTC->RTTC_RTMR |= (((ms << 15) /1000) & 0xFFFF);	
1419:./include/lib_AT91SAM7A3.h **** 	return 0;
1420:./include/lib_AT91SAM7A3.h **** }
1421:./include/lib_AT91SAM7A3.h **** 
1422:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1423:./include/lib_AT91SAM7A3.h **** //* \fn     AT91F_RTTSetPrescaler()
1424:./include/lib_AT91SAM7A3.h **** //* \brief  Set the new prescaler value
1425:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1426:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_RTTSetPrescaler(
1427:./include/lib_AT91SAM7A3.h ****         AT91PS_RTTC pRTTC, 
1428:./include/lib_AT91SAM7A3.h ****         unsigned int rtpres)
1429:./include/lib_AT91SAM7A3.h **** {
1430:./include/lib_AT91SAM7A3.h **** 	pRTTC->RTTC_RTMR &= ~0xFFFF;	
1431:./include/lib_AT91SAM7A3.h **** 	pRTTC->RTTC_RTMR |= (rtpres & 0xFFFF);	
1432:./include/lib_AT91SAM7A3.h **** 	return (pRTTC->RTTC_RTMR);
1433:./include/lib_AT91SAM7A3.h **** }
1434:./include/lib_AT91SAM7A3.h **** 
1435:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1436:./include/lib_AT91SAM7A3.h **** //* \fn     AT91F_RTTRestart()
1437:./include/lib_AT91SAM7A3.h **** //* \brief  Restart the RTT prescaler
1438:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1439:./include/lib_AT91SAM7A3.h **** __inline void AT91F_RTTRestart(
1440:./include/lib_AT91SAM7A3.h ****         AT91PS_RTTC pRTTC)
1441:./include/lib_AT91SAM7A3.h **** {
1442:./include/lib_AT91SAM7A3.h **** 	pRTTC->RTTC_RTMR |= AT91C_RTTC_RTTRST;	
1443:./include/lib_AT91SAM7A3.h **** }
1444:./include/lib_AT91SAM7A3.h **** 
1445:./include/lib_AT91SAM7A3.h **** 
1446:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1447:./include/lib_AT91SAM7A3.h **** //* \fn     AT91F_RTT_SetAlarmINT()
1448:./include/lib_AT91SAM7A3.h **** //* \brief  Enable RTT Alarm Interrupt
1449:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1450:./include/lib_AT91SAM7A3.h **** __inline void AT91F_RTTSetAlarmINT(
1451:./include/lib_AT91SAM7A3.h ****         AT91PS_RTTC pRTTC)
1452:./include/lib_AT91SAM7A3.h **** {
1453:./include/lib_AT91SAM7A3.h **** 	pRTTC->RTTC_RTMR |= AT91C_RTTC_ALMIEN;
1454:./include/lib_AT91SAM7A3.h **** }
1455:./include/lib_AT91SAM7A3.h **** 
1456:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1457:./include/lib_AT91SAM7A3.h **** //* \fn     AT91F_RTT_ClearAlarmINT()
1458:./include/lib_AT91SAM7A3.h **** //* \brief  Disable RTT Alarm Interrupt
1459:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1460:./include/lib_AT91SAM7A3.h **** __inline void AT91F_RTTClearAlarmINT(
1461:./include/lib_AT91SAM7A3.h ****         AT91PS_RTTC pRTTC)
1462:./include/lib_AT91SAM7A3.h **** {
1463:./include/lib_AT91SAM7A3.h **** 	pRTTC->RTTC_RTMR &= ~AT91C_RTTC_ALMIEN;
1464:./include/lib_AT91SAM7A3.h **** }
1465:./include/lib_AT91SAM7A3.h **** 
1466:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1467:./include/lib_AT91SAM7A3.h **** //* \fn     AT91F_RTT_SetRttIncINT()
1468:./include/lib_AT91SAM7A3.h **** //* \brief  Enable RTT INC Interrupt
1469:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1470:./include/lib_AT91SAM7A3.h **** __inline void AT91F_RTTSetRttIncINT(
1471:./include/lib_AT91SAM7A3.h ****         AT91PS_RTTC pRTTC)
1472:./include/lib_AT91SAM7A3.h **** {
1473:./include/lib_AT91SAM7A3.h **** 	pRTTC->RTTC_RTMR |= AT91C_RTTC_RTTINCIEN;
1474:./include/lib_AT91SAM7A3.h **** }
1475:./include/lib_AT91SAM7A3.h **** 
1476:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1477:./include/lib_AT91SAM7A3.h **** //* \fn     AT91F_RTT_ClearRttIncINT()
1478:./include/lib_AT91SAM7A3.h **** //* \brief  Disable RTT INC Interrupt
1479:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1480:./include/lib_AT91SAM7A3.h **** __inline void AT91F_RTTClearRttIncINT(
1481:./include/lib_AT91SAM7A3.h ****         AT91PS_RTTC pRTTC)
1482:./include/lib_AT91SAM7A3.h **** {
1483:./include/lib_AT91SAM7A3.h **** 	pRTTC->RTTC_RTMR &= ~AT91C_RTTC_RTTINCIEN;
1484:./include/lib_AT91SAM7A3.h **** }
1485:./include/lib_AT91SAM7A3.h **** 
1486:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1487:./include/lib_AT91SAM7A3.h **** //* \fn     AT91F_RTT_SetAlarmValue()
1488:./include/lib_AT91SAM7A3.h **** //* \brief  Set RTT Alarm Value
1489:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1490:./include/lib_AT91SAM7A3.h **** __inline void AT91F_RTTSetAlarmValue(
1491:./include/lib_AT91SAM7A3.h ****         AT91PS_RTTC pRTTC, unsigned int alarm)
1492:./include/lib_AT91SAM7A3.h **** {
1493:./include/lib_AT91SAM7A3.h **** 	pRTTC->RTTC_RTAR = alarm;
1494:./include/lib_AT91SAM7A3.h **** }
1495:./include/lib_AT91SAM7A3.h **** 
1496:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1497:./include/lib_AT91SAM7A3.h **** //* \fn     AT91F_RTT_GetAlarmValue()
1498:./include/lib_AT91SAM7A3.h **** //* \brief  Get RTT Alarm Value
1499:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1500:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_RTTGetAlarmValue(
1501:./include/lib_AT91SAM7A3.h ****         AT91PS_RTTC pRTTC)
1502:./include/lib_AT91SAM7A3.h **** {
1503:./include/lib_AT91SAM7A3.h **** 	return(pRTTC->RTTC_RTAR);
1504:./include/lib_AT91SAM7A3.h **** }
1505:./include/lib_AT91SAM7A3.h **** 
1506:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1507:./include/lib_AT91SAM7A3.h **** //* \fn     AT91F_RTTGetStatus()
1508:./include/lib_AT91SAM7A3.h **** //* \brief  Read the RTT status
1509:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1510:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_RTTGetStatus(
1511:./include/lib_AT91SAM7A3.h ****         AT91PS_RTTC pRTTC)
1512:./include/lib_AT91SAM7A3.h **** {
1513:./include/lib_AT91SAM7A3.h **** 	return(pRTTC->RTTC_RTSR);
1514:./include/lib_AT91SAM7A3.h **** }
1515:./include/lib_AT91SAM7A3.h **** 
1516:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1517:./include/lib_AT91SAM7A3.h **** //* \fn     AT91F_RTT_ReadValue()
1518:./include/lib_AT91SAM7A3.h **** //* \brief  Read the RTT value
1519:./include/lib_AT91SAM7A3.h **** //*--------------------------------------------------------------------------------------
1520:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_RTTReadValue(
1521:./include/lib_AT91SAM7A3.h ****         AT91PS_RTTC pRTTC)
1522:./include/lib_AT91SAM7A3.h **** {
1523:./include/lib_AT91SAM7A3.h ****         register volatile unsigned int val1,val2;
1524:./include/lib_AT91SAM7A3.h **** 	do
1525:./include/lib_AT91SAM7A3.h **** 	{
1526:./include/lib_AT91SAM7A3.h **** 		val1 = pRTTC->RTTC_RTVR;
1527:./include/lib_AT91SAM7A3.h **** 		val2 = pRTTC->RTTC_RTVR;
1528:./include/lib_AT91SAM7A3.h **** 	}	
1529:./include/lib_AT91SAM7A3.h **** 	while(val1 != val2);
1530:./include/lib_AT91SAM7A3.h **** 	return(val1);
1531:./include/lib_AT91SAM7A3.h **** }
1532:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
1533:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR PITC
1534:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
1535:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1536:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PITInit
1537:./include/lib_AT91SAM7A3.h **** //* \brief System timer init : period in second, system clock freq in MHz
1538:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1539:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PITInit(
1540:./include/lib_AT91SAM7A3.h ****         AT91PS_PITC pPITC,
1541:./include/lib_AT91SAM7A3.h ****         unsigned int period,
1542:./include/lib_AT91SAM7A3.h ****         unsigned int pit_frequency)
1543:./include/lib_AT91SAM7A3.h **** {
1544:./include/lib_AT91SAM7A3.h **** 	pPITC->PITC_PIMR = period? (period * pit_frequency + 8) >> 4 : 0; // +8 to avoid %10 and /10
1545:./include/lib_AT91SAM7A3.h **** 	pPITC->PITC_PIMR |= AT91C_PITC_PITEN;	 
1546:./include/lib_AT91SAM7A3.h **** }
1547:./include/lib_AT91SAM7A3.h **** 
1548:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1549:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PITSetPIV
1550:./include/lib_AT91SAM7A3.h **** //* \brief Set the PIT Periodic Interval Value 
1551:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1552:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PITSetPIV(
1553:./include/lib_AT91SAM7A3.h ****         AT91PS_PITC pPITC,
1554:./include/lib_AT91SAM7A3.h ****         unsigned int piv)
1555:./include/lib_AT91SAM7A3.h **** {
1556:./include/lib_AT91SAM7A3.h **** 	pPITC->PITC_PIMR = piv | (pPITC->PITC_PIMR & (AT91C_PITC_PITEN | AT91C_PITC_PITIEN));
1557:./include/lib_AT91SAM7A3.h **** }
1558:./include/lib_AT91SAM7A3.h **** 
1559:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1560:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PITEnableInt
1561:./include/lib_AT91SAM7A3.h **** //* \brief Enable PIT periodic interrupt
1562:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1563:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PITEnableInt(
1564:./include/lib_AT91SAM7A3.h ****         AT91PS_PITC pPITC)
1565:./include/lib_AT91SAM7A3.h **** {
1566:./include/lib_AT91SAM7A3.h **** 	pPITC->PITC_PIMR |= AT91C_PITC_PITIEN;	 
1567:./include/lib_AT91SAM7A3.h **** }
1568:./include/lib_AT91SAM7A3.h **** 
1569:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1570:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PITDisableInt
1571:./include/lib_AT91SAM7A3.h **** //* \brief Disable PIT periodic interrupt
1572:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1573:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PITDisableInt(
1574:./include/lib_AT91SAM7A3.h ****         AT91PS_PITC pPITC)
1575:./include/lib_AT91SAM7A3.h **** {
1576:./include/lib_AT91SAM7A3.h **** 	pPITC->PITC_PIMR &= ~AT91C_PITC_PITIEN;	 
1577:./include/lib_AT91SAM7A3.h **** }
1578:./include/lib_AT91SAM7A3.h **** 
1579:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1580:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PITGetMode
1581:./include/lib_AT91SAM7A3.h **** //* \brief Read PIT mode register
1582:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1583:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PITGetMode(
1584:./include/lib_AT91SAM7A3.h ****         AT91PS_PITC pPITC)
1585:./include/lib_AT91SAM7A3.h **** {
1586:./include/lib_AT91SAM7A3.h **** 	return(pPITC->PITC_PIMR);
1587:./include/lib_AT91SAM7A3.h **** }
1588:./include/lib_AT91SAM7A3.h **** 
1589:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1590:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PITGetStatus
1591:./include/lib_AT91SAM7A3.h **** //* \brief Read PIT status register
1592:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1593:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PITGetStatus(
1594:./include/lib_AT91SAM7A3.h ****         AT91PS_PITC pPITC)
1595:./include/lib_AT91SAM7A3.h **** {
1596:./include/lib_AT91SAM7A3.h **** 	return(pPITC->PITC_PISR);
1597:./include/lib_AT91SAM7A3.h **** }
1598:./include/lib_AT91SAM7A3.h **** 
1599:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1600:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PITGetPIIR
1601:./include/lib_AT91SAM7A3.h **** //* \brief Read PIT CPIV and PICNT without ressetting the counters
1602:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1603:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PITGetPIIR(
1604:./include/lib_AT91SAM7A3.h ****         AT91PS_PITC pPITC)
1605:./include/lib_AT91SAM7A3.h **** {
1606:./include/lib_AT91SAM7A3.h **** 	return(pPITC->PITC_PIIR);
1607:./include/lib_AT91SAM7A3.h **** }
1608:./include/lib_AT91SAM7A3.h **** 
1609:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1610:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PITGetPIVR
1611:./include/lib_AT91SAM7A3.h **** //* \brief Read System timer CPIV and PICNT without ressetting the counters
1612:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1613:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PITGetPIVR(
1614:./include/lib_AT91SAM7A3.h ****         AT91PS_PITC pPITC)
1615:./include/lib_AT91SAM7A3.h **** {
1616:./include/lib_AT91SAM7A3.h **** 	return(pPITC->PITC_PIVR);
1617:./include/lib_AT91SAM7A3.h **** }
1618:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
1619:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR WDTC
1620:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
1621:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1622:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_WDTSetMode
1623:./include/lib_AT91SAM7A3.h **** //* \brief Set Watchdog Mode Register
1624:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1625:./include/lib_AT91SAM7A3.h **** __inline void AT91F_WDTSetMode(
1626:./include/lib_AT91SAM7A3.h ****         AT91PS_WDTC pWDTC,
1627:./include/lib_AT91SAM7A3.h ****         unsigned int Mode)
1628:./include/lib_AT91SAM7A3.h **** {
1629:./include/lib_AT91SAM7A3.h **** 	pWDTC->WDTC_WDMR = Mode;
1630:./include/lib_AT91SAM7A3.h **** }
1631:./include/lib_AT91SAM7A3.h **** 
1632:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1633:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_WDTRestart
1634:./include/lib_AT91SAM7A3.h **** //* \brief Restart Watchdog
1635:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1636:./include/lib_AT91SAM7A3.h **** __inline void AT91F_WDTRestart(
1637:./include/lib_AT91SAM7A3.h ****         AT91PS_WDTC pWDTC)
1638:./include/lib_AT91SAM7A3.h **** {
1639:./include/lib_AT91SAM7A3.h **** 	pWDTC->WDTC_WDCR = 0xA5000001;
1640:./include/lib_AT91SAM7A3.h **** }
1641:./include/lib_AT91SAM7A3.h **** 
1642:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1643:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_WDTSGettatus
1644:./include/lib_AT91SAM7A3.h **** //* \brief Get Watchdog Status
1645:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1646:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_WDTSGettatus(
1647:./include/lib_AT91SAM7A3.h ****         AT91PS_WDTC pWDTC)
1648:./include/lib_AT91SAM7A3.h **** {
1649:./include/lib_AT91SAM7A3.h **** 	return(pWDTC->WDTC_WDSR & 0x3);
1650:./include/lib_AT91SAM7A3.h **** }
1651:./include/lib_AT91SAM7A3.h **** 
1652:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1653:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_WDTGetPeriod
1654:./include/lib_AT91SAM7A3.h **** //* \brief Translate ms into Watchdog Compatible value
1655:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1656:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_WDTGetPeriod(unsigned int ms)
1657:./include/lib_AT91SAM7A3.h **** {
1658:./include/lib_AT91SAM7A3.h **** 	if ((ms < 4) || (ms > 16000))
1659:./include/lib_AT91SAM7A3.h **** 		return 0;
1660:./include/lib_AT91SAM7A3.h **** 	return((ms << 8) / 1000);
1661:./include/lib_AT91SAM7A3.h **** }
1662:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
1663:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR MC
1664:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
1665:./include/lib_AT91SAM7A3.h **** 
1666:./include/lib_AT91SAM7A3.h **** #define AT91C_MC_CORRECT_KEY  ((unsigned int) 0x5A << 24) // (MC) Correct Protect Key
1667:./include/lib_AT91SAM7A3.h **** 
1668:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1669:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MC_Remap
1670:./include/lib_AT91SAM7A3.h **** //* \brief Make Remap
1671:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1672:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MC_Remap (void)     //  
1673:./include/lib_AT91SAM7A3.h **** {
1674:./include/lib_AT91SAM7A3.h ****     AT91PS_MC pMC = (AT91PS_MC) AT91C_BASE_MC;
1675:./include/lib_AT91SAM7A3.h ****     
1676:./include/lib_AT91SAM7A3.h ****     pMC->MC_RCR = AT91C_MC_RCB;
1677:./include/lib_AT91SAM7A3.h **** }
1678:./include/lib_AT91SAM7A3.h **** 
1679:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1680:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MC_EFC_CfgModeReg
1681:./include/lib_AT91SAM7A3.h **** //* \brief Configure the EFC Mode Register of the MC controller
1682:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1683:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MC_EFC_CfgModeReg (
1684:./include/lib_AT91SAM7A3.h **** 	AT91PS_MC pMC, // pointer to a MC controller
1685:./include/lib_AT91SAM7A3.h **** 	unsigned int mode)        // mode register 
1686:./include/lib_AT91SAM7A3.h **** {
1687:./include/lib_AT91SAM7A3.h **** 	// Write to the FMR register
1688:./include/lib_AT91SAM7A3.h **** 	pMC->MC_FMR = mode;
1689:./include/lib_AT91SAM7A3.h **** }
1690:./include/lib_AT91SAM7A3.h **** 
1691:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1692:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MC_EFC_GetModeReg
1693:./include/lib_AT91SAM7A3.h **** //* \brief Return MC EFC Mode Regsiter
1694:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1695:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MC_EFC_GetModeReg(
1696:./include/lib_AT91SAM7A3.h **** 	AT91PS_MC pMC) // pointer to a MC controller
1697:./include/lib_AT91SAM7A3.h **** {
1698:./include/lib_AT91SAM7A3.h **** 	return pMC->MC_FMR;
1699:./include/lib_AT91SAM7A3.h **** }
1700:./include/lib_AT91SAM7A3.h **** 
1701:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1702:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MC_EFC_ComputeFMCN
1703:./include/lib_AT91SAM7A3.h **** //* \brief Return MC EFC Mode Regsiter
1704:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1705:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MC_EFC_ComputeFMCN(
1706:./include/lib_AT91SAM7A3.h **** 	int master_clock) // master clock in Hz
1707:./include/lib_AT91SAM7A3.h **** {
1708:./include/lib_AT91SAM7A3.h **** 	return (master_clock/1000000 +2);
1709:./include/lib_AT91SAM7A3.h **** }
1710:./include/lib_AT91SAM7A3.h **** 
1711:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1712:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MC_EFC_PerformCmd
1713:./include/lib_AT91SAM7A3.h **** //* \brief Perform EFC Command
1714:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1715:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MC_EFC_PerformCmd (
1716:./include/lib_AT91SAM7A3.h **** 	AT91PS_MC pMC, // pointer to a MC controller
1717:./include/lib_AT91SAM7A3.h ****     unsigned int transfer_cmd)
1718:./include/lib_AT91SAM7A3.h **** {
1719:./include/lib_AT91SAM7A3.h **** 	pMC->MC_FCR = transfer_cmd;	
1720:./include/lib_AT91SAM7A3.h **** }
1721:./include/lib_AT91SAM7A3.h **** 
1722:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1723:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MC_EFC_GetStatus
1724:./include/lib_AT91SAM7A3.h **** //* \brief Return MC EFC Status
1725:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1726:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MC_EFC_GetStatus(
1727:./include/lib_AT91SAM7A3.h **** 	AT91PS_MC pMC) // pointer to a MC controller
1728:./include/lib_AT91SAM7A3.h **** {
1729:./include/lib_AT91SAM7A3.h **** 	return pMC->MC_FSR;
1730:./include/lib_AT91SAM7A3.h **** }
1731:./include/lib_AT91SAM7A3.h **** 
1732:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1733:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MC_EFC_IsInterruptMasked
1734:./include/lib_AT91SAM7A3.h **** //* \brief Test if EFC MC Interrupt is Masked 
1735:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1736:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MC_EFC_IsInterruptMasked(
1737:./include/lib_AT91SAM7A3.h ****         AT91PS_MC pMC,   // \arg  pointer to a MC controller
1738:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
1739:./include/lib_AT91SAM7A3.h **** {
1740:./include/lib_AT91SAM7A3.h **** 	return (AT91F_MC_EFC_GetModeReg(pMC) & flag);
1741:./include/lib_AT91SAM7A3.h **** }
1742:./include/lib_AT91SAM7A3.h **** 
1743:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1744:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MC_EFC_IsInterruptSet
1745:./include/lib_AT91SAM7A3.h **** //* \brief Test if EFC MC Interrupt is Set
1746:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1747:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MC_EFC_IsInterruptSet(
1748:./include/lib_AT91SAM7A3.h ****         AT91PS_MC pMC,   // \arg  pointer to a MC controller
1749:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
1750:./include/lib_AT91SAM7A3.h **** {
1751:./include/lib_AT91SAM7A3.h **** 	return (AT91F_MC_EFC_GetStatus(pMC) & flag);
1752:./include/lib_AT91SAM7A3.h **** }
1753:./include/lib_AT91SAM7A3.h **** 
1754:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
1755:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR CAN
1756:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
1757:./include/lib_AT91SAM7A3.h **** #define	STANDARD_FORMAT 0
1758:./include/lib_AT91SAM7A3.h **** #define	EXTENDED_FORMAT 1
1759:./include/lib_AT91SAM7A3.h **** 
1760:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1761:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_InitMailboxRegisters()
1762:./include/lib_AT91SAM7A3.h **** //* \brief Configure the corresponding mailbox
1763:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1764:./include/lib_AT91SAM7A3.h **** __inline void AT91F_InitMailboxRegisters(AT91PS_CAN_MB	CAN_Mailbox,
1765:./include/lib_AT91SAM7A3.h **** 								int  			mode_reg,
1766:./include/lib_AT91SAM7A3.h **** 								int 			acceptance_mask_reg,
1767:./include/lib_AT91SAM7A3.h **** 								int  			id_reg,
1768:./include/lib_AT91SAM7A3.h **** 								int  			data_low_reg,
1769:./include/lib_AT91SAM7A3.h **** 								int  			data_high_reg,
1770:./include/lib_AT91SAM7A3.h **** 								int  			control_reg)
1771:./include/lib_AT91SAM7A3.h **** {
1772:./include/lib_AT91SAM7A3.h **** 	CAN_Mailbox->CAN_MB_MCR 	= 0x0;
1773:./include/lib_AT91SAM7A3.h **** 	CAN_Mailbox->CAN_MB_MMR 	= mode_reg;
1774:./include/lib_AT91SAM7A3.h **** 	CAN_Mailbox->CAN_MB_MAM 	= acceptance_mask_reg;
1775:./include/lib_AT91SAM7A3.h **** 	CAN_Mailbox->CAN_MB_MID 	= id_reg;
1776:./include/lib_AT91SAM7A3.h **** 	CAN_Mailbox->CAN_MB_MDL 	= data_low_reg; 		
1777:./include/lib_AT91SAM7A3.h **** 	CAN_Mailbox->CAN_MB_MDH 	= data_high_reg;
1778:./include/lib_AT91SAM7A3.h **** 	CAN_Mailbox->CAN_MB_MCR 	= control_reg;
1779:./include/lib_AT91SAM7A3.h **** }
1780:./include/lib_AT91SAM7A3.h **** 
1781:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1782:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_EnableCAN()
1783:./include/lib_AT91SAM7A3.h **** //* \brief 
1784:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1785:./include/lib_AT91SAM7A3.h **** __inline void AT91F_EnableCAN(
1786:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN)     // pointer to a CAN controller
1787:./include/lib_AT91SAM7A3.h **** {
1788:./include/lib_AT91SAM7A3.h **** 	pCAN->CAN_MR |= AT91C_CAN_CANEN;
1789:./include/lib_AT91SAM7A3.h **** 
1790:./include/lib_AT91SAM7A3.h **** 	// Wait for WAKEUP flag raising <=> 11-recessive-bit were scanned by the transceiver
1791:./include/lib_AT91SAM7A3.h **** 	while( (pCAN->CAN_SR & AT91C_CAN_WAKEUP) != AT91C_CAN_WAKEUP );
1792:./include/lib_AT91SAM7A3.h **** }
1793:./include/lib_AT91SAM7A3.h **** 
1794:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1795:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_DisableCAN()
1796:./include/lib_AT91SAM7A3.h **** //* \brief 
1797:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1798:./include/lib_AT91SAM7A3.h **** __inline void AT91F_DisableCAN(
1799:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN)     // pointer to a CAN controller
1800:./include/lib_AT91SAM7A3.h **** {
1801:./include/lib_AT91SAM7A3.h **** 	pCAN->CAN_MR &= ~AT91C_CAN_CANEN;
1802:./include/lib_AT91SAM7A3.h **** }
1803:./include/lib_AT91SAM7A3.h **** 
1804:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1805:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_EnableIt
1806:./include/lib_AT91SAM7A3.h **** //* \brief Enable CAN interrupt
1807:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1808:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CAN_EnableIt (
1809:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN,     // pointer to a CAN controller
1810:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // IT to be enabled
1811:./include/lib_AT91SAM7A3.h **** {
1812:./include/lib_AT91SAM7A3.h **** 	//* Write to the IER register
1813:./include/lib_AT91SAM7A3.h **** 	pCAN->CAN_IER = flag;
1814:./include/lib_AT91SAM7A3.h **** }
1815:./include/lib_AT91SAM7A3.h **** 
1816:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1817:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_DisableIt
1818:./include/lib_AT91SAM7A3.h **** //* \brief Disable CAN interrupt
1819:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1820:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CAN_DisableIt (
1821:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN, // pointer to a CAN controller
1822:./include/lib_AT91SAM7A3.h **** 	unsigned int flag) // IT to be disabled
1823:./include/lib_AT91SAM7A3.h **** {
1824:./include/lib_AT91SAM7A3.h **** 	//* Write to the IDR register
1825:./include/lib_AT91SAM7A3.h **** 	pCAN->CAN_IDR = flag;
1826:./include/lib_AT91SAM7A3.h **** }
1827:./include/lib_AT91SAM7A3.h **** 
1828:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1829:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetStatus
1830:./include/lib_AT91SAM7A3.h **** //* \brief Return CAN Interrupt Status
1831:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1832:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetStatus( // \return CAN Interrupt Status
1833:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN) // pointer to a CAN controller
1834:./include/lib_AT91SAM7A3.h **** {
1835:./include/lib_AT91SAM7A3.h **** 	return pCAN->CAN_SR;
1836:./include/lib_AT91SAM7A3.h **** }
1837:./include/lib_AT91SAM7A3.h **** 
1838:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1839:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetInterruptMaskStatus
1840:./include/lib_AT91SAM7A3.h **** //* \brief Return CAN Interrupt Mask Status
1841:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1842:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetInterruptMaskStatus( // \return CAN Interrupt Mask Status
1843:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN) // pointer to a CAN controller
1844:./include/lib_AT91SAM7A3.h **** {
1845:./include/lib_AT91SAM7A3.h **** 	return pCAN->CAN_IMR;
1846:./include/lib_AT91SAM7A3.h **** }
1847:./include/lib_AT91SAM7A3.h **** 
1848:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1849:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_IsInterruptMasked
1850:./include/lib_AT91SAM7A3.h **** //* \brief Test if CAN Interrupt is Masked 
1851:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1852:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_IsInterruptMasked(
1853:./include/lib_AT91SAM7A3.h ****         AT91PS_CAN pCAN,   // \arg  pointer to a CAN controller
1854:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
1855:./include/lib_AT91SAM7A3.h **** {
1856:./include/lib_AT91SAM7A3.h **** 	return (AT91F_CAN_GetInterruptMaskStatus(pCAN) & flag);
1857:./include/lib_AT91SAM7A3.h **** }
1858:./include/lib_AT91SAM7A3.h **** 
1859:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1860:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_IsStatusSet
1861:./include/lib_AT91SAM7A3.h **** //* \brief Test if CAN Interrupt is Set
1862:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1863:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_IsStatusSet(
1864:./include/lib_AT91SAM7A3.h ****         AT91PS_CAN pCAN,   // \arg  pointer to a CAN controller
1865:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
1866:./include/lib_AT91SAM7A3.h **** {
1867:./include/lib_AT91SAM7A3.h **** 	return (AT91F_CAN_GetStatus(pCAN) & flag);
1868:./include/lib_AT91SAM7A3.h **** }
1869:./include/lib_AT91SAM7A3.h **** 
1870:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1871:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_CfgModeReg
1872:./include/lib_AT91SAM7A3.h **** //* \brief Configure the Mode Register of the CAN controller
1873:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1874:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CAN_CfgModeReg (
1875:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN, // pointer to a CAN controller
1876:./include/lib_AT91SAM7A3.h **** 	unsigned int mode)        // mode register 
1877:./include/lib_AT91SAM7A3.h **** {
1878:./include/lib_AT91SAM7A3.h **** 	//* Write to the MR register
1879:./include/lib_AT91SAM7A3.h **** 	pCAN->CAN_MR = mode;
1880:./include/lib_AT91SAM7A3.h **** }
1881:./include/lib_AT91SAM7A3.h **** 
1882:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1883:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetModeReg
1884:./include/lib_AT91SAM7A3.h **** //* \brief Return the Mode Register of the CAN controller value
1885:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1886:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetModeReg (
1887:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN // pointer to a CAN controller
1888:./include/lib_AT91SAM7A3.h **** 	)
1889:./include/lib_AT91SAM7A3.h **** {
1890:./include/lib_AT91SAM7A3.h **** 	return pCAN->CAN_MR;	
1891:./include/lib_AT91SAM7A3.h **** }
1892:./include/lib_AT91SAM7A3.h **** 
1893:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1894:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_CfgBaudrateReg
1895:./include/lib_AT91SAM7A3.h **** //* \brief Configure the Baudrate of the CAN controller for the network
1896:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1897:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CAN_CfgBaudrateReg (
1898:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN, // pointer to a CAN controller
1899:./include/lib_AT91SAM7A3.h **** 	unsigned int baudrate_cfg)
1900:./include/lib_AT91SAM7A3.h **** {
1901:./include/lib_AT91SAM7A3.h **** 	//* Write to the BR register
1902:./include/lib_AT91SAM7A3.h **** 	pCAN->CAN_BR = baudrate_cfg;	
1903:./include/lib_AT91SAM7A3.h **** }
1904:./include/lib_AT91SAM7A3.h **** 
1905:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1906:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetBaudrate
1907:./include/lib_AT91SAM7A3.h **** //* \brief Return the Baudrate of the CAN controller for the network value
1908:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1909:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetBaudrate (
1910:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN // pointer to a CAN controller
1911:./include/lib_AT91SAM7A3.h **** 	)
1912:./include/lib_AT91SAM7A3.h **** {
1913:./include/lib_AT91SAM7A3.h **** 	return pCAN->CAN_BR;	
1914:./include/lib_AT91SAM7A3.h **** }
1915:./include/lib_AT91SAM7A3.h **** 
1916:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1917:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetInternalCounter
1918:./include/lib_AT91SAM7A3.h **** //* \brief Return CAN Timer Regsiter Value
1919:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1920:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetInternalCounter (
1921:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN // pointer to a CAN controller
1922:./include/lib_AT91SAM7A3.h **** 	)
1923:./include/lib_AT91SAM7A3.h **** {
1924:./include/lib_AT91SAM7A3.h **** 	return pCAN->CAN_TIM;	
1925:./include/lib_AT91SAM7A3.h **** }
1926:./include/lib_AT91SAM7A3.h **** 
1927:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1928:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetTimestamp
1929:./include/lib_AT91SAM7A3.h **** //* \brief Return CAN Timestamp Register Value
1930:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1931:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetTimestamp (
1932:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN // pointer to a CAN controller
1933:./include/lib_AT91SAM7A3.h **** 	)
1934:./include/lib_AT91SAM7A3.h **** {
1935:./include/lib_AT91SAM7A3.h **** 	return pCAN->CAN_TIMESTP;	
1936:./include/lib_AT91SAM7A3.h **** }
1937:./include/lib_AT91SAM7A3.h **** 
1938:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1939:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetErrorCounter
1940:./include/lib_AT91SAM7A3.h **** //* \brief Return CAN Error Counter Register Value
1941:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1942:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetErrorCounter (
1943:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN // pointer to a CAN controller
1944:./include/lib_AT91SAM7A3.h **** 	)
1945:./include/lib_AT91SAM7A3.h **** {
1946:./include/lib_AT91SAM7A3.h **** 	return pCAN->CAN_ECR;	
1947:./include/lib_AT91SAM7A3.h **** }
1948:./include/lib_AT91SAM7A3.h **** 
1949:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1950:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_InitTransferRequest
1951:./include/lib_AT91SAM7A3.h **** //* \brief Request for a transfer on the corresponding mailboxes
1952:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1953:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CAN_InitTransferRequest (
1954:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN, // pointer to a CAN controller
1955:./include/lib_AT91SAM7A3.h ****     unsigned int transfer_cmd)
1956:./include/lib_AT91SAM7A3.h **** {
1957:./include/lib_AT91SAM7A3.h **** 	pCAN->CAN_TCR = transfer_cmd;	
1958:./include/lib_AT91SAM7A3.h **** }
1959:./include/lib_AT91SAM7A3.h **** 
1960:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1961:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_InitAbortRequest
1962:./include/lib_AT91SAM7A3.h **** //* \brief Abort the corresponding mailboxes
1963:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1964:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CAN_InitAbortRequest (
1965:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN pCAN, // pointer to a CAN controller
1966:./include/lib_AT91SAM7A3.h ****     unsigned int abort_cmd)
1967:./include/lib_AT91SAM7A3.h **** {
1968:./include/lib_AT91SAM7A3.h **** 	pCAN->CAN_ACR = abort_cmd;	
1969:./include/lib_AT91SAM7A3.h **** }
1970:./include/lib_AT91SAM7A3.h **** 
1971:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1972:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_CfgMessageModeReg
1973:./include/lib_AT91SAM7A3.h **** //* \brief Program the Message Mode Register
1974:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1975:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CAN_CfgMessageModeReg (
1976:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox, // pointer to a CAN Mailbox
1977:./include/lib_AT91SAM7A3.h ****     unsigned int mode)
1978:./include/lib_AT91SAM7A3.h **** {
1979:./include/lib_AT91SAM7A3.h **** 	CAN_Mailbox->CAN_MB_MMR = mode;	
1980:./include/lib_AT91SAM7A3.h **** }
1981:./include/lib_AT91SAM7A3.h **** 
1982:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1983:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetMessageModeReg
1984:./include/lib_AT91SAM7A3.h **** //* \brief Return the Message Mode Register
1985:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1986:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetMessageModeReg (
1987:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox) // pointer to a CAN Mailbox
1988:./include/lib_AT91SAM7A3.h **** {
1989:./include/lib_AT91SAM7A3.h **** 	return CAN_Mailbox->CAN_MB_MMR;	
1990:./include/lib_AT91SAM7A3.h **** }
1991:./include/lib_AT91SAM7A3.h **** 
1992:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1993:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_CfgMessageIDReg
1994:./include/lib_AT91SAM7A3.h **** //* \brief Program the Message ID Register
1995:./include/lib_AT91SAM7A3.h **** //* \brief Version == 0 for Standard messsage, Version == 1 for Extended  
1996:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
1997:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CAN_CfgMessageIDReg (
1998:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox, // pointer to a CAN Mailbox
1999:./include/lib_AT91SAM7A3.h ****     unsigned int id,
2000:./include/lib_AT91SAM7A3.h ****     unsigned char version)
2001:./include/lib_AT91SAM7A3.h **** {
2002:./include/lib_AT91SAM7A3.h **** 	if(version==0)	// IDvA Standard Format
2003:./include/lib_AT91SAM7A3.h **** 		CAN_Mailbox->CAN_MB_MID = id<<18;
2004:./include/lib_AT91SAM7A3.h **** 	else	// IDvB Extended Format
2005:./include/lib_AT91SAM7A3.h **** 		CAN_Mailbox->CAN_MB_MID = id | (1<<29);	// set MIDE bit
2006:./include/lib_AT91SAM7A3.h **** }
2007:./include/lib_AT91SAM7A3.h **** 
2008:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2009:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetMessageIDReg
2010:./include/lib_AT91SAM7A3.h **** //* \brief Return the Message ID Register
2011:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2012:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetMessageIDReg (
2013:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox) // pointer to a CAN Mailbox
2014:./include/lib_AT91SAM7A3.h **** {
2015:./include/lib_AT91SAM7A3.h **** 	return CAN_Mailbox->CAN_MB_MID;
2016:./include/lib_AT91SAM7A3.h **** }
2017:./include/lib_AT91SAM7A3.h **** 
2018:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2019:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_CfgMessageAcceptanceMaskReg
2020:./include/lib_AT91SAM7A3.h **** //* \brief Program the Message Acceptance Mask Register
2021:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2022:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CAN_CfgMessageAcceptanceMaskReg (
2023:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox, // pointer to a CAN Mailbox
2024:./include/lib_AT91SAM7A3.h ****     unsigned int mask)
2025:./include/lib_AT91SAM7A3.h **** {
2026:./include/lib_AT91SAM7A3.h **** 	CAN_Mailbox->CAN_MB_MAM = mask;
2027:./include/lib_AT91SAM7A3.h **** }
2028:./include/lib_AT91SAM7A3.h **** 
2029:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2030:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetMessageAcceptanceMaskReg
2031:./include/lib_AT91SAM7A3.h **** //* \brief Return the Message Acceptance Mask Register
2032:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2033:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetMessageAcceptanceMaskReg (
2034:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox) // pointer to a CAN Mailbox
2035:./include/lib_AT91SAM7A3.h **** {
2036:./include/lib_AT91SAM7A3.h **** 	return CAN_Mailbox->CAN_MB_MAM;
2037:./include/lib_AT91SAM7A3.h **** }
2038:./include/lib_AT91SAM7A3.h **** 
2039:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2040:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetFamilyID
2041:./include/lib_AT91SAM7A3.h **** //* \brief Return the Message ID Register
2042:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2043:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetFamilyID (
2044:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox) // pointer to a CAN Mailbox
2045:./include/lib_AT91SAM7A3.h **** {
2046:./include/lib_AT91SAM7A3.h **** 	return CAN_Mailbox->CAN_MB_MFID;	
2047:./include/lib_AT91SAM7A3.h **** }
2048:./include/lib_AT91SAM7A3.h **** 
2049:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2050:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_CfgMessageCtrl
2051:./include/lib_AT91SAM7A3.h **** //* \brief Request and config for a transfer on the corresponding mailbox
2052:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2053:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CAN_CfgMessageCtrlReg (
2054:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox, // pointer to a CAN Mailbox
2055:./include/lib_AT91SAM7A3.h ****     unsigned int message_ctrl_cmd)
2056:./include/lib_AT91SAM7A3.h **** {
2057:./include/lib_AT91SAM7A3.h **** 	CAN_Mailbox->CAN_MB_MCR = message_ctrl_cmd;	
2058:./include/lib_AT91SAM7A3.h **** }
2059:./include/lib_AT91SAM7A3.h **** 
2060:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2061:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetMessageStatus
2062:./include/lib_AT91SAM7A3.h **** //* \brief Return CAN Mailbox Status
2063:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2064:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetMessageStatus (
2065:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox) // pointer to a CAN Mailbox
2066:./include/lib_AT91SAM7A3.h **** {
2067:./include/lib_AT91SAM7A3.h **** 	return CAN_Mailbox->CAN_MB_MSR;	
2068:./include/lib_AT91SAM7A3.h **** }
2069:./include/lib_AT91SAM7A3.h **** 
2070:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2071:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_CfgMessageDataLow
2072:./include/lib_AT91SAM7A3.h **** //* \brief Program data low value
2073:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2074:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CAN_CfgMessageDataLow (
2075:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox, // pointer to a CAN Mailbox
2076:./include/lib_AT91SAM7A3.h ****     unsigned int data)
2077:./include/lib_AT91SAM7A3.h **** {
2078:./include/lib_AT91SAM7A3.h **** 	CAN_Mailbox->CAN_MB_MDL = data;	
2079:./include/lib_AT91SAM7A3.h **** }
2080:./include/lib_AT91SAM7A3.h **** 
2081:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2082:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetMessageDataLow
2083:./include/lib_AT91SAM7A3.h **** //* \brief Return data low value
2084:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2085:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetMessageDataLow (
2086:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox) // pointer to a CAN Mailbox
2087:./include/lib_AT91SAM7A3.h **** {
2088:./include/lib_AT91SAM7A3.h **** 	return CAN_Mailbox->CAN_MB_MDL;	
2089:./include/lib_AT91SAM7A3.h **** }
2090:./include/lib_AT91SAM7A3.h **** 
2091:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2092:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_CfgMessageDataHigh
2093:./include/lib_AT91SAM7A3.h **** //* \brief Program data high value
2094:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2095:./include/lib_AT91SAM7A3.h **** __inline void AT91F_CAN_CfgMessageDataHigh (
2096:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox, // pointer to a CAN Mailbox
2097:./include/lib_AT91SAM7A3.h ****     unsigned int data)
2098:./include/lib_AT91SAM7A3.h **** {
2099:./include/lib_AT91SAM7A3.h **** 	CAN_Mailbox->CAN_MB_MDH = data;	
2100:./include/lib_AT91SAM7A3.h **** }
2101:./include/lib_AT91SAM7A3.h **** 
2102:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2103:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_CAN_GetMessageDataHigh
2104:./include/lib_AT91SAM7A3.h **** //* \brief Return data high value
2105:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2106:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_CAN_GetMessageDataHigh (
2107:./include/lib_AT91SAM7A3.h **** 	AT91PS_CAN_MB	CAN_Mailbox) // pointer to a CAN Mailbox
2108:./include/lib_AT91SAM7A3.h **** {
2109:./include/lib_AT91SAM7A3.h **** 	return CAN_Mailbox->CAN_MB_MDH;	
2110:./include/lib_AT91SAM7A3.h **** }
2111:./include/lib_AT91SAM7A3.h **** 
2112:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
2113:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR TC
2114:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
2115:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2116:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_TC_InterruptEnable
2117:./include/lib_AT91SAM7A3.h **** //* \brief Enable TC Interrupt
2118:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2119:./include/lib_AT91SAM7A3.h **** __inline void AT91F_TC_InterruptEnable(
2120:./include/lib_AT91SAM7A3.h ****         AT91PS_TC pTc,   // \arg  pointer to a TC controller
2121:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  TC interrupt to be enabled
2122:./include/lib_AT91SAM7A3.h **** {
2123:./include/lib_AT91SAM7A3.h ****         pTc->TC_IER = flag;
2124:./include/lib_AT91SAM7A3.h **** }
2125:./include/lib_AT91SAM7A3.h **** 
2126:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2127:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_TC_InterruptDisable
2128:./include/lib_AT91SAM7A3.h **** //* \brief Disable TC Interrupt
2129:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2130:./include/lib_AT91SAM7A3.h **** __inline void AT91F_TC_InterruptDisable(
2131:./include/lib_AT91SAM7A3.h ****         AT91PS_TC pTc,   // \arg  pointer to a TC controller
2132:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  TC interrupt to be disabled
2133:./include/lib_AT91SAM7A3.h **** {
2134:./include/lib_AT91SAM7A3.h ****         pTc->TC_IDR = flag;
2135:./include/lib_AT91SAM7A3.h **** }
2136:./include/lib_AT91SAM7A3.h **** 
2137:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2138:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_TC_GetInterruptMaskStatus
2139:./include/lib_AT91SAM7A3.h **** //* \brief Return TC Interrupt Mask Status
2140:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2141:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_TC_GetInterruptMaskStatus( // \return TC Interrupt Mask Status
2142:./include/lib_AT91SAM7A3.h ****         AT91PS_TC pTc) // \arg  pointer to a TC controller
2143:./include/lib_AT91SAM7A3.h **** {
2144:./include/lib_AT91SAM7A3.h ****         return pTc->TC_IMR;
2145:./include/lib_AT91SAM7A3.h **** }
2146:./include/lib_AT91SAM7A3.h **** 
2147:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2148:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_TC_IsInterruptMasked
2149:./include/lib_AT91SAM7A3.h **** //* \brief Test if TC Interrupt is Masked 
2150:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2151:./include/lib_AT91SAM7A3.h **** __inline int AT91F_TC_IsInterruptMasked(
2152:./include/lib_AT91SAM7A3.h ****         AT91PS_TC pTc,   // \arg  pointer to a TC controller
2153:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
2154:./include/lib_AT91SAM7A3.h **** {
2155:./include/lib_AT91SAM7A3.h ****         return (AT91F_TC_GetInterruptMaskStatus(pTc) & flag);
2156:./include/lib_AT91SAM7A3.h **** }
2157:./include/lib_AT91SAM7A3.h **** 
2158:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
2159:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR MCI
2160:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
2161:./include/lib_AT91SAM7A3.h **** //* Classic MCI Data Timeout Register Configuration with 1048576 MCK cycles between 2 data transfer
2162:./include/lib_AT91SAM7A3.h **** #define AT91C_MCI_DTOR_1MEGA_CYCLES	(AT91C_MCI_DTOCYC | AT91C_MCI_DTOMUL)
2163:./include/lib_AT91SAM7A3.h **** 
2164:./include/lib_AT91SAM7A3.h **** //* Classic MCI SDCard Register Configuration with 1-bit data bus on slot A
2165:./include/lib_AT91SAM7A3.h **** #define AT91C_MCI_MMC_SLOTA	(AT91C_MCI_SCDSEL & 0x0)
2166:./include/lib_AT91SAM7A3.h **** 
2167:./include/lib_AT91SAM7A3.h **** //* Classic MCI SDCard Register Configuration with 1-bit data bus on slot B
2168:./include/lib_AT91SAM7A3.h **** #define AT91C_MCI_MMC_SLOTB	(AT91C_MCI_SCDSEL & 0x1)
2169:./include/lib_AT91SAM7A3.h **** 
2170:./include/lib_AT91SAM7A3.h **** //* Classic MCI SDCard Register Configuration with 4-bit data bus on slot A
2171:./include/lib_AT91SAM7A3.h **** #define AT91C_MCI_SDCARD_4BITS_SLOTA	( (AT91C_MCI_SCDSEL & 0x0) | AT91C_MCI_SCDBUS )
2172:./include/lib_AT91SAM7A3.h **** 
2173:./include/lib_AT91SAM7A3.h **** //* Classic MCI SDCard Register Configuration with 4-bit data bus on slot B
2174:./include/lib_AT91SAM7A3.h **** #define AT91C_MCI_SDCARD_4BITS_SLOTB	( (AT91C_MCI_SCDSEL & 0x1) | AT91C_MCI_SCDBUS )
2175:./include/lib_AT91SAM7A3.h **** 
2176:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2177:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_Configure
2178:./include/lib_AT91SAM7A3.h **** //* \brief Configure the MCI
2179:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2180:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MCI_Configure (
2181:./include/lib_AT91SAM7A3.h ****         AT91PS_MCI pMCI,  			 // \arg pointer to a MCI controller
2182:./include/lib_AT91SAM7A3.h ****         unsigned int DTOR_register,  // \arg Data Timeout Register to be programmed
2183:./include/lib_AT91SAM7A3.h ****         unsigned int MR_register,  	 // \arg Mode Register to be programmed
2184:./include/lib_AT91SAM7A3.h ****         unsigned int SDCR_register)  // \arg SDCard Register to be programmed
2185:./include/lib_AT91SAM7A3.h **** {
2186:./include/lib_AT91SAM7A3.h ****     //* Disable the MCI
2187:./include/lib_AT91SAM7A3.h ****     pMCI->MCI_CR = AT91C_MCI_MCIDIS | AT91C_MCI_PWSDIS;
2188:./include/lib_AT91SAM7A3.h **** 
2189:./include/lib_AT91SAM7A3.h ****     //* Disable all the interrupts
2190:./include/lib_AT91SAM7A3.h ****     pMCI->MCI_IDR = 0xFFFFFFFF;
2191:./include/lib_AT91SAM7A3.h **** 
2192:./include/lib_AT91SAM7A3.h ****     //* Set the Data Timeout Register
2193:./include/lib_AT91SAM7A3.h ****     pMCI->MCI_DTOR = DTOR_register;
2194:./include/lib_AT91SAM7A3.h **** 
2195:./include/lib_AT91SAM7A3.h ****     //* Set the Mode Register
2196:./include/lib_AT91SAM7A3.h ****     pMCI->MCI_MR = MR_register;
2197:./include/lib_AT91SAM7A3.h **** 
2198:./include/lib_AT91SAM7A3.h ****     //* Set the SDCard Register
2199:./include/lib_AT91SAM7A3.h ****     pMCI->MCI_SDCR = SDCR_register;
2200:./include/lib_AT91SAM7A3.h **** 
2201:./include/lib_AT91SAM7A3.h ****    //* Enable the MCI
2202:./include/lib_AT91SAM7A3.h ****     pMCI->MCI_CR = AT91C_MCI_MCIEN | AT91C_MCI_PWSEN;
2203:./include/lib_AT91SAM7A3.h **** }
2204:./include/lib_AT91SAM7A3.h **** 
2205:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2206:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_EnableIt
2207:./include/lib_AT91SAM7A3.h **** //* \brief Enable MCI IT
2208:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2209:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MCI_EnableIt (
2210:./include/lib_AT91SAM7A3.h ****         AT91PS_MCI pMCI, // \arg pointer to a MCI controller
2211:./include/lib_AT91SAM7A3.h ****         unsigned int flag)   // \arg IT to be enabled
2212:./include/lib_AT91SAM7A3.h **** {
2213:./include/lib_AT91SAM7A3.h ****     //* Write to the IER register
2214:./include/lib_AT91SAM7A3.h ****     pMCI->MCI_IER = flag;
2215:./include/lib_AT91SAM7A3.h **** }
2216:./include/lib_AT91SAM7A3.h **** 
2217:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2218:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_DisableIt
2219:./include/lib_AT91SAM7A3.h **** //* \brief Disable MCI IT
2220:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2221:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MCI_DisableIt (
2222:./include/lib_AT91SAM7A3.h ****         AT91PS_MCI pMCI, // \arg pointer to a MCI controller
2223:./include/lib_AT91SAM7A3.h ****         unsigned int flag)   // \arg IT to be disabled
2224:./include/lib_AT91SAM7A3.h **** {
2225:./include/lib_AT91SAM7A3.h ****     //* Write to the IDR register
2226:./include/lib_AT91SAM7A3.h ****     pMCI->MCI_IDR = flag;
2227:./include/lib_AT91SAM7A3.h **** }
2228:./include/lib_AT91SAM7A3.h **** 
2229:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2230:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_GetStatus
2231:./include/lib_AT91SAM7A3.h **** //* \brief Return MCI Interrupt Status
2232:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2233:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MCI_GetStatus( // \return MCI Interrupt Status
2234:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI) // pointer to a MCI controller
2235:./include/lib_AT91SAM7A3.h **** {
2236:./include/lib_AT91SAM7A3.h **** 	return pMCI->MCI_SR;
2237:./include/lib_AT91SAM7A3.h **** }
2238:./include/lib_AT91SAM7A3.h **** 
2239:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2240:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_GetInterruptMaskStatus
2241:./include/lib_AT91SAM7A3.h **** //* \brief Return MCI Interrupt Mask Status
2242:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2243:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MCI_GetInterruptMaskStatus( // \return MCI Interrupt Mask Status
2244:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI) // pointer to a MCI controller
2245:./include/lib_AT91SAM7A3.h **** {
2246:./include/lib_AT91SAM7A3.h **** 	return pMCI->MCI_IMR;
2247:./include/lib_AT91SAM7A3.h **** }
2248:./include/lib_AT91SAM7A3.h **** 
2249:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2250:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_IsInterruptMasked
2251:./include/lib_AT91SAM7A3.h **** //* \brief Test if MCI Interrupt is Masked 
2252:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2253:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MCI_IsInterruptMasked(
2254:./include/lib_AT91SAM7A3.h ****         AT91PS_MCI pMCI,   // \arg  pointer to a MCI controller
2255:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
2256:./include/lib_AT91SAM7A3.h **** {
2257:./include/lib_AT91SAM7A3.h **** 	return (AT91F_MCI_GetInterruptMaskStatus(pMCI) & flag);
2258:./include/lib_AT91SAM7A3.h **** }
2259:./include/lib_AT91SAM7A3.h **** 
2260:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2261:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_IsStatusSet
2262:./include/lib_AT91SAM7A3.h **** //* \brief Test if MCI Status is Set
2263:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2264:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MCI_IsStatusSet(
2265:./include/lib_AT91SAM7A3.h ****         AT91PS_MCI pMCI,   // \arg  pointer to a MCI controller
2266:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
2267:./include/lib_AT91SAM7A3.h **** {
2268:./include/lib_AT91SAM7A3.h **** 	return (AT91F_MCI_GetStatus(pMCI) & flag);
2269:./include/lib_AT91SAM7A3.h **** }
2270:./include/lib_AT91SAM7A3.h **** 
2271:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2272:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_Enable
2273:./include/lib_AT91SAM7A3.h **** //* \brief Enable the MCI Interface
2274:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2275:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MCI_Enable (
2276:./include/lib_AT91SAM7A3.h ****         AT91PS_MCI pMCI)     // \arg pointer to a MCI controller
2277:./include/lib_AT91SAM7A3.h **** {
2278:./include/lib_AT91SAM7A3.h ****     //* Enable the MCI
2279:./include/lib_AT91SAM7A3.h ****     pMCI->MCI_CR = AT91C_MCI_MCIEN;
2280:./include/lib_AT91SAM7A3.h **** }
2281:./include/lib_AT91SAM7A3.h **** 
2282:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2283:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_Disable
2284:./include/lib_AT91SAM7A3.h **** //* \brief Disable the MCI Interface
2285:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2286:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MCI_Disable (
2287:./include/lib_AT91SAM7A3.h ****         AT91PS_MCI pMCI)     // \arg pointer to a MCI controller
2288:./include/lib_AT91SAM7A3.h **** {
2289:./include/lib_AT91SAM7A3.h ****     //* Disable the MCI
2290:./include/lib_AT91SAM7A3.h ****     pMCI->MCI_CR = AT91C_MCI_MCIDIS;
2291:./include/lib_AT91SAM7A3.h **** }
2292:./include/lib_AT91SAM7A3.h **** 
2293:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2294:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_SW_Reset
2295:./include/lib_AT91SAM7A3.h **** //* \brief Reset the MCI Interface
2296:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2297:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MCI_SW_Reset (
2298:./include/lib_AT91SAM7A3.h ****         AT91PS_MCI pMCI)     // \arg pointer to a MCI controller
2299:./include/lib_AT91SAM7A3.h **** {
2300:./include/lib_AT91SAM7A3.h ****     //* Disable the MCI
2301:./include/lib_AT91SAM7A3.h ****     pMCI->MCI_CR = AT91C_MCI_SWRST;
2302:./include/lib_AT91SAM7A3.h **** }
2303:./include/lib_AT91SAM7A3.h **** 
2304:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2305:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_CfgModeReg
2306:./include/lib_AT91SAM7A3.h **** //* \brief Configure the Mode Register of the MCI controller
2307:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2308:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MCI_CfgModeReg (
2309:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI, // pointer to a MCI controller
2310:./include/lib_AT91SAM7A3.h **** 	unsigned int mode)        // mode register 
2311:./include/lib_AT91SAM7A3.h **** {
2312:./include/lib_AT91SAM7A3.h **** 	//* Write to the MR register
2313:./include/lib_AT91SAM7A3.h **** 	pMCI->MCI_MR = mode;
2314:./include/lib_AT91SAM7A3.h **** }
2315:./include/lib_AT91SAM7A3.h **** 
2316:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2317:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_GetModeReg
2318:./include/lib_AT91SAM7A3.h **** //* \brief Return the Mode Register of the MCI controller value
2319:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2320:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MCI_GetModeReg (
2321:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI // pointer to a MCI controller
2322:./include/lib_AT91SAM7A3.h **** 	)
2323:./include/lib_AT91SAM7A3.h **** {
2324:./include/lib_AT91SAM7A3.h **** 	return pMCI->MCI_MR;	
2325:./include/lib_AT91SAM7A3.h **** }
2326:./include/lib_AT91SAM7A3.h **** 
2327:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2328:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_CfgFrequency
2329:./include/lib_AT91SAM7A3.h **** //* \brief Configure the frequency MCCK of the MCI controller
2330:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2331:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MCI_CfgFrequency (
2332:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI, // pointer to a MCI controller
2333:./include/lib_AT91SAM7A3.h **** 	unsigned int mck_clock, // in MHz 
2334:./include/lib_AT91SAM7A3.h **** 	unsigned int mci_clock)	// in MHz  
2335:./include/lib_AT91SAM7A3.h **** {
2336:./include/lib_AT91SAM7A3.h **** 	unsigned int prescal;
2337:./include/lib_AT91SAM7A3.h **** 	
2338:./include/lib_AT91SAM7A3.h **** 	prescal = mck_clock/(2*mci_clock) - 1;
2339:./include/lib_AT91SAM7A3.h **** 	
2340:./include/lib_AT91SAM7A3.h **** 	//* Write to the MR register
2341:./include/lib_AT91SAM7A3.h **** 	pMCI->MCI_MR &= ~AT91C_MCI_CLKDIV;
2342:./include/lib_AT91SAM7A3.h **** 	pMCI->MCI_MR |= (prescal & AT91C_MCI_CLKDIV);
2343:./include/lib_AT91SAM7A3.h **** }
2344:./include/lib_AT91SAM7A3.h **** 
2345:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2346:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_CfgDataTimeOutReg
2347:./include/lib_AT91SAM7A3.h **** //* \brief Configure the Data TimeOut Register of the MCI controller
2348:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2349:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MCI_CfgDataTimeOutReg (
2350:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI, // pointer to a MCI controller
2351:./include/lib_AT91SAM7A3.h **** 	unsigned int cfg)
2352:./include/lib_AT91SAM7A3.h **** {
2353:./include/lib_AT91SAM7A3.h **** 	//* Write to the DTOR register
2354:./include/lib_AT91SAM7A3.h **** 	pMCI->MCI_DTOR = cfg;
2355:./include/lib_AT91SAM7A3.h **** }
2356:./include/lib_AT91SAM7A3.h **** 
2357:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2358:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_GetDataTimeOutReg
2359:./include/lib_AT91SAM7A3.h **** //* \brief Return the Data TimeOut Register of the MCI controller value
2360:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2361:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MCI_GetDataTimeOutReg (
2362:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI // pointer to a MCI controller
2363:./include/lib_AT91SAM7A3.h **** 	)
2364:./include/lib_AT91SAM7A3.h **** {
2365:./include/lib_AT91SAM7A3.h **** 	return pMCI->MCI_DTOR;	
2366:./include/lib_AT91SAM7A3.h **** }
2367:./include/lib_AT91SAM7A3.h **** 
2368:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2369:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_CfgSDCardReg
2370:./include/lib_AT91SAM7A3.h **** //* \brief Configure the SDCard Register of the MCI controller
2371:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2372:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MCI_CfgSDCardReg (
2373:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI, // pointer to a MCI controller
2374:./include/lib_AT91SAM7A3.h **** 	unsigned int cfg)
2375:./include/lib_AT91SAM7A3.h **** {
2376:./include/lib_AT91SAM7A3.h **** 	//* Write to the SDCR register
2377:./include/lib_AT91SAM7A3.h **** 	pMCI->MCI_SDCR = cfg;
2378:./include/lib_AT91SAM7A3.h **** }
2379:./include/lib_AT91SAM7A3.h **** 
2380:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2381:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_GetSDCardReg
2382:./include/lib_AT91SAM7A3.h **** //* \brief Return the SDCard Register of the MCI controller value
2383:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2384:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MCI_GetSDCardReg (
2385:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI // pointer to a MCI controller
2386:./include/lib_AT91SAM7A3.h **** 	)
2387:./include/lib_AT91SAM7A3.h **** {
2388:./include/lib_AT91SAM7A3.h **** 	return pMCI->MCI_SDCR;	
2389:./include/lib_AT91SAM7A3.h **** }
2390:./include/lib_AT91SAM7A3.h **** 
2391:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2392:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_CfgARGReg
2393:./include/lib_AT91SAM7A3.h **** //* \brief Configure the Command ARGUMENT Register of the MCI controller
2394:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2395:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MCI_CfgARGReg (
2396:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI, // pointer to a MCI controller
2397:./include/lib_AT91SAM7A3.h **** 	unsigned int arg)
2398:./include/lib_AT91SAM7A3.h **** {
2399:./include/lib_AT91SAM7A3.h **** 	//* Write to the ARG register
2400:./include/lib_AT91SAM7A3.h **** 	pMCI->MCI_ARGR = arg;
2401:./include/lib_AT91SAM7A3.h **** }
2402:./include/lib_AT91SAM7A3.h **** 
2403:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2404:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_GetARGReg
2405:./include/lib_AT91SAM7A3.h **** //* \brief Return the Command ARGUMENT Register of the MCI controller value
2406:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2407:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MCI_GetARGReg (
2408:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI // pointer to a MCI controller
2409:./include/lib_AT91SAM7A3.h **** 	)
2410:./include/lib_AT91SAM7A3.h **** {
2411:./include/lib_AT91SAM7A3.h **** 	return pMCI->MCI_ARGR;	
2412:./include/lib_AT91SAM7A3.h **** }
2413:./include/lib_AT91SAM7A3.h **** 
2414:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2415:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_CfgCMDReg
2416:./include/lib_AT91SAM7A3.h **** //* \brief Configure the COMMAND Register of the MCI controller
2417:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2418:./include/lib_AT91SAM7A3.h **** __inline void AT91F_MCI_CfgCMDReg (
2419:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI, // pointer to a MCI controller
2420:./include/lib_AT91SAM7A3.h **** 	unsigned int cmd)
2421:./include/lib_AT91SAM7A3.h **** {
2422:./include/lib_AT91SAM7A3.h **** 	//* Write to the ARG register
2423:./include/lib_AT91SAM7A3.h **** 	pMCI->MCI_CMDR = cmd;
2424:./include/lib_AT91SAM7A3.h **** }
2425:./include/lib_AT91SAM7A3.h **** 
2426:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2427:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_GetRSP0Reg
2428:./include/lib_AT91SAM7A3.h **** //* \brief Return the RESPONSE Register 0 of the MCI controller value
2429:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2430:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MCI_GetRSP0Reg (
2431:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI // pointer to a MCI controller
2432:./include/lib_AT91SAM7A3.h **** 	)
2433:./include/lib_AT91SAM7A3.h **** {
2434:./include/lib_AT91SAM7A3.h **** 	return pMCI->MCI_RSPR[0];	
2435:./include/lib_AT91SAM7A3.h **** }
2436:./include/lib_AT91SAM7A3.h **** 
2437:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2438:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_GetRSP1Reg
2439:./include/lib_AT91SAM7A3.h **** //* \brief Return the RESPONSE Register 1 of the MCI controller value
2440:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2441:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MCI_GetRSP1Reg (
2442:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI // pointer to a MCI controller
2443:./include/lib_AT91SAM7A3.h **** 	)
2444:./include/lib_AT91SAM7A3.h **** {
2445:./include/lib_AT91SAM7A3.h **** 	return pMCI->MCI_RSPR[0];	
2446:./include/lib_AT91SAM7A3.h **** }
2447:./include/lib_AT91SAM7A3.h **** 
2448:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2449:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_GetRSP2Reg
2450:./include/lib_AT91SAM7A3.h **** //* \brief Return the RESPONSE Register 2 of the MCI controller value
2451:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2452:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MCI_GetRSP2Reg (
2453:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI // pointer to a MCI controller
2454:./include/lib_AT91SAM7A3.h **** 	)
2455:./include/lib_AT91SAM7A3.h **** {
2456:./include/lib_AT91SAM7A3.h **** 	return pMCI->MCI_RSPR[0];	
2457:./include/lib_AT91SAM7A3.h **** }
2458:./include/lib_AT91SAM7A3.h **** 
2459:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2460:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_MCI_GetRSP3Reg
2461:./include/lib_AT91SAM7A3.h **** //* \brief Return the RESPONSE Register 3 of the MCI controller value
2462:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2463:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_MCI_GetRSP3Reg (
2464:./include/lib_AT91SAM7A3.h **** 	AT91PS_MCI pMCI // pointer to a MCI controller
2465:./include/lib_AT91SAM7A3.h **** 	)
2466:./include/lib_AT91SAM7A3.h **** {
2467:./include/lib_AT91SAM7A3.h **** 	return pMCI->MCI_RSPR[0];	
2468:./include/lib_AT91SAM7A3.h **** }
2469:./include/lib_AT91SAM7A3.h **** 
2470:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
2471:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR UDP
2472:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
2473:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2474:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_EnableIt
2475:./include/lib_AT91SAM7A3.h **** //* \brief Enable UDP IT
2476:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2477:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_EnableIt (
2478:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,     // \arg pointer to a UDP controller
2479:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // \arg IT to be enabled
2480:./include/lib_AT91SAM7A3.h **** {
2481:./include/lib_AT91SAM7A3.h **** 	//* Write to the IER register
2482:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_IER = flag;
2483:./include/lib_AT91SAM7A3.h **** }
2484:./include/lib_AT91SAM7A3.h **** 
2485:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2486:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_DisableIt
2487:./include/lib_AT91SAM7A3.h **** //* \brief Disable UDP IT
2488:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2489:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_DisableIt (
2490:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,     // \arg pointer to a UDP controller
2491:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // \arg IT to be disabled
2492:./include/lib_AT91SAM7A3.h **** {
2493:./include/lib_AT91SAM7A3.h **** 	//* Write to the IDR register
2494:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_IDR = flag;
2495:./include/lib_AT91SAM7A3.h **** }
2496:./include/lib_AT91SAM7A3.h **** 
2497:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2498:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_SetAddress
2499:./include/lib_AT91SAM7A3.h **** //* \brief Set UDP functional address
2500:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2501:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_SetAddress (
2502:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,     // \arg pointer to a UDP controller
2503:./include/lib_AT91SAM7A3.h **** 	unsigned char address)   // \arg new UDP address
2504:./include/lib_AT91SAM7A3.h **** {
2505:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_FADDR = (AT91C_UDP_FEN | address);
2506:./include/lib_AT91SAM7A3.h **** }
2507:./include/lib_AT91SAM7A3.h **** 
2508:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2509:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_EnableEp
2510:./include/lib_AT91SAM7A3.h **** //* \brief Enable Endpoint
2511:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2512:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_EnableEp (
2513:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,     // \arg pointer to a UDP controller
2514:./include/lib_AT91SAM7A3.h **** 	unsigned char endpoint)   // \arg endpoint number
2515:./include/lib_AT91SAM7A3.h **** {
2516:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_CSR[endpoint] |= AT91C_UDP_EPEDS;
2517:./include/lib_AT91SAM7A3.h **** }
2518:./include/lib_AT91SAM7A3.h **** 
2519:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2520:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_DisableEp
2521:./include/lib_AT91SAM7A3.h **** //* \brief Enable Endpoint
2522:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2523:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_DisableEp (
2524:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,     // \arg pointer to a UDP controller
2525:./include/lib_AT91SAM7A3.h **** 	unsigned char endpoint)   // \arg endpoint number
2526:./include/lib_AT91SAM7A3.h **** {
2527:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_CSR[endpoint] &= ~AT91C_UDP_EPEDS;
2528:./include/lib_AT91SAM7A3.h **** }
2529:./include/lib_AT91SAM7A3.h **** 
2530:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2531:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_SetState
2532:./include/lib_AT91SAM7A3.h **** //* \brief Set UDP Device state
2533:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2534:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_SetState (
2535:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,     // \arg pointer to a UDP controller
2536:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // \arg new UDP address
2537:./include/lib_AT91SAM7A3.h **** {
2538:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_GLBSTATE  &= ~(AT91C_UDP_FADDEN | AT91C_UDP_CONFG);
2539:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_GLBSTATE  |= flag;
2540:./include/lib_AT91SAM7A3.h **** }
2541:./include/lib_AT91SAM7A3.h **** 
2542:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2543:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_GetState
2544:./include/lib_AT91SAM7A3.h **** //* \brief return UDP Device state
2545:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2546:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_UDP_GetState ( // \return the UDP device state
2547:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP)     // \arg pointer to a UDP controller
2548:./include/lib_AT91SAM7A3.h **** {
2549:./include/lib_AT91SAM7A3.h **** 	return (pUDP->UDP_GLBSTATE  & (AT91C_UDP_FADDEN | AT91C_UDP_CONFG));
2550:./include/lib_AT91SAM7A3.h **** }
2551:./include/lib_AT91SAM7A3.h **** 
2552:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2553:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_ResetEp
2554:./include/lib_AT91SAM7A3.h **** //* \brief Reset UDP endpoint
2555:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2556:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_ResetEp ( // \return the UDP device state
2557:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,     // \arg pointer to a UDP controller
2558:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // \arg Endpoints to be reset
2559:./include/lib_AT91SAM7A3.h **** {
2560:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_RSTEP = flag;
2561:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_RSTEP = 0;
2562:./include/lib_AT91SAM7A3.h **** }
2563:./include/lib_AT91SAM7A3.h **** 
2564:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2565:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_EpStall
2566:./include/lib_AT91SAM7A3.h **** //* \brief Endpoint will STALL requests
2567:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2568:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_EpStall(
2569:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,     // \arg pointer to a UDP controller
2570:./include/lib_AT91SAM7A3.h **** 	unsigned char endpoint)   // \arg endpoint number
2571:./include/lib_AT91SAM7A3.h **** {
2572:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_CSR[endpoint] |= AT91C_UDP_FORCESTALL;
2573:./include/lib_AT91SAM7A3.h **** }
2574:./include/lib_AT91SAM7A3.h **** 
2575:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2576:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_EpWrite
2577:./include/lib_AT91SAM7A3.h **** //* \brief Write value in the DPR
2578:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2579:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_EpWrite(
2580:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,         // \arg pointer to a UDP controller
2581:./include/lib_AT91SAM7A3.h **** 	unsigned char endpoint,  // \arg endpoint number
2582:./include/lib_AT91SAM7A3.h **** 	unsigned char value)     // \arg value to be written in the DPR
2583:./include/lib_AT91SAM7A3.h **** {
2584:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_FDR[endpoint] = value;
2585:./include/lib_AT91SAM7A3.h **** }
2586:./include/lib_AT91SAM7A3.h **** 
2587:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2588:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_EpRead
2589:./include/lib_AT91SAM7A3.h **** //* \brief Return value from the DPR
2590:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2591:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_UDP_EpRead(
2592:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,         // \arg pointer to a UDP controller
2593:./include/lib_AT91SAM7A3.h **** 	unsigned char endpoint)  // \arg endpoint number
2594:./include/lib_AT91SAM7A3.h **** {
2595:./include/lib_AT91SAM7A3.h **** 	return pUDP->UDP_FDR[endpoint];
2596:./include/lib_AT91SAM7A3.h **** }
2597:./include/lib_AT91SAM7A3.h **** 
2598:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2599:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_EpEndOfWr
2600:./include/lib_AT91SAM7A3.h **** //* \brief Notify the UDP that values in DPR are ready to be sent
2601:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2602:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_EpEndOfWr(
2603:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,         // \arg pointer to a UDP controller
2604:./include/lib_AT91SAM7A3.h **** 	unsigned char endpoint)  // \arg endpoint number
2605:./include/lib_AT91SAM7A3.h **** {
2606:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_CSR[endpoint] |= AT91C_UDP_TXPKTRDY;
2607:./include/lib_AT91SAM7A3.h **** }
2608:./include/lib_AT91SAM7A3.h **** 
2609:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2610:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_EpClear
2611:./include/lib_AT91SAM7A3.h **** //* \brief Clear flag in the endpoint CSR register
2612:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2613:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_EpClear(
2614:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,         // \arg pointer to a UDP controller
2615:./include/lib_AT91SAM7A3.h **** 	unsigned char endpoint,  // \arg endpoint number
2616:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)       // \arg flag to be cleared
2617:./include/lib_AT91SAM7A3.h **** {
2618:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_CSR[endpoint] &= ~(flag);
2619:./include/lib_AT91SAM7A3.h **** }
2620:./include/lib_AT91SAM7A3.h **** 
2621:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2622:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_EpSet
2623:./include/lib_AT91SAM7A3.h **** //* \brief Set flag in the endpoint CSR register
2624:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2625:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_EpSet(
2626:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,         // \arg pointer to a UDP controller
2627:./include/lib_AT91SAM7A3.h **** 	unsigned char endpoint,  // \arg endpoint number
2628:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)       // \arg flag to be cleared
2629:./include/lib_AT91SAM7A3.h **** {
2630:./include/lib_AT91SAM7A3.h **** 	pUDP->UDP_CSR[endpoint] |= flag;
2631:./include/lib_AT91SAM7A3.h **** }
2632:./include/lib_AT91SAM7A3.h **** 
2633:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2634:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_EpStatus
2635:./include/lib_AT91SAM7A3.h **** //* \brief Return the endpoint CSR register
2636:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2637:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_UDP_EpStatus(
2638:./include/lib_AT91SAM7A3.h **** 	AT91PS_UDP pUDP,         // \arg pointer to a UDP controller
2639:./include/lib_AT91SAM7A3.h **** 	unsigned char endpoint)  // \arg endpoint number
2640:./include/lib_AT91SAM7A3.h **** {
2641:./include/lib_AT91SAM7A3.h **** 	return pUDP->UDP_CSR[endpoint];
2642:./include/lib_AT91SAM7A3.h **** }
2643:./include/lib_AT91SAM7A3.h **** 
2644:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2645:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_GetInterruptMaskStatus
2646:./include/lib_AT91SAM7A3.h **** //* \brief Return UDP Interrupt Mask Status
2647:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2648:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_UDP_GetInterruptMaskStatus(
2649:./include/lib_AT91SAM7A3.h ****   AT91PS_UDP pUdp)        // \arg  pointer to a UDP controller
2650:./include/lib_AT91SAM7A3.h **** {
2651:./include/lib_AT91SAM7A3.h ****   return pUdp->UDP_IMR;
2652:./include/lib_AT91SAM7A3.h **** }
2653:./include/lib_AT91SAM7A3.h **** 
2654:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2655:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_UDP_IsInterruptMasked
2656:./include/lib_AT91SAM7A3.h **** //* \brief Test if UDP Interrupt is Masked 
2657:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2658:./include/lib_AT91SAM7A3.h **** __inline int AT91F_UDP_IsInterruptMasked(
2659:./include/lib_AT91SAM7A3.h ****   AT91PS_UDP pUdp,       // \arg  pointer to a UDP controller
2660:./include/lib_AT91SAM7A3.h ****   unsigned int flag)     // \arg  flag to be tested
2661:./include/lib_AT91SAM7A3.h **** {
2662:./include/lib_AT91SAM7A3.h ****   return (AT91F_UDP_GetInterruptMaskStatus(pUdp) & flag);
2663:./include/lib_AT91SAM7A3.h **** }
2664:./include/lib_AT91SAM7A3.h **** 
2665:./include/lib_AT91SAM7A3.h **** // ----------------------------------------------------------------------------
2666:./include/lib_AT91SAM7A3.h **** //  \fn    AT91F_UDP_InterruptStatusRegister
2667:./include/lib_AT91SAM7A3.h **** //  \brief Return the Interrupt Status Register
2668:./include/lib_AT91SAM7A3.h **** // ----------------------------------------------------------------------------
2669:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_UDP_InterruptStatusRegister( 
2670:./include/lib_AT91SAM7A3.h ****   AT91PS_UDP pUDP )      // \arg  pointer to a UDP controller
2671:./include/lib_AT91SAM7A3.h **** {
2672:./include/lib_AT91SAM7A3.h ****   return pUDP->UDP_ISR;
2673:./include/lib_AT91SAM7A3.h **** }
2674:./include/lib_AT91SAM7A3.h **** 
2675:./include/lib_AT91SAM7A3.h **** // ----------------------------------------------------------------------------
2676:./include/lib_AT91SAM7A3.h **** //  \fn    AT91F_UDP_InterruptClearRegister
2677:./include/lib_AT91SAM7A3.h **** //  \brief Clear Interrupt Register
2678:./include/lib_AT91SAM7A3.h **** // ----------------------------------------------------------------------------
2679:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_InterruptClearRegister (
2680:./include/lib_AT91SAM7A3.h ****   AT91PS_UDP pUDP,       // \arg pointer to UDP controller
2681:./include/lib_AT91SAM7A3.h ****   unsigned int flag)     // \arg IT to be cleat
2682:./include/lib_AT91SAM7A3.h **** {
2683:./include/lib_AT91SAM7A3.h ****   pUDP->UDP_ICR = flag; 
2684:./include/lib_AT91SAM7A3.h **** }
2685:./include/lib_AT91SAM7A3.h **** 
2686:./include/lib_AT91SAM7A3.h **** // ----------------------------------------------------------------------------
2687:./include/lib_AT91SAM7A3.h **** //  \fn    AT91F_UDP_EnableTransceiver
2688:./include/lib_AT91SAM7A3.h **** //  \brief Enable transceiver
2689:./include/lib_AT91SAM7A3.h **** // ----------------------------------------------------------------------------
2690:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_EnableTransceiver( 
2691:./include/lib_AT91SAM7A3.h ****   AT91PS_UDP pUDP )      // \arg  pointer to a UDP controller
2692:./include/lib_AT91SAM7A3.h **** {
2693:./include/lib_AT91SAM7A3.h ****     pUDP->UDP_TXVC &= ~AT91C_UDP_TXVDIS; 
2694:./include/lib_AT91SAM7A3.h **** }
2695:./include/lib_AT91SAM7A3.h **** 
2696:./include/lib_AT91SAM7A3.h **** // ----------------------------------------------------------------------------
2697:./include/lib_AT91SAM7A3.h **** //  \fn    AT91F_UDP_DisableTransceiver
2698:./include/lib_AT91SAM7A3.h **** //  \brief Disable transceiver
2699:./include/lib_AT91SAM7A3.h **** // ----------------------------------------------------------------------------
2700:./include/lib_AT91SAM7A3.h **** __inline void AT91F_UDP_DisableTransceiver( 
2701:./include/lib_AT91SAM7A3.h ****   AT91PS_UDP pUDP )      // \arg  pointer to a UDP controller
2702:./include/lib_AT91SAM7A3.h **** {
2703:./include/lib_AT91SAM7A3.h ****     pUDP->UDP_TXVC = AT91C_UDP_TXVDIS; 
2704:./include/lib_AT91SAM7A3.h **** }
2705:./include/lib_AT91SAM7A3.h **** 
2706:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
2707:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR TWI
2708:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
2709:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2710:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_TWI_EnableIt
2711:./include/lib_AT91SAM7A3.h **** //* \brief Enable TWI IT
2712:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2713:./include/lib_AT91SAM7A3.h **** __inline void AT91F_TWI_EnableIt (
2714:./include/lib_AT91SAM7A3.h **** 	AT91PS_TWI pTWI, // \arg pointer to a TWI controller
2715:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // \arg IT to be enabled
2716:./include/lib_AT91SAM7A3.h **** {
2717:./include/lib_AT91SAM7A3.h **** 	//* Write to the IER register
2718:./include/lib_AT91SAM7A3.h **** 	pTWI->TWI_IER = flag;
2719:./include/lib_AT91SAM7A3.h **** }
2720:./include/lib_AT91SAM7A3.h **** 
2721:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2722:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_TWI_DisableIt
2723:./include/lib_AT91SAM7A3.h **** //* \brief Disable TWI IT
2724:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2725:./include/lib_AT91SAM7A3.h **** __inline void AT91F_TWI_DisableIt (
2726:./include/lib_AT91SAM7A3.h **** 	AT91PS_TWI pTWI, // \arg pointer to a TWI controller
2727:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // \arg IT to be disabled
2728:./include/lib_AT91SAM7A3.h **** {
2729:./include/lib_AT91SAM7A3.h **** 	//* Write to the IDR register
2730:./include/lib_AT91SAM7A3.h **** 	pTWI->TWI_IDR = flag;
2731:./include/lib_AT91SAM7A3.h **** }
2732:./include/lib_AT91SAM7A3.h **** 
2733:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2734:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_TWI_Configure
2735:./include/lib_AT91SAM7A3.h **** //* \brief Configure TWI in master mode
2736:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2737:./include/lib_AT91SAM7A3.h **** __inline void AT91F_TWI_Configure ( AT91PS_TWI pTWI )          // \arg pointer to a TWI controller
2738:./include/lib_AT91SAM7A3.h **** {
2739:./include/lib_AT91SAM7A3.h ****     //* Disable interrupts
2740:./include/lib_AT91SAM7A3.h **** 	pTWI->TWI_IDR = (unsigned int) -1;
2741:./include/lib_AT91SAM7A3.h **** 
2742:./include/lib_AT91SAM7A3.h ****     //* Reset peripheral
2743:./include/lib_AT91SAM7A3.h **** 	pTWI->TWI_CR = AT91C_TWI_SWRST;
2744:./include/lib_AT91SAM7A3.h **** 
2745:./include/lib_AT91SAM7A3.h **** 	//* Set Master mode
2746:./include/lib_AT91SAM7A3.h **** 	pTWI->TWI_CR = AT91C_TWI_MSEN;
2747:./include/lib_AT91SAM7A3.h **** 
2748:./include/lib_AT91SAM7A3.h **** }
2749:./include/lib_AT91SAM7A3.h **** 
2750:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2751:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_TWI_GetInterruptMaskStatus
2752:./include/lib_AT91SAM7A3.h **** //* \brief Return TWI Interrupt Mask Status
2753:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2754:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_TWI_GetInterruptMaskStatus( // \return TWI Interrupt Mask Status
2755:./include/lib_AT91SAM7A3.h ****         AT91PS_TWI pTwi) // \arg  pointer to a TWI controller
2756:./include/lib_AT91SAM7A3.h **** {
2757:./include/lib_AT91SAM7A3.h ****         return pTwi->TWI_IMR;
2758:./include/lib_AT91SAM7A3.h **** }
2759:./include/lib_AT91SAM7A3.h **** 
2760:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2761:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_TWI_IsInterruptMasked
2762:./include/lib_AT91SAM7A3.h **** //* \brief Test if TWI Interrupt is Masked 
2763:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2764:./include/lib_AT91SAM7A3.h **** __inline int AT91F_TWI_IsInterruptMasked(
2765:./include/lib_AT91SAM7A3.h ****         AT91PS_TWI pTwi,   // \arg  pointer to a TWI controller
2766:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
2767:./include/lib_AT91SAM7A3.h **** {
2768:./include/lib_AT91SAM7A3.h ****         return (AT91F_TWI_GetInterruptMaskStatus(pTwi) & flag);
2769:./include/lib_AT91SAM7A3.h **** }
2770:./include/lib_AT91SAM7A3.h **** 
2771:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
2772:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR USART
2773:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
2774:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2775:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_Baudrate
2776:./include/lib_AT91SAM7A3.h **** //* \brief Calculate the baudrate
2777:./include/lib_AT91SAM7A3.h **** //* Standard Asynchronous Mode : 8 bits , 1 stop , no parity
2778:./include/lib_AT91SAM7A3.h **** #define AT91C_US_ASYNC_MODE ( AT91C_US_USMODE_NORMAL + \
2779:./include/lib_AT91SAM7A3.h ****                         AT91C_US_NBSTOP_1_BIT + \
2780:./include/lib_AT91SAM7A3.h ****                         AT91C_US_PAR_NONE + \
2781:./include/lib_AT91SAM7A3.h ****                         AT91C_US_CHRL_8_BITS + \
2782:./include/lib_AT91SAM7A3.h ****                         AT91C_US_CLKS_CLOCK )
2783:./include/lib_AT91SAM7A3.h **** 
2784:./include/lib_AT91SAM7A3.h **** //* Standard External Asynchronous Mode : 8 bits , 1 stop , no parity
2785:./include/lib_AT91SAM7A3.h **** #define AT91C_US_ASYNC_SCK_MODE ( AT91C_US_USMODE_NORMAL + \
2786:./include/lib_AT91SAM7A3.h ****                             AT91C_US_NBSTOP_1_BIT + \
2787:./include/lib_AT91SAM7A3.h ****                             AT91C_US_PAR_NONE + \
2788:./include/lib_AT91SAM7A3.h ****                             AT91C_US_CHRL_8_BITS + \
2789:./include/lib_AT91SAM7A3.h ****                             AT91C_US_CLKS_EXT )
2790:./include/lib_AT91SAM7A3.h **** 
2791:./include/lib_AT91SAM7A3.h **** //* Standard Synchronous Mode : 8 bits , 1 stop , no parity
2792:./include/lib_AT91SAM7A3.h **** #define AT91C_US_SYNC_MODE ( AT91C_US_SYNC + \
2793:./include/lib_AT91SAM7A3.h ****                        AT91C_US_USMODE_NORMAL + \
2794:./include/lib_AT91SAM7A3.h ****                        AT91C_US_NBSTOP_1_BIT + \
2795:./include/lib_AT91SAM7A3.h ****                        AT91C_US_PAR_NONE + \
2796:./include/lib_AT91SAM7A3.h ****                        AT91C_US_CHRL_8_BITS + \
2797:./include/lib_AT91SAM7A3.h ****                        AT91C_US_CLKS_CLOCK )
2798:./include/lib_AT91SAM7A3.h **** 
2799:./include/lib_AT91SAM7A3.h **** //* SCK used Label
2800:./include/lib_AT91SAM7A3.h **** #define AT91C_US_SCK_USED (AT91C_US_CKLO | AT91C_US_CLKS_EXT)
2801:./include/lib_AT91SAM7A3.h **** 
2802:./include/lib_AT91SAM7A3.h **** //* Standard ISO T=0 Mode : 8 bits , 1 stop , parity
2803:./include/lib_AT91SAM7A3.h **** #define AT91C_US_ISO_READER_MODE ( AT91C_US_USMODE_ISO7816_0 + \
2804:./include/lib_AT91SAM7A3.h **** 					   		 AT91C_US_CLKS_CLOCK +\
2805:./include/lib_AT91SAM7A3.h ****                        		 AT91C_US_NBSTOP_1_BIT + \
2806:./include/lib_AT91SAM7A3.h ****                        		 AT91C_US_PAR_EVEN + \
2807:./include/lib_AT91SAM7A3.h ****                        		 AT91C_US_CHRL_8_BITS + \
2808:./include/lib_AT91SAM7A3.h ****                        		 AT91C_US_CKLO +\
2809:./include/lib_AT91SAM7A3.h ****                        		 AT91C_US_OVER)
2810:./include/lib_AT91SAM7A3.h **** 
2811:./include/lib_AT91SAM7A3.h **** //* Standard IRDA mode
2812:./include/lib_AT91SAM7A3.h **** #define AT91C_US_ASYNC_IRDA_MODE (  AT91C_US_USMODE_IRDA + \
2813:./include/lib_AT91SAM7A3.h ****                             AT91C_US_NBSTOP_1_BIT + \
2814:./include/lib_AT91SAM7A3.h ****                             AT91C_US_PAR_NONE + \
2815:./include/lib_AT91SAM7A3.h ****                             AT91C_US_CHRL_8_BITS + \
2816:./include/lib_AT91SAM7A3.h ****                             AT91C_US_CLKS_CLOCK )
2817:./include/lib_AT91SAM7A3.h **** 
2818:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2819:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_Baudrate
2820:./include/lib_AT91SAM7A3.h **** //* \brief Caluculate baud_value according to the main clock and the baud rate
2821:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2822:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_US_Baudrate (
2823:./include/lib_AT91SAM7A3.h **** 	const unsigned int main_clock, // \arg peripheral clock
2824:./include/lib_AT91SAM7A3.h **** 	const unsigned int baud_rate)  // \arg UART baudrate
2825:./include/lib_AT91SAM7A3.h **** {
2826:./include/lib_AT91SAM7A3.h **** 	unsigned int baud_value = ((main_clock*10)/(baud_rate * 16));
2827:./include/lib_AT91SAM7A3.h **** 	if ((baud_value % 10) >= 5)
2828:./include/lib_AT91SAM7A3.h **** 		baud_value = (baud_value / 10) + 1;
2829:./include/lib_AT91SAM7A3.h **** 	else
2830:./include/lib_AT91SAM7A3.h **** 		baud_value /= 10;
2831:./include/lib_AT91SAM7A3.h **** 	return baud_value;
2832:./include/lib_AT91SAM7A3.h **** }
2833:./include/lib_AT91SAM7A3.h **** 
2834:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2835:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_SetBaudrate
2836:./include/lib_AT91SAM7A3.h **** //* \brief Set the baudrate according to the CPU clock
2837:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2838:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_SetBaudrate (
2839:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART,    // \arg pointer to a USART controller
2840:./include/lib_AT91SAM7A3.h **** 	unsigned int mainClock, // \arg peripheral clock
2841:./include/lib_AT91SAM7A3.h **** 	unsigned int speed)     // \arg UART baudrate
2842:./include/lib_AT91SAM7A3.h **** {
2843:./include/lib_AT91SAM7A3.h **** 	//* Define the baud rate divisor register
2844:./include/lib_AT91SAM7A3.h **** 	pUSART->US_BRGR = AT91F_US_Baudrate(mainClock, speed);
2845:./include/lib_AT91SAM7A3.h **** }
2846:./include/lib_AT91SAM7A3.h **** 
2847:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2848:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_SetTimeguard
2849:./include/lib_AT91SAM7A3.h **** //* \brief Set USART timeguard
2850:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2851:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_SetTimeguard (
2852:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART,    // \arg pointer to a USART controller
2853:./include/lib_AT91SAM7A3.h **** 	unsigned int timeguard) // \arg timeguard value
2854:./include/lib_AT91SAM7A3.h **** {
2855:./include/lib_AT91SAM7A3.h **** 	//* Write the Timeguard Register
2856:./include/lib_AT91SAM7A3.h **** 	pUSART->US_TTGR = timeguard ;
2857:./include/lib_AT91SAM7A3.h **** }
2858:./include/lib_AT91SAM7A3.h **** 
2859:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2860:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_EnableIt
2861:./include/lib_AT91SAM7A3.h **** //* \brief Enable USART IT
2862:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2863:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_EnableIt (
2864:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART, // \arg pointer to a USART controller
2865:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // \arg IT to be enabled
2866:./include/lib_AT91SAM7A3.h **** {
2867:./include/lib_AT91SAM7A3.h **** 	//* Write to the IER register
2868:./include/lib_AT91SAM7A3.h **** 	pUSART->US_IER = flag;
2869:./include/lib_AT91SAM7A3.h **** }
2870:./include/lib_AT91SAM7A3.h **** 
2871:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2872:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_DisableIt
2873:./include/lib_AT91SAM7A3.h **** //* \brief Disable USART IT
2874:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2875:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_DisableIt (
2876:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART, // \arg pointer to a USART controller
2877:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // \arg IT to be disabled
2878:./include/lib_AT91SAM7A3.h **** {
2879:./include/lib_AT91SAM7A3.h **** 	//* Write to the IER register
2880:./include/lib_AT91SAM7A3.h **** 	pUSART->US_IDR = flag;
2881:./include/lib_AT91SAM7A3.h **** }
2882:./include/lib_AT91SAM7A3.h **** 
2883:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2884:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_Configure
2885:./include/lib_AT91SAM7A3.h **** //* \brief Configure USART
2886:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2887:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_Configure (
2888:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART,     // \arg pointer to a USART controller
2889:./include/lib_AT91SAM7A3.h **** 	unsigned int mainClock,  // \arg peripheral clock
2890:./include/lib_AT91SAM7A3.h **** 	unsigned int mode ,      // \arg mode Register to be programmed
2891:./include/lib_AT91SAM7A3.h **** 	unsigned int baudRate ,  // \arg baudrate to be programmed
2892:./include/lib_AT91SAM7A3.h **** 	unsigned int timeguard ) // \arg timeguard to be programmed
2893:./include/lib_AT91SAM7A3.h **** {
2894:./include/lib_AT91SAM7A3.h ****     //* Disable interrupts
2895:./include/lib_AT91SAM7A3.h ****     pUSART->US_IDR = (unsigned int) -1;
2896:./include/lib_AT91SAM7A3.h **** 
2897:./include/lib_AT91SAM7A3.h ****     //* Reset receiver and transmitter
2898:./include/lib_AT91SAM7A3.h ****     pUSART->US_CR = AT91C_US_RSTRX | AT91C_US_RSTTX | AT91C_US_RXDIS | AT91C_US_TXDIS ;
2899:./include/lib_AT91SAM7A3.h **** 
2900:./include/lib_AT91SAM7A3.h **** 	//* Define the baud rate divisor register
2901:./include/lib_AT91SAM7A3.h **** 	AT91F_US_SetBaudrate(pUSART, mainClock, baudRate);
2902:./include/lib_AT91SAM7A3.h **** 
2903:./include/lib_AT91SAM7A3.h **** 	//* Write the Timeguard Register
2904:./include/lib_AT91SAM7A3.h **** 	AT91F_US_SetTimeguard(pUSART, timeguard);
2905:./include/lib_AT91SAM7A3.h **** 
2906:./include/lib_AT91SAM7A3.h ****     //* Clear Transmit and Receive Counters
2907:./include/lib_AT91SAM7A3.h ****     AT91F_PDC_Open((AT91PS_PDC) &(pUSART->US_RPR));
2908:./include/lib_AT91SAM7A3.h **** 
2909:./include/lib_AT91SAM7A3.h ****     //* Define the USART mode
2910:./include/lib_AT91SAM7A3.h ****     pUSART->US_MR = mode  ;
2911:./include/lib_AT91SAM7A3.h **** 
2912:./include/lib_AT91SAM7A3.h **** }
2913:./include/lib_AT91SAM7A3.h **** 
2914:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2915:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_EnableRx
2916:./include/lib_AT91SAM7A3.h **** //* \brief Enable receiving characters
2917:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2918:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_EnableRx (
2919:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2920:./include/lib_AT91SAM7A3.h **** {
2921:./include/lib_AT91SAM7A3.h ****     //* Enable receiver
2922:./include/lib_AT91SAM7A3.h ****     pUSART->US_CR = AT91C_US_RXEN;
2923:./include/lib_AT91SAM7A3.h **** }
2924:./include/lib_AT91SAM7A3.h **** 
2925:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2926:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_EnableTx
2927:./include/lib_AT91SAM7A3.h **** //* \brief Enable sending characters
2928:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2929:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_EnableTx (
2930:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2931:./include/lib_AT91SAM7A3.h **** {
2932:./include/lib_AT91SAM7A3.h ****     //* Enable  transmitter
2933:./include/lib_AT91SAM7A3.h ****     pUSART->US_CR = AT91C_US_TXEN;
2934:./include/lib_AT91SAM7A3.h **** }
2935:./include/lib_AT91SAM7A3.h **** 
2936:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2937:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_ResetRx
2938:./include/lib_AT91SAM7A3.h **** //* \brief Reset Receiver and re-enable it
2939:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2940:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_ResetRx (
2941:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2942:./include/lib_AT91SAM7A3.h **** {
2943:./include/lib_AT91SAM7A3.h **** 	//* Reset receiver
2944:./include/lib_AT91SAM7A3.h **** 	pUSART->US_CR = AT91C_US_RSTRX;
2945:./include/lib_AT91SAM7A3.h ****     //* Re-Enable receiver
2946:./include/lib_AT91SAM7A3.h ****     pUSART->US_CR = AT91C_US_RXEN;
2947:./include/lib_AT91SAM7A3.h **** }
2948:./include/lib_AT91SAM7A3.h **** 
2949:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2950:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_ResetTx
2951:./include/lib_AT91SAM7A3.h **** //* \brief Reset Transmitter and re-enable it
2952:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2953:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_ResetTx (
2954:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2955:./include/lib_AT91SAM7A3.h **** {
2956:./include/lib_AT91SAM7A3.h **** 	//* Reset transmitter
2957:./include/lib_AT91SAM7A3.h **** 	pUSART->US_CR = AT91C_US_RSTTX;
2958:./include/lib_AT91SAM7A3.h ****     //* Enable transmitter
2959:./include/lib_AT91SAM7A3.h ****     pUSART->US_CR = AT91C_US_TXEN;
2960:./include/lib_AT91SAM7A3.h **** }
2961:./include/lib_AT91SAM7A3.h **** 
2962:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2963:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_DisableRx
2964:./include/lib_AT91SAM7A3.h **** //* \brief Disable Receiver
2965:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2966:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_DisableRx (
2967:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2968:./include/lib_AT91SAM7A3.h **** {
2969:./include/lib_AT91SAM7A3.h ****     //* Disable receiver
2970:./include/lib_AT91SAM7A3.h ****     pUSART->US_CR = AT91C_US_RXDIS;
2971:./include/lib_AT91SAM7A3.h **** }
2972:./include/lib_AT91SAM7A3.h **** 
2973:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2974:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_DisableTx
2975:./include/lib_AT91SAM7A3.h **** //* \brief Disable Transmitter
2976:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2977:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_DisableTx (
2978:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2979:./include/lib_AT91SAM7A3.h **** {
2980:./include/lib_AT91SAM7A3.h ****     //* Disable transmitter
2981:./include/lib_AT91SAM7A3.h ****     pUSART->US_CR = AT91C_US_TXDIS;
2982:./include/lib_AT91SAM7A3.h **** }
2983:./include/lib_AT91SAM7A3.h **** 
2984:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2985:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_Close
2986:./include/lib_AT91SAM7A3.h **** //* \brief Close USART: disable IT disable receiver and transmitter, close PDC
2987:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
2988:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_Close (
2989:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART)     // \arg pointer to a USART controller
2990:./include/lib_AT91SAM7A3.h **** {
2991:./include/lib_AT91SAM7A3.h ****     //* Reset the baud rate divisor register
2992:./include/lib_AT91SAM7A3.h ****     pUSART->US_BRGR = 0 ;
2993:./include/lib_AT91SAM7A3.h **** 
2994:./include/lib_AT91SAM7A3.h ****     //* Reset the USART mode
2995:./include/lib_AT91SAM7A3.h ****     pUSART->US_MR = 0  ;
2996:./include/lib_AT91SAM7A3.h **** 
2997:./include/lib_AT91SAM7A3.h ****     //* Reset the Timeguard Register
2998:./include/lib_AT91SAM7A3.h ****     pUSART->US_TTGR = 0;
2999:./include/lib_AT91SAM7A3.h **** 
3000:./include/lib_AT91SAM7A3.h ****     //* Disable all interrupts
3001:./include/lib_AT91SAM7A3.h ****     pUSART->US_IDR = 0xFFFFFFFF ;
3002:./include/lib_AT91SAM7A3.h **** 
3003:./include/lib_AT91SAM7A3.h ****     //* Abort the Peripheral Data Transfers
3004:./include/lib_AT91SAM7A3.h ****     AT91F_PDC_Close((AT91PS_PDC) &(pUSART->US_RPR));
3005:./include/lib_AT91SAM7A3.h **** 
3006:./include/lib_AT91SAM7A3.h ****     //* Disable receiver and transmitter and stop any activity immediately
3007:./include/lib_AT91SAM7A3.h ****     pUSART->US_CR = AT91C_US_TXDIS | AT91C_US_RXDIS | AT91C_US_RSTTX | AT91C_US_RSTRX ;
3008:./include/lib_AT91SAM7A3.h **** }
3009:./include/lib_AT91SAM7A3.h **** 
3010:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3011:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_TxReady
3012:./include/lib_AT91SAM7A3.h **** //* \brief Return 1 if a character can be written in US_THR
3013:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3014:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_US_TxReady (
3015:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART )     // \arg pointer to a USART controller
3016:./include/lib_AT91SAM7A3.h **** {
3017:./include/lib_AT91SAM7A3.h ****     return (pUSART->US_CSR & AT91C_US_TXRDY);
3018:./include/lib_AT91SAM7A3.h **** }
3019:./include/lib_AT91SAM7A3.h **** 
3020:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3021:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_RxReady
3022:./include/lib_AT91SAM7A3.h **** //* \brief Return 1 if a character can be read in US_RHR
3023:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3024:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_US_RxReady (
3025:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART )     // \arg pointer to a USART controller
3026:./include/lib_AT91SAM7A3.h **** {
3027:./include/lib_AT91SAM7A3.h ****     return (pUSART->US_CSR & AT91C_US_RXRDY);
3028:./include/lib_AT91SAM7A3.h **** }
3029:./include/lib_AT91SAM7A3.h **** 
3030:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3031:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_Error
3032:./include/lib_AT91SAM7A3.h **** //* \brief Return the error flag
3033:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3034:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_US_Error (
3035:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART )     // \arg pointer to a USART controller
3036:./include/lib_AT91SAM7A3.h **** {
3037:./include/lib_AT91SAM7A3.h ****     return (pUSART->US_CSR &
3038:./include/lib_AT91SAM7A3.h ****     	(AT91C_US_OVRE |  // Overrun error
3039:./include/lib_AT91SAM7A3.h ****     	 AT91C_US_FRAME | // Framing error
3040:./include/lib_AT91SAM7A3.h ****     	 AT91C_US_PARE));  // Parity error
3041:./include/lib_AT91SAM7A3.h **** }
3042:./include/lib_AT91SAM7A3.h **** 
3043:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3044:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_PutChar
3045:./include/lib_AT91SAM7A3.h **** //* \brief Send a character,does not check if ready to send
3046:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3047:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_PutChar (
3048:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART,
3049:./include/lib_AT91SAM7A3.h **** 	int character )
3050:./include/lib_AT91SAM7A3.h **** {
3051:./include/lib_AT91SAM7A3.h ****     pUSART->US_THR = (character & 0x1FF);
3052:./include/lib_AT91SAM7A3.h **** }
3053:./include/lib_AT91SAM7A3.h **** 
3054:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3055:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_GetChar
3056:./include/lib_AT91SAM7A3.h **** //* \brief Receive a character,does not check if a character is available
3057:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3058:./include/lib_AT91SAM7A3.h **** __inline int AT91F_US_GetChar (
3059:./include/lib_AT91SAM7A3.h **** 	const AT91PS_USART pUSART)
3060:./include/lib_AT91SAM7A3.h **** {
3061:./include/lib_AT91SAM7A3.h ****     return((pUSART->US_RHR) & 0x1FF);
3062:./include/lib_AT91SAM7A3.h **** }
3063:./include/lib_AT91SAM7A3.h **** 
3064:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3065:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_SendFrame
3066:./include/lib_AT91SAM7A3.h **** //* \brief Return 2 if PDC has been initialized with Buffer and Next Buffer, 1 if PDC has been init
3067:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3068:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_US_SendFrame(
3069:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART,
3070:./include/lib_AT91SAM7A3.h **** 	char *pBuffer,
3071:./include/lib_AT91SAM7A3.h **** 	unsigned int szBuffer,
3072:./include/lib_AT91SAM7A3.h **** 	char *pNextBuffer,
3073:./include/lib_AT91SAM7A3.h **** 	unsigned int szNextBuffer )
3074:./include/lib_AT91SAM7A3.h **** {
3075:./include/lib_AT91SAM7A3.h **** 	return AT91F_PDC_SendFrame(
3076:./include/lib_AT91SAM7A3.h **** 		(AT91PS_PDC) &(pUSART->US_RPR),
3077:./include/lib_AT91SAM7A3.h **** 		pBuffer,
3078:./include/lib_AT91SAM7A3.h **** 		szBuffer,
3079:./include/lib_AT91SAM7A3.h **** 		pNextBuffer,
3080:./include/lib_AT91SAM7A3.h **** 		szNextBuffer);
3081:./include/lib_AT91SAM7A3.h **** }
3082:./include/lib_AT91SAM7A3.h **** 
3083:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3084:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_ReceiveFrame
3085:./include/lib_AT91SAM7A3.h **** //* \brief Return 2 if PDC has been initialized with Buffer and Next Buffer, 1 if PDC has been init
3086:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3087:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_US_ReceiveFrame (
3088:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART,
3089:./include/lib_AT91SAM7A3.h **** 	char *pBuffer,
3090:./include/lib_AT91SAM7A3.h **** 	unsigned int szBuffer,
3091:./include/lib_AT91SAM7A3.h **** 	char *pNextBuffer,
3092:./include/lib_AT91SAM7A3.h **** 	unsigned int szNextBuffer )
3093:./include/lib_AT91SAM7A3.h **** {
3094:./include/lib_AT91SAM7A3.h **** 	return AT91F_PDC_ReceiveFrame(
3095:./include/lib_AT91SAM7A3.h **** 		(AT91PS_PDC) &(pUSART->US_RPR),
3096:./include/lib_AT91SAM7A3.h **** 		pBuffer,
3097:./include/lib_AT91SAM7A3.h **** 		szBuffer,
3098:./include/lib_AT91SAM7A3.h **** 		pNextBuffer,
3099:./include/lib_AT91SAM7A3.h **** 		szNextBuffer);
3100:./include/lib_AT91SAM7A3.h **** }
3101:./include/lib_AT91SAM7A3.h **** 
3102:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3103:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_US_SetIrdaFilter
3104:./include/lib_AT91SAM7A3.h **** //* \brief Set the value of IrDa filter tregister
3105:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3106:./include/lib_AT91SAM7A3.h **** __inline void AT91F_US_SetIrdaFilter (
3107:./include/lib_AT91SAM7A3.h **** 	AT91PS_USART pUSART,
3108:./include/lib_AT91SAM7A3.h **** 	unsigned char value
3109:./include/lib_AT91SAM7A3.h **** )
3110:./include/lib_AT91SAM7A3.h **** {
3111:./include/lib_AT91SAM7A3.h **** 	pUSART->US_IF = value;
3112:./include/lib_AT91SAM7A3.h **** }
3113:./include/lib_AT91SAM7A3.h **** 
3114:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
3115:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR PWMC
3116:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
3117:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3118:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PWM_GetStatus
3119:./include/lib_AT91SAM7A3.h **** //* \brief Return PWM Interrupt Status
3120:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3121:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PWMC_GetStatus( // \return PWM Interrupt Status
3122:./include/lib_AT91SAM7A3.h **** 	AT91PS_PWMC pPWM) // pointer to a PWM controller
3123:./include/lib_AT91SAM7A3.h **** {
3124:./include/lib_AT91SAM7A3.h **** 	return pPWM->PWMC_SR;
3125:./include/lib_AT91SAM7A3.h **** }
3126:./include/lib_AT91SAM7A3.h **** 
3127:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3128:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PWM_InterruptEnable
3129:./include/lib_AT91SAM7A3.h **** //* \brief Enable PWM Interrupt
3130:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3131:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PWMC_InterruptEnable(
3132:./include/lib_AT91SAM7A3.h ****         AT91PS_PWMC pPwm,   // \arg  pointer to a PWM controller
3133:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  PWM interrupt to be enabled
3134:./include/lib_AT91SAM7A3.h **** {
3135:./include/lib_AT91SAM7A3.h ****         pPwm->PWMC_IER = flag;
3136:./include/lib_AT91SAM7A3.h **** }
3137:./include/lib_AT91SAM7A3.h **** 
3138:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3139:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PWM_InterruptDisable
3140:./include/lib_AT91SAM7A3.h **** //* \brief Disable PWM Interrupt
3141:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3142:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PWMC_InterruptDisable(
3143:./include/lib_AT91SAM7A3.h ****         AT91PS_PWMC pPwm,   // \arg  pointer to a PWM controller
3144:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  PWM interrupt to be disabled
3145:./include/lib_AT91SAM7A3.h **** {
3146:./include/lib_AT91SAM7A3.h ****         pPwm->PWMC_IDR = flag;
3147:./include/lib_AT91SAM7A3.h **** }
3148:./include/lib_AT91SAM7A3.h **** 
3149:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3150:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PWM_GetInterruptMaskStatus
3151:./include/lib_AT91SAM7A3.h **** //* \brief Return PWM Interrupt Mask Status
3152:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3153:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PWMC_GetInterruptMaskStatus( // \return PWM Interrupt Mask Status
3154:./include/lib_AT91SAM7A3.h ****         AT91PS_PWMC pPwm) // \arg  pointer to a PWM controller
3155:./include/lib_AT91SAM7A3.h **** {
3156:./include/lib_AT91SAM7A3.h ****         return pPwm->PWMC_IMR;
3157:./include/lib_AT91SAM7A3.h **** }
3158:./include/lib_AT91SAM7A3.h **** 
3159:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3160:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PWM_IsInterruptMasked
3161:./include/lib_AT91SAM7A3.h **** //* \brief Test if PWM Interrupt is Masked
3162:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3163:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PWMC_IsInterruptMasked(
3164:./include/lib_AT91SAM7A3.h ****         AT91PS_PWMC pPWM,   // \arg  pointer to a PWM controller
3165:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
3166:./include/lib_AT91SAM7A3.h **** {
3167:./include/lib_AT91SAM7A3.h **** 	return (AT91F_PWMC_GetInterruptMaskStatus(pPWM) & flag);
3168:./include/lib_AT91SAM7A3.h **** }
3169:./include/lib_AT91SAM7A3.h **** 
3170:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3171:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PWM_IsStatusSet
3172:./include/lib_AT91SAM7A3.h **** //* \brief Test if PWM Interrupt is Set
3173:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3174:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_PWMC_IsStatusSet(
3175:./include/lib_AT91SAM7A3.h ****         AT91PS_PWMC pPWM,   // \arg  pointer to a PWM controller
3176:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
3177:./include/lib_AT91SAM7A3.h **** {
3178:./include/lib_AT91SAM7A3.h **** 	return (AT91F_PWMC_GetStatus(pPWM) & flag);
3179:./include/lib_AT91SAM7A3.h **** }
3180:./include/lib_AT91SAM7A3.h **** 
3181:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3182:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PWM_CfgChannel
3183:./include/lib_AT91SAM7A3.h **** //* \brief Test if PWM Interrupt is Set
3184:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3185:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PWMC_CfgChannel(
3186:./include/lib_AT91SAM7A3.h ****         AT91PS_PWMC pPWM,   // \arg  pointer to a PWM controller
3187:./include/lib_AT91SAM7A3.h ****         unsigned int channelId, // \arg PWM channel ID
3188:./include/lib_AT91SAM7A3.h ****         unsigned int mode, // \arg  PWM mode
3189:./include/lib_AT91SAM7A3.h ****         unsigned int period, // \arg PWM period
3190:./include/lib_AT91SAM7A3.h ****         unsigned int duty) // \arg PWM duty cycle
3191:./include/lib_AT91SAM7A3.h **** {
3192:./include/lib_AT91SAM7A3.h **** 	pPWM->PWMC_CH[channelId].PWMC_CMR = mode;
3193:./include/lib_AT91SAM7A3.h **** 	pPWM->PWMC_CH[channelId].PWMC_CDTYR = duty;
3194:./include/lib_AT91SAM7A3.h **** 	pPWM->PWMC_CH[channelId].PWMC_CPRDR = period;
3195:./include/lib_AT91SAM7A3.h **** }
3196:./include/lib_AT91SAM7A3.h **** 
3197:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3198:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PWM_StartChannel
3199:./include/lib_AT91SAM7A3.h **** //* \brief Enable channel
3200:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3201:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PWMC_StartChannel(
3202:./include/lib_AT91SAM7A3.h ****         AT91PS_PWMC pPWM,   // \arg  pointer to a PWM controller
3203:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  Channels IDs to be enabled
3204:./include/lib_AT91SAM7A3.h **** {
3205:./include/lib_AT91SAM7A3.h **** 	pPWM->PWMC_ENA = flag;
3206:./include/lib_AT91SAM7A3.h **** }
3207:./include/lib_AT91SAM7A3.h **** 
3208:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3209:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PWM_StopChannel
3210:./include/lib_AT91SAM7A3.h **** //* \brief Disable channel
3211:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3212:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PWMC_StopChannel(
3213:./include/lib_AT91SAM7A3.h ****         AT91PS_PWMC pPWM,   // \arg  pointer to a PWM controller
3214:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  Channels IDs to be enabled
3215:./include/lib_AT91SAM7A3.h **** {
3216:./include/lib_AT91SAM7A3.h **** 	pPWM->PWMC_DIS = flag;
3217:./include/lib_AT91SAM7A3.h **** }
3218:./include/lib_AT91SAM7A3.h **** 
3219:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3220:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_PWM_UpdateChannel
3221:./include/lib_AT91SAM7A3.h **** //* \brief Update Period or Duty Cycle
3222:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3223:./include/lib_AT91SAM7A3.h **** __inline void AT91F_PWMC_UpdateChannel(
3224:./include/lib_AT91SAM7A3.h ****         AT91PS_PWMC pPWM,   // \arg  pointer to a PWM controller
3225:./include/lib_AT91SAM7A3.h ****         unsigned int channelId, // \arg PWM channel ID
3226:./include/lib_AT91SAM7A3.h ****         unsigned int update) // \arg  Channels IDs to be enabled
3227:./include/lib_AT91SAM7A3.h **** {
3228:./include/lib_AT91SAM7A3.h **** 	pPWM->PWMC_CH[channelId].PWMC_CUPDR = update;
3229:./include/lib_AT91SAM7A3.h **** }
3230:./include/lib_AT91SAM7A3.h **** 
3231:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
3232:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR SSC
3233:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
3234:./include/lib_AT91SAM7A3.h **** //* Define the standard I2S mode configuration
3235:./include/lib_AT91SAM7A3.h **** 
3236:./include/lib_AT91SAM7A3.h **** //* Configuration to set in the SSC Transmit Clock Mode Register
3237:./include/lib_AT91SAM7A3.h **** //* Parameters :  nb_bit_by_slot : 8, 16 or 32 bits
3238:./include/lib_AT91SAM7A3.h **** //* 			  nb_slot_by_frame : number of channels
3239:./include/lib_AT91SAM7A3.h **** #define AT91C_I2S_ASY_MASTER_TX_SETTING(nb_bit_by_slot, nb_slot_by_frame)( +\
3240:./include/lib_AT91SAM7A3.h **** 									   AT91C_SSC_CKS_DIV   +\
3241:./include/lib_AT91SAM7A3.h ****                             		   AT91C_SSC_CKO_CONTINOUS      +\
3242:./include/lib_AT91SAM7A3.h ****                             		   AT91C_SSC_CKG_NONE    +\
3243:./include/lib_AT91SAM7A3.h ****                                        AT91C_SSC_START_FALL_RF +\
3244:./include/lib_AT91SAM7A3.h ****                            			   AT91C_SSC_STTOUT  +\
3245:./include/lib_AT91SAM7A3.h ****                             		   ((1<<16) & AT91C_SSC_STTDLY) +\
3246:./include/lib_AT91SAM7A3.h ****                             		   ((((nb_bit_by_slot*nb_slot_by_frame)/2)-1) <<24))
3247:./include/lib_AT91SAM7A3.h **** 
3248:./include/lib_AT91SAM7A3.h **** 
3249:./include/lib_AT91SAM7A3.h **** //* Configuration to set in the SSC Transmit Frame Mode Register
3250:./include/lib_AT91SAM7A3.h **** //* Parameters : nb_bit_by_slot : 8, 16 or 32 bits
3251:./include/lib_AT91SAM7A3.h **** //* 			 nb_slot_by_frame : number of channels
3252:./include/lib_AT91SAM7A3.h **** #define AT91C_I2S_ASY_TX_FRAME_SETTING(nb_bit_by_slot, nb_slot_by_frame)( +\
3253:./include/lib_AT91SAM7A3.h **** 									(nb_bit_by_slot-1)  +\
3254:./include/lib_AT91SAM7A3.h ****                             		AT91C_SSC_MSBF   +\
3255:./include/lib_AT91SAM7A3.h ****                             		(((nb_slot_by_frame-1)<<8) & AT91C_SSC_DATNB)  +\
3256:./include/lib_AT91SAM7A3.h ****                             		(((nb_bit_by_slot-1)<<16) & AT91C_SSC_FSLEN) +\
3257:./include/lib_AT91SAM7A3.h ****                             		AT91C_SSC_FSOS_NEGATIVE)
3258:./include/lib_AT91SAM7A3.h **** 
3259:./include/lib_AT91SAM7A3.h **** 
3260:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3261:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SSC_SetBaudrate
3262:./include/lib_AT91SAM7A3.h **** //* \brief Set the baudrate according to the CPU clock
3263:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3264:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SSC_SetBaudrate (
3265:./include/lib_AT91SAM7A3.h ****         AT91PS_SSC pSSC,        // \arg pointer to a SSC controller
3266:./include/lib_AT91SAM7A3.h ****         unsigned int mainClock, // \arg peripheral clock
3267:./include/lib_AT91SAM7A3.h ****         unsigned int speed)     // \arg SSC baudrate
3268:./include/lib_AT91SAM7A3.h **** {
3269:./include/lib_AT91SAM7A3.h ****         unsigned int baud_value;
3270:./include/lib_AT91SAM7A3.h ****         //* Define the baud rate divisor register
3271:./include/lib_AT91SAM7A3.h ****         if (speed == 0)
3272:./include/lib_AT91SAM7A3.h ****            baud_value = 0;
3273:./include/lib_AT91SAM7A3.h ****         else
3274:./include/lib_AT91SAM7A3.h ****         {
3275:./include/lib_AT91SAM7A3.h ****            baud_value = (unsigned int) (mainClock * 10)/(2*speed);
3276:./include/lib_AT91SAM7A3.h ****            if ((baud_value % 10) >= 5)
3277:./include/lib_AT91SAM7A3.h ****                   baud_value = (baud_value / 10) + 1;
3278:./include/lib_AT91SAM7A3.h ****            else
3279:./include/lib_AT91SAM7A3.h ****                   baud_value /= 10;
3280:./include/lib_AT91SAM7A3.h ****         }
3281:./include/lib_AT91SAM7A3.h **** 
3282:./include/lib_AT91SAM7A3.h ****         pSSC->SSC_CMR = baud_value;
3283:./include/lib_AT91SAM7A3.h **** }
3284:./include/lib_AT91SAM7A3.h **** 
3285:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3286:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SSC_Configure
3287:./include/lib_AT91SAM7A3.h **** //* \brief Configure SSC
3288:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3289:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SSC_Configure (
3290:./include/lib_AT91SAM7A3.h ****              AT91PS_SSC pSSC,          // \arg pointer to a SSC controller
3291:./include/lib_AT91SAM7A3.h ****              unsigned int syst_clock,  // \arg System Clock Frequency
3292:./include/lib_AT91SAM7A3.h ****              unsigned int baud_rate,   // \arg Expected Baud Rate Frequency
3293:./include/lib_AT91SAM7A3.h ****              unsigned int clock_rx,    // \arg Receiver Clock Parameters
3294:./include/lib_AT91SAM7A3.h ****              unsigned int mode_rx,     // \arg mode Register to be programmed
3295:./include/lib_AT91SAM7A3.h ****              unsigned int clock_tx,    // \arg Transmitter Clock Parameters
3296:./include/lib_AT91SAM7A3.h ****              unsigned int mode_tx)     // \arg mode Register to be programmed
3297:./include/lib_AT91SAM7A3.h **** {
3298:./include/lib_AT91SAM7A3.h ****     //* Disable interrupts
3299:./include/lib_AT91SAM7A3.h **** 	pSSC->SSC_IDR = (unsigned int) -1;
3300:./include/lib_AT91SAM7A3.h **** 
3301:./include/lib_AT91SAM7A3.h ****     //* Reset receiver and transmitter
3302:./include/lib_AT91SAM7A3.h **** 	pSSC->SSC_CR = AT91C_SSC_SWRST | AT91C_SSC_RXDIS | AT91C_SSC_TXDIS ;
3303:./include/lib_AT91SAM7A3.h **** 
3304:./include/lib_AT91SAM7A3.h ****     //* Define the Clock Mode Register
3305:./include/lib_AT91SAM7A3.h **** 	AT91F_SSC_SetBaudrate(pSSC, syst_clock, baud_rate);
3306:./include/lib_AT91SAM7A3.h **** 
3307:./include/lib_AT91SAM7A3.h ****      //* Write the Receive Clock Mode Register
3308:./include/lib_AT91SAM7A3.h **** 	pSSC->SSC_RCMR =  clock_rx;
3309:./include/lib_AT91SAM7A3.h **** 
3310:./include/lib_AT91SAM7A3.h ****      //* Write the Transmit Clock Mode Register
3311:./include/lib_AT91SAM7A3.h **** 	pSSC->SSC_TCMR =  clock_tx;
3312:./include/lib_AT91SAM7A3.h **** 
3313:./include/lib_AT91SAM7A3.h ****      //* Write the Receive Frame Mode Register
3314:./include/lib_AT91SAM7A3.h **** 	pSSC->SSC_RFMR =  mode_rx;
3315:./include/lib_AT91SAM7A3.h **** 
3316:./include/lib_AT91SAM7A3.h ****      //* Write the Transmit Frame Mode Register
3317:./include/lib_AT91SAM7A3.h **** 	pSSC->SSC_TFMR =  mode_tx;
3318:./include/lib_AT91SAM7A3.h **** 
3319:./include/lib_AT91SAM7A3.h ****     //* Clear Transmit and Receive Counters
3320:./include/lib_AT91SAM7A3.h **** 	AT91F_PDC_Open((AT91PS_PDC) &(pSSC->SSC_RPR));
3321:./include/lib_AT91SAM7A3.h **** 
3322:./include/lib_AT91SAM7A3.h **** 
3323:./include/lib_AT91SAM7A3.h **** }
3324:./include/lib_AT91SAM7A3.h **** 
3325:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3326:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SSC_EnableRx
3327:./include/lib_AT91SAM7A3.h **** //* \brief Enable receiving datas
3328:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3329:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SSC_EnableRx (
3330:./include/lib_AT91SAM7A3.h **** 	AT91PS_SSC pSSC)     // \arg pointer to a SSC controller
3331:./include/lib_AT91SAM7A3.h **** {
3332:./include/lib_AT91SAM7A3.h ****     //* Enable receiver
3333:./include/lib_AT91SAM7A3.h ****     pSSC->SSC_CR = AT91C_SSC_RXEN;
3334:./include/lib_AT91SAM7A3.h **** }
3335:./include/lib_AT91SAM7A3.h **** 
3336:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3337:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SSC_DisableRx
3338:./include/lib_AT91SAM7A3.h **** //* \brief Disable receiving datas
3339:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3340:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SSC_DisableRx (
3341:./include/lib_AT91SAM7A3.h **** 	AT91PS_SSC pSSC)     // \arg pointer to a SSC controller
3342:./include/lib_AT91SAM7A3.h **** {
3343:./include/lib_AT91SAM7A3.h ****     //* Disable receiver
3344:./include/lib_AT91SAM7A3.h ****     pSSC->SSC_CR = AT91C_SSC_RXDIS;
3345:./include/lib_AT91SAM7A3.h **** }
3346:./include/lib_AT91SAM7A3.h **** 
3347:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3348:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SSC_EnableTx
3349:./include/lib_AT91SAM7A3.h **** //* \brief Enable sending datas
3350:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3351:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SSC_EnableTx (
3352:./include/lib_AT91SAM7A3.h **** 	AT91PS_SSC pSSC)     // \arg pointer to a SSC controller
3353:./include/lib_AT91SAM7A3.h **** {
3354:./include/lib_AT91SAM7A3.h ****     //* Enable  transmitter
3355:./include/lib_AT91SAM7A3.h ****     pSSC->SSC_CR = AT91C_SSC_TXEN;
3356:./include/lib_AT91SAM7A3.h **** }
3357:./include/lib_AT91SAM7A3.h **** 
3358:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3359:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SSC_DisableTx
3360:./include/lib_AT91SAM7A3.h **** //* \brief Disable sending datas
3361:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3362:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SSC_DisableTx (
3363:./include/lib_AT91SAM7A3.h **** 	AT91PS_SSC pSSC)     // \arg pointer to a SSC controller
3364:./include/lib_AT91SAM7A3.h **** {
3365:./include/lib_AT91SAM7A3.h ****     //* Disable  transmitter
3366:./include/lib_AT91SAM7A3.h ****     pSSC->SSC_CR = AT91C_SSC_TXDIS;
3367:./include/lib_AT91SAM7A3.h **** }
3368:./include/lib_AT91SAM7A3.h **** 
3369:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3370:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SSC_EnableIt
3371:./include/lib_AT91SAM7A3.h **** //* \brief Enable SSC IT
3372:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3373:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SSC_EnableIt (
3374:./include/lib_AT91SAM7A3.h **** 	AT91PS_SSC pSSC, // \arg pointer to a SSC controller
3375:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // \arg IT to be enabled
3376:./include/lib_AT91SAM7A3.h **** {
3377:./include/lib_AT91SAM7A3.h **** 	//* Write to the IER register
3378:./include/lib_AT91SAM7A3.h **** 	pSSC->SSC_IER = flag;
3379:./include/lib_AT91SAM7A3.h **** }
3380:./include/lib_AT91SAM7A3.h **** 
3381:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3382:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SSC_DisableIt
3383:./include/lib_AT91SAM7A3.h **** //* \brief Disable SSC IT
3384:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3385:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SSC_DisableIt (
3386:./include/lib_AT91SAM7A3.h **** 	AT91PS_SSC pSSC, // \arg pointer to a SSC controller
3387:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // \arg IT to be disabled
3388:./include/lib_AT91SAM7A3.h **** {
3389:./include/lib_AT91SAM7A3.h **** 	//* Write to the IDR register
3390:./include/lib_AT91SAM7A3.h **** 	pSSC->SSC_IDR = flag;
3391:./include/lib_AT91SAM7A3.h **** }
3392:./include/lib_AT91SAM7A3.h **** 
3393:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3394:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SSC_ReceiveFrame
3395:./include/lib_AT91SAM7A3.h **** //* \brief Return 2 if PDC has been initialized with Buffer and Next Buffer, 1 if PDC has been init
3396:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3397:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_SSC_ReceiveFrame (
3398:./include/lib_AT91SAM7A3.h **** 	AT91PS_SSC pSSC,
3399:./include/lib_AT91SAM7A3.h **** 	char *pBuffer,
3400:./include/lib_AT91SAM7A3.h **** 	unsigned int szBuffer,
3401:./include/lib_AT91SAM7A3.h **** 	char *pNextBuffer,
3402:./include/lib_AT91SAM7A3.h **** 	unsigned int szNextBuffer )
3403:./include/lib_AT91SAM7A3.h **** {
3404:./include/lib_AT91SAM7A3.h **** 	return AT91F_PDC_ReceiveFrame(
3405:./include/lib_AT91SAM7A3.h **** 		(AT91PS_PDC) &(pSSC->SSC_RPR),
3406:./include/lib_AT91SAM7A3.h **** 		pBuffer,
3407:./include/lib_AT91SAM7A3.h **** 		szBuffer,
3408:./include/lib_AT91SAM7A3.h **** 		pNextBuffer,
3409:./include/lib_AT91SAM7A3.h **** 		szNextBuffer);
3410:./include/lib_AT91SAM7A3.h **** }
3411:./include/lib_AT91SAM7A3.h **** 
3412:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3413:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SSC_SendFrame
3414:./include/lib_AT91SAM7A3.h **** //* \brief Return 2 if PDC has been initialized with Buffer and Next Buffer, 1 if PDC has been init
3415:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3416:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_SSC_SendFrame(
3417:./include/lib_AT91SAM7A3.h **** 	AT91PS_SSC pSSC,
3418:./include/lib_AT91SAM7A3.h **** 	char *pBuffer,
3419:./include/lib_AT91SAM7A3.h **** 	unsigned int szBuffer,
3420:./include/lib_AT91SAM7A3.h **** 	char *pNextBuffer,
3421:./include/lib_AT91SAM7A3.h **** 	unsigned int szNextBuffer )
3422:./include/lib_AT91SAM7A3.h **** {
3423:./include/lib_AT91SAM7A3.h **** 	return AT91F_PDC_SendFrame(
3424:./include/lib_AT91SAM7A3.h **** 		(AT91PS_PDC) &(pSSC->SSC_RPR),
3425:./include/lib_AT91SAM7A3.h **** 		pBuffer,
3426:./include/lib_AT91SAM7A3.h **** 		szBuffer,
3427:./include/lib_AT91SAM7A3.h **** 		pNextBuffer,
3428:./include/lib_AT91SAM7A3.h **** 		szNextBuffer);
3429:./include/lib_AT91SAM7A3.h **** }
3430:./include/lib_AT91SAM7A3.h **** 
3431:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3432:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SSC_GetInterruptMaskStatus
3433:./include/lib_AT91SAM7A3.h **** //* \brief Return SSC Interrupt Mask Status
3434:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3435:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_SSC_GetInterruptMaskStatus( // \return SSC Interrupt Mask Status
3436:./include/lib_AT91SAM7A3.h ****         AT91PS_SSC pSsc) // \arg  pointer to a SSC controller
3437:./include/lib_AT91SAM7A3.h **** {
3438:./include/lib_AT91SAM7A3.h ****         return pSsc->SSC_IMR;
3439:./include/lib_AT91SAM7A3.h **** }
3440:./include/lib_AT91SAM7A3.h **** 
3441:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3442:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SSC_IsInterruptMasked
3443:./include/lib_AT91SAM7A3.h **** //* \brief Test if SSC Interrupt is Masked 
3444:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3445:./include/lib_AT91SAM7A3.h **** __inline int AT91F_SSC_IsInterruptMasked(
3446:./include/lib_AT91SAM7A3.h ****         AT91PS_SSC pSsc,   // \arg  pointer to a SSC controller
3447:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
3448:./include/lib_AT91SAM7A3.h **** {
3449:./include/lib_AT91SAM7A3.h ****         return (AT91F_SSC_GetInterruptMaskStatus(pSsc) & flag);
3450:./include/lib_AT91SAM7A3.h **** }
3451:./include/lib_AT91SAM7A3.h **** 
3452:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
3453:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR ADC
3454:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
3455:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3456:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_EnableIt
3457:./include/lib_AT91SAM7A3.h **** //* \brief Enable ADC interrupt
3458:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3459:./include/lib_AT91SAM7A3.h **** __inline void AT91F_ADC_EnableIt (
3460:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC,     // pointer to a ADC controller
3461:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // IT to be enabled
3462:./include/lib_AT91SAM7A3.h **** {
3463:./include/lib_AT91SAM7A3.h **** 	//* Write to the IER register
3464:./include/lib_AT91SAM7A3.h **** 	pADC->ADC_IER = flag;
3465:./include/lib_AT91SAM7A3.h **** }
3466:./include/lib_AT91SAM7A3.h **** 
3467:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3468:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_DisableIt
3469:./include/lib_AT91SAM7A3.h **** //* \brief Disable ADC interrupt
3470:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3471:./include/lib_AT91SAM7A3.h **** __inline void AT91F_ADC_DisableIt (
3472:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC, // pointer to a ADC controller
3473:./include/lib_AT91SAM7A3.h **** 	unsigned int flag) // IT to be disabled
3474:./include/lib_AT91SAM7A3.h **** {
3475:./include/lib_AT91SAM7A3.h **** 	//* Write to the IDR register
3476:./include/lib_AT91SAM7A3.h **** 	pADC->ADC_IDR = flag;
3477:./include/lib_AT91SAM7A3.h **** }
3478:./include/lib_AT91SAM7A3.h **** 
3479:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3480:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetStatus
3481:./include/lib_AT91SAM7A3.h **** //* \brief Return ADC Interrupt Status
3482:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3483:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetStatus( // \return ADC Interrupt Status
3484:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC) // pointer to a ADC controller
3485:./include/lib_AT91SAM7A3.h **** {
3486:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_SR;
3487:./include/lib_AT91SAM7A3.h **** }
3488:./include/lib_AT91SAM7A3.h **** 
3489:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3490:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetInterruptMaskStatus
3491:./include/lib_AT91SAM7A3.h **** //* \brief Return ADC Interrupt Mask Status
3492:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3493:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetInterruptMaskStatus( // \return ADC Interrupt Mask Status
3494:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC) // pointer to a ADC controller
3495:./include/lib_AT91SAM7A3.h **** {
3496:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_IMR;
3497:./include/lib_AT91SAM7A3.h **** }
3498:./include/lib_AT91SAM7A3.h **** 
3499:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3500:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_IsInterruptMasked
3501:./include/lib_AT91SAM7A3.h **** //* \brief Test if ADC Interrupt is Masked 
3502:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3503:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_IsInterruptMasked(
3504:./include/lib_AT91SAM7A3.h ****         AT91PS_ADC pADC,   // \arg  pointer to a ADC controller
3505:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
3506:./include/lib_AT91SAM7A3.h **** {
3507:./include/lib_AT91SAM7A3.h **** 	return (AT91F_ADC_GetInterruptMaskStatus(pADC) & flag);
3508:./include/lib_AT91SAM7A3.h **** }
3509:./include/lib_AT91SAM7A3.h **** 
3510:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3511:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_IsStatusSet
3512:./include/lib_AT91SAM7A3.h **** //* \brief Test if ADC Status is Set
3513:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3514:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_IsStatusSet(
3515:./include/lib_AT91SAM7A3.h ****         AT91PS_ADC pADC,   // \arg  pointer to a ADC controller
3516:./include/lib_AT91SAM7A3.h ****         unsigned int flag) // \arg  flag to be tested
3517:./include/lib_AT91SAM7A3.h **** {
3518:./include/lib_AT91SAM7A3.h **** 	return (AT91F_ADC_GetStatus(pADC) & flag);
3519:./include/lib_AT91SAM7A3.h **** }
3520:./include/lib_AT91SAM7A3.h **** 
3521:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3522:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_CfgModeReg
3523:./include/lib_AT91SAM7A3.h **** //* \brief Configure the Mode Register of the ADC controller
3524:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3525:./include/lib_AT91SAM7A3.h **** __inline void AT91F_ADC_CfgModeReg (
3526:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC, // pointer to a ADC controller
3527:./include/lib_AT91SAM7A3.h **** 	unsigned int mode)        // mode register 
3528:./include/lib_AT91SAM7A3.h **** {
3529:./include/lib_AT91SAM7A3.h **** 	//* Write to the MR register
3530:./include/lib_AT91SAM7A3.h **** 	pADC->ADC_MR = mode;
3531:./include/lib_AT91SAM7A3.h **** }
3532:./include/lib_AT91SAM7A3.h **** 
3533:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3534:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetModeReg
3535:./include/lib_AT91SAM7A3.h **** //* \brief Return the Mode Register of the ADC controller value
3536:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3537:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetModeReg (
3538:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3539:./include/lib_AT91SAM7A3.h **** 	)
3540:./include/lib_AT91SAM7A3.h **** {
3541:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_MR;	
3542:./include/lib_AT91SAM7A3.h **** }
3543:./include/lib_AT91SAM7A3.h **** 
3544:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3545:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_CfgTimings
3546:./include/lib_AT91SAM7A3.h **** //* \brief Configure the different necessary timings of the ADC controller
3547:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3548:./include/lib_AT91SAM7A3.h **** __inline void AT91F_ADC_CfgTimings (
3549:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC, // pointer to a ADC controller
3550:./include/lib_AT91SAM7A3.h **** 	unsigned int mck_clock, // in MHz 
3551:./include/lib_AT91SAM7A3.h **** 	unsigned int adc_clock, // in MHz 
3552:./include/lib_AT91SAM7A3.h **** 	unsigned int startup_time, // in us 
3553:./include/lib_AT91SAM7A3.h **** 	unsigned int sample_and_hold_time)	// in ns  
3554:./include/lib_AT91SAM7A3.h **** {
3555:./include/lib_AT91SAM7A3.h **** 	unsigned int prescal,startup,shtim;
3556:./include/lib_AT91SAM7A3.h **** 	
3557:./include/lib_AT91SAM7A3.h **** 	prescal = mck_clock/(2*adc_clock) - 1;
3558:./include/lib_AT91SAM7A3.h **** 	startup = adc_clock*startup_time/8 - 1;
3559:./include/lib_AT91SAM7A3.h **** 	shtim = adc_clock*sample_and_hold_time/1000 - 1;
3560:./include/lib_AT91SAM7A3.h **** 	
3561:./include/lib_AT91SAM7A3.h **** 	//* Write to the MR register
3562:./include/lib_AT91SAM7A3.h **** 	pADC->ADC_MR = ( (prescal<<8) & AT91C_ADC_PRESCAL) | ( (startup<<16) & AT91C_ADC_STARTUP) | ( (sht
3563:./include/lib_AT91SAM7A3.h **** }
3564:./include/lib_AT91SAM7A3.h **** 
3565:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3566:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_EnableChannel
3567:./include/lib_AT91SAM7A3.h **** //* \brief Return ADC Timer Register Value
3568:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3569:./include/lib_AT91SAM7A3.h **** __inline void AT91F_ADC_EnableChannel (
3570:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC, // pointer to a ADC controller
3571:./include/lib_AT91SAM7A3.h **** 	unsigned int channel)        // mode register 
3572:./include/lib_AT91SAM7A3.h **** {
3573:./include/lib_AT91SAM7A3.h **** 	//* Write to the CHER register
3574:./include/lib_AT91SAM7A3.h **** 	pADC->ADC_CHER = channel;
3575:./include/lib_AT91SAM7A3.h **** }
3576:./include/lib_AT91SAM7A3.h **** 
3577:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3578:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_DisableChannel
3579:./include/lib_AT91SAM7A3.h **** //* \brief Return ADC Timer Register Value
3580:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3581:./include/lib_AT91SAM7A3.h **** __inline void AT91F_ADC_DisableChannel (
3582:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC, // pointer to a ADC controller
3583:./include/lib_AT91SAM7A3.h **** 	unsigned int channel)        // mode register 
3584:./include/lib_AT91SAM7A3.h **** {
3585:./include/lib_AT91SAM7A3.h **** 	//* Write to the CHDR register
3586:./include/lib_AT91SAM7A3.h **** 	pADC->ADC_CHDR = channel;
3587:./include/lib_AT91SAM7A3.h **** }
3588:./include/lib_AT91SAM7A3.h **** 
3589:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3590:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetChannelStatus
3591:./include/lib_AT91SAM7A3.h **** //* \brief Return ADC Timer Register Value
3592:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3593:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetChannelStatus (
3594:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3595:./include/lib_AT91SAM7A3.h **** 	)
3596:./include/lib_AT91SAM7A3.h **** {
3597:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_CHSR;	
3598:./include/lib_AT91SAM7A3.h **** }
3599:./include/lib_AT91SAM7A3.h **** 
3600:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3601:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_StartConversion
3602:./include/lib_AT91SAM7A3.h **** //* \brief Software request for a analog to digital conversion 
3603:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3604:./include/lib_AT91SAM7A3.h **** __inline void AT91F_ADC_StartConversion (
3605:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3606:./include/lib_AT91SAM7A3.h **** 	)
3607:./include/lib_AT91SAM7A3.h **** {
3608:./include/lib_AT91SAM7A3.h **** 	pADC->ADC_CR = AT91C_ADC_START;	
3609:./include/lib_AT91SAM7A3.h **** }
3610:./include/lib_AT91SAM7A3.h **** 
3611:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3612:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_SoftReset
3613:./include/lib_AT91SAM7A3.h **** //* \brief Software reset
3614:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3615:./include/lib_AT91SAM7A3.h **** __inline void AT91F_ADC_SoftReset (
3616:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3617:./include/lib_AT91SAM7A3.h **** 	)
3618:./include/lib_AT91SAM7A3.h **** {
3619:./include/lib_AT91SAM7A3.h **** 	pADC->ADC_CR = AT91C_ADC_SWRST;	
3620:./include/lib_AT91SAM7A3.h **** }
3621:./include/lib_AT91SAM7A3.h **** 
3622:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3623:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetLastConvertedData
3624:./include/lib_AT91SAM7A3.h **** //* \brief Return the Last Converted Data
3625:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3626:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetLastConvertedData (
3627:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3628:./include/lib_AT91SAM7A3.h **** 	)
3629:./include/lib_AT91SAM7A3.h **** {
3630:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_LCDR;	
3631:./include/lib_AT91SAM7A3.h **** }
3632:./include/lib_AT91SAM7A3.h **** 
3633:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3634:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetConvertedDataCH0
3635:./include/lib_AT91SAM7A3.h **** //* \brief Return the Channel 0 Converted Data
3636:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3637:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH0 (
3638:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3639:./include/lib_AT91SAM7A3.h **** 	)
3640:./include/lib_AT91SAM7A3.h **** {
3641:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_CDR0;	
3642:./include/lib_AT91SAM7A3.h **** }
3643:./include/lib_AT91SAM7A3.h **** 
3644:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3645:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetConvertedDataCH1
3646:./include/lib_AT91SAM7A3.h **** //* \brief Return the Channel 1 Converted Data
3647:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3648:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH1 (
3649:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3650:./include/lib_AT91SAM7A3.h **** 	)
3651:./include/lib_AT91SAM7A3.h **** {
3652:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_CDR1;	
3653:./include/lib_AT91SAM7A3.h **** }
3654:./include/lib_AT91SAM7A3.h **** 
3655:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3656:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetConvertedDataCH2
3657:./include/lib_AT91SAM7A3.h **** //* \brief Return the Channel 2 Converted Data
3658:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3659:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH2 (
3660:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3661:./include/lib_AT91SAM7A3.h **** 	)
3662:./include/lib_AT91SAM7A3.h **** {
3663:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_CDR2;	
3664:./include/lib_AT91SAM7A3.h **** }
3665:./include/lib_AT91SAM7A3.h **** 
3666:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3667:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetConvertedDataCH3
3668:./include/lib_AT91SAM7A3.h **** //* \brief Return the Channel 3 Converted Data
3669:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3670:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH3 (
3671:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3672:./include/lib_AT91SAM7A3.h **** 	)
3673:./include/lib_AT91SAM7A3.h **** {
3674:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_CDR3;	
3675:./include/lib_AT91SAM7A3.h **** }
3676:./include/lib_AT91SAM7A3.h **** 
3677:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3678:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetConvertedDataCH4
3679:./include/lib_AT91SAM7A3.h **** //* \brief Return the Channel 4 Converted Data
3680:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3681:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH4 (
3682:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3683:./include/lib_AT91SAM7A3.h **** 	)
3684:./include/lib_AT91SAM7A3.h **** {
3685:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_CDR4;	
3686:./include/lib_AT91SAM7A3.h **** }
3687:./include/lib_AT91SAM7A3.h **** 
3688:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3689:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetConvertedDataCH5
3690:./include/lib_AT91SAM7A3.h **** //* \brief Return the Channel 5 Converted Data
3691:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3692:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH5 (
3693:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3694:./include/lib_AT91SAM7A3.h **** 	)
3695:./include/lib_AT91SAM7A3.h **** {
3696:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_CDR5;	
3697:./include/lib_AT91SAM7A3.h **** }
3698:./include/lib_AT91SAM7A3.h **** 
3699:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3700:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetConvertedDataCH6
3701:./include/lib_AT91SAM7A3.h **** //* \brief Return the Channel 6 Converted Data
3702:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3703:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH6 (
3704:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3705:./include/lib_AT91SAM7A3.h **** 	)
3706:./include/lib_AT91SAM7A3.h **** {
3707:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_CDR6;	
3708:./include/lib_AT91SAM7A3.h **** }
3709:./include/lib_AT91SAM7A3.h **** 
3710:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3711:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_ADC_GetConvertedDataCH7
3712:./include/lib_AT91SAM7A3.h **** //* \brief Return the Channel 7 Converted Data
3713:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3714:./include/lib_AT91SAM7A3.h **** __inline unsigned int AT91F_ADC_GetConvertedDataCH7 (
3715:./include/lib_AT91SAM7A3.h **** 	AT91PS_ADC pADC // pointer to a ADC controller
3716:./include/lib_AT91SAM7A3.h **** 	)
3717:./include/lib_AT91SAM7A3.h **** {
3718:./include/lib_AT91SAM7A3.h **** 	return pADC->ADC_CDR7;	
3719:./include/lib_AT91SAM7A3.h **** }
3720:./include/lib_AT91SAM7A3.h **** 
3721:./include/lib_AT91SAM7A3.h **** /* *****************************************************************************
3722:./include/lib_AT91SAM7A3.h ****                 SOFTWARE API FOR SPI
3723:./include/lib_AT91SAM7A3.h ****    ***************************************************************************** */
3724:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3725:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SPI_CfgCs
3726:./include/lib_AT91SAM7A3.h **** //* \brief Configure SPI chip select register
3727:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3728:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SPI_CfgCs (
3729:./include/lib_AT91SAM7A3.h **** 	AT91PS_SPI pSPI,     // pointer to a SPI controller
3730:./include/lib_AT91SAM7A3.h **** 	int cs,     // SPI cs number (0 to 3)
3731:./include/lib_AT91SAM7A3.h ****  	int val)   //  chip select register
3732:./include/lib_AT91SAM7A3.h **** {
3733:./include/lib_AT91SAM7A3.h **** 	//* Write to the CSR register
3734:./include/lib_AT91SAM7A3.h **** 	*(pSPI->SPI_CSR + cs) = val;
3735:./include/lib_AT91SAM7A3.h **** }
3736:./include/lib_AT91SAM7A3.h **** 
3737:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3738:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SPI_EnableIt
3739:./include/lib_AT91SAM7A3.h **** //* \brief Enable SPI interrupt
3740:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3741:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SPI_EnableIt (
3742:./include/lib_AT91SAM7A3.h **** 	AT91PS_SPI pSPI,     // pointer to a SPI controller
3743:./include/lib_AT91SAM7A3.h **** 	unsigned int flag)   // IT to be enabled
3744:./include/lib_AT91SAM7A3.h **** {
3745:./include/lib_AT91SAM7A3.h **** 	//* Write to the IER register
3746:./include/lib_AT91SAM7A3.h **** 	pSPI->SPI_IER = flag;
3747:./include/lib_AT91SAM7A3.h **** }
3748:./include/lib_AT91SAM7A3.h **** 
3749:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3750:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SPI_DisableIt
3751:./include/lib_AT91SAM7A3.h **** //* \brief Disable SPI interrupt
3752:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3753:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SPI_DisableIt (
3754:./include/lib_AT91SAM7A3.h **** 	AT91PS_SPI pSPI, // pointer to a SPI controller
3755:./include/lib_AT91SAM7A3.h **** 	unsigned int flag) // IT to be disabled
3756:./include/lib_AT91SAM7A3.h **** {
3757:./include/lib_AT91SAM7A3.h **** 	//* Write to the IDR register
3758:./include/lib_AT91SAM7A3.h **** 	pSPI->SPI_IDR = flag;
3759:./include/lib_AT91SAM7A3.h **** }
3760:./include/lib_AT91SAM7A3.h **** 
3761:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3762:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SPI_Reset
3763:./include/lib_AT91SAM7A3.h **** //* \brief Reset the SPI controller
3764:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3765:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SPI_Reset (
3766:./include/lib_AT91SAM7A3.h **** 	AT91PS_SPI pSPI // pointer to a SPI controller
3767:./include/lib_AT91SAM7A3.h **** 	)
3768:./include/lib_AT91SAM7A3.h **** {
3769:./include/lib_AT91SAM7A3.h **** 	//* Write to the CR register
3770:./include/lib_AT91SAM7A3.h **** 	pSPI->SPI_CR = AT91C_SPI_SWRST;
  44              		.loc 2 3770 0
  45 0008 0C4B     		ldr	r3, .L2+4
  46 000a 8022     		mov	r2, #128
  47 000c 1A60     		str	r2, [r3]
  48              	.LVL2:
  49              	.LBE36:
  50              	.LBE35:
  51              	.LBB37:
  52              	.LBB38:
3771:./include/lib_AT91SAM7A3.h **** }
3772:./include/lib_AT91SAM7A3.h **** 
3773:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3774:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SPI_Enable
3775:./include/lib_AT91SAM7A3.h **** //* \brief Enable the SPI controller
3776:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3777:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SPI_Enable (
3778:./include/lib_AT91SAM7A3.h **** 	AT91PS_SPI pSPI // pointer to a SPI controller
3779:./include/lib_AT91SAM7A3.h **** 	)
3780:./include/lib_AT91SAM7A3.h **** {
3781:./include/lib_AT91SAM7A3.h **** 	//* Write to the CR register
3782:./include/lib_AT91SAM7A3.h **** 	pSPI->SPI_CR = AT91C_SPI_SPIEN;
3783:./include/lib_AT91SAM7A3.h **** }
3784:./include/lib_AT91SAM7A3.h **** 
3785:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3786:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SPI_Disable
3787:./include/lib_AT91SAM7A3.h **** //* \brief Disable the SPI controller
3788:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3789:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SPI_Disable (
3790:./include/lib_AT91SAM7A3.h **** 	AT91PS_SPI pSPI // pointer to a SPI controller
3791:./include/lib_AT91SAM7A3.h **** 	)
3792:./include/lib_AT91SAM7A3.h **** {
3793:./include/lib_AT91SAM7A3.h **** 	//* Write to the CR register
3794:./include/lib_AT91SAM7A3.h **** 	pSPI->SPI_CR = AT91C_SPI_SPIDIS;
3795:./include/lib_AT91SAM7A3.h **** }
3796:./include/lib_AT91SAM7A3.h **** 
3797:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3798:./include/lib_AT91SAM7A3.h **** //* \fn    AT91F_SPI_CfgMode
3799:./include/lib_AT91SAM7A3.h **** //* \brief Enable the SPI controller
3800:./include/lib_AT91SAM7A3.h **** //*----------------------------------------------------------------------------
3801:./include/lib_AT91SAM7A3.h **** __inline void AT91F_SPI_CfgMode (
3802:./include/lib_AT91SAM7A3.h **** 	AT91PS_SPI pSPI, // pointer to a SPI controller
3803:./include/lib_AT91SAM7A3.h **** 	int mode)        // mode register 
3804:./include/lib_AT91SAM7A3.h **** {
3805:./include/lib_AT91SAM7A3.h **** 	//* Write to the MR register
3806:./include/lib_AT91SAM7A3.h **** 	pSPI->SPI_MR = mode;
  53              		.loc 2 3806 0
  54 000e 0122     		mov	r2, #1
  55 0010 5A60     		str	r2, [r3, #4]
  56              	.LVL3:
  57              	.LBE38:
  58              	.LBE37:
  59              	.LBB39:
  60              	.LBB40:
3734:./include/lib_AT91SAM7A3.h **** 	*(pSPI->SPI_CSR + cs) = val;
  61              		.loc 2 3734 0
  62 0012 0B49     		ldr	r1, .L2+8
  63 0014 1963     		str	r1, [r3, #48]
  64              	.LVL4:
  65              	.LBE40:
  66              	.LBE39:
  67              	.LBB41:
  68              	.LBB42:
  69 0016 0B49     		ldr	r1, .L2+12
  70 0018 5963     		str	r1, [r3, #52]
  71              	.LVL5:
  72              	.LBE42:
  73              	.LBE41:
  74              	.LBB43:
  75              	.LBB44:
3782:./include/lib_AT91SAM7A3.h **** 	pSPI->SPI_CR = AT91C_SPI_SPIEN;
  76              		.loc 2 3782 0
  77 001a 1A60     		str	r2, [r3]
  78              	.LVL6:
  79              	.LBE44:
  80              	.LBE43:
  81              	.LBB45:
  82              	.LBB46:
 232:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_TNPR = (unsigned int) address;
  83              		.loc 2 232 0
  84 001c 0A4B     		ldr	r3, .L2+16
  85 001e 0022     		mov	r2, #0
  86 0020 9A61     		str	r2, [r3, #24]
 233:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_TNCR = bytes;
  87              		.loc 2 233 0
  88 0022 DA61     		str	r2, [r3, #28]
  89              	.LVL7:
  90              	.LBE46:
  91              	.LBE45:
  92              	.LBB47:
  93              	.LBB48:
 219:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_RNPR = (unsigned int) address;
  94              		.loc 2 219 0
  95 0024 1A61     		str	r2, [r3, #16]
 220:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_RNCR = bytes;
  96              		.loc 2 220 0
  97 0026 5A61     		str	r2, [r3, #20]
  98              	.LVL8:
  99              	.LBE48:
 100              	.LBE47:
 101              	.LBB49:
 102              	.LBB50:
 258:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_TPR = (unsigned int) address;
 103              		.loc 2 258 0
 104 0028 9A60     		str	r2, [r3, #8]
 259:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_TCR = bytes;
 105              		.loc 2 259 0
 106 002a DA60     		str	r2, [r3, #12]
 107              	.LVL9:
 108              	.LBE50:
 109              	.LBE49:
 110              	.LBB51:
 111              	.LBB52:
 245:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_RPR = (unsigned int) address;
 112              		.loc 2 245 0
 113 002c 1A60     		str	r2, [r3]
 246:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_RCR = bytes;
 114              		.loc 2 246 0
 115 002e 5A60     		str	r2, [r3, #4]
 116              	.LBE52:
 117              	.LBE51:
  18:Power.c       **** 
  19:Power.c       **** // enable spi
  20:Power.c       **** // enable the clock of the SPI1
  21:Power.c       **** AT91F_SPI1_CfgPMC();
  22:Power.c       **** AT91F_SPI_Reset( AT91C_BASE_SPI1 );
  23:Power.c       **** 
  24:Power.c       **** // set SPI master mode before configuring CS (errata 40.4.4 clock can toggle before first transfer)
  25:Power.c       **** AT91F_SPI_CfgMode( AT91C_BASE_SPI1, AT91C_SPI_MSTR );
  26:Power.c       **** 
  27:Power.c       **** // set configuration for CS0 - FLASH
  28:Power.c       **** AT91F_SPI_CfgCs( AT91C_BASE_SPI1,
  29:Power.c       ****   0, // CS0
  30:Power.c       ****   AT91C_SPI_CPOL |
  31:Power.c       ****   AT91C_SPI_BITS_8 | 
  32:Power.c       ****   (AT91C_SPI_DLYBS & (10 << 16)) | // 10 / mck, 10 / 47923200 = 209nS
  33:Power.c       ****   (AT91C_SPI_SCBR & (3 << 8)) ); // mck / 3, 47.923200 / 3 = 15.9744MHz
  34:Power.c       **** 
  35:Power.c       **** // set configuration for CS1 - ATOD
  36:Power.c       **** AT91F_SPI_CfgCs( AT91C_BASE_SPI1,
  37:Power.c       ****   1, // CS1
  38:Power.c       ****   /*AT91C_SPI_CPOL |*/ 
  39:Power.c       ****   /*AT91C_SPI_NCPHA |*/
  40:Power.c       ****   // because of errata 40.2.6.3 now use cs manually for reads
  41:Power.c       ****   /*AT91C_SPI_CSAAT |*/ // leave chip select low
  42:Power.c       ****   AT91C_SPI_BITS_8 |
  43:Power.c       ****   /*(AT91C_SPI_DLYBCT &(10 << 24)) |*/  // 32 * 10 / mck, 320 / 47923200 = 6.68uS
  44:Power.c       ****   (AT91C_SPI_DLYBS & (10 << 16)) | // 10 / mck, 10 / 47923200 = 209nS
  45:Power.c       ****   (AT91C_SPI_SCBR & (25 << 8)) ); // mck / 25, 47.923200 / 25 = 1.916928MHz
  46:Power.c       ****  
  47:Power.c       **** AT91F_SPI_Enable( AT91C_BASE_SPI1 );
  48:Power.c       **** 
  49:Power.c       **** // clear PDC buffers of SPI1
  50:Power.c       **** AT91F_PDC_SetNextTx( AT91C_BASE_PDC_SPI1, (char *) 0, 0);
  51:Power.c       **** AT91F_PDC_SetNextRx( AT91C_BASE_PDC_SPI1, (char *) 0, 0);
  52:Power.c       **** AT91F_PDC_SetTx( AT91C_BASE_PDC_SPI1, (char *) 0, 0);
  53:Power.c       **** AT91F_PDC_SetRx( AT91C_BASE_PDC_SPI1, (char *) 0, 0);
  54:Power.c       ****   
  55:Power.c       **** //AT91F_PDC_EnableTx( AT91C_BASE_PDC_SPI1 ); // enable DMA transfers
  56:Power.c       **** //AT91F_PDC_EnableRx( AT91C_BASE_PDC_SPI1 ); // enable DMA transfers
  57:Power.c       **** AT91C_BASE_PDC_SPI1->PDC_PTCR = AT91C_PDC_RXTEN | AT91C_PDC_TXTEN; // Enable RX/TX DMA Transfers
 118              		.loc 1 57 0
 119 0030 064A     		ldr	r2, .L2+20
 120 0032 1A62     		str	r2, [r3, #32]
  58:Power.c       **** 
  59:Power.c       **** }
 121              		.loc 1 59 0
 122              		@ sp needed for prologue
 123 0034 7047     		bx	lr
 124              	.L3:
 125 0036 C046     		.align	2
 126              	.L2:
 127 0038 00FCFFFF 		.word	-1024
 128 003c 0040FEFF 		.word	-114688
 129 0040 01030A00 		.word	656129
 130 0044 00190A00 		.word	661760
 131 0048 0041FEFF 		.word	-114432
 132 004c 01010000 		.word	257
 133              		.cfi_endproc
 134              	.LFE376:
 136              		.section	.text.SPI1TransferData,"ax",%progbits
 137              		.align	2
 138              		.global	SPI1TransferData
 139              		.code	16
 140              		.thumb_func
 142              	SPI1TransferData:
 143              	.LFB377:
  60:Power.c       **** /*-----------------------------------------------------------*/
  61:Power.c       **** 
  62:Power.c       **** 
  63:Power.c       **** /*-----------------------------------------------------------*/
  64:Power.c       **** void SPI1TransferData( unsigned int device, unsigned char *data, unsigned short int length )
  65:Power.c       **** {
 144              		.loc 1 65 0
 145              		.cfi_startproc
 146              	.LVL10:
 147 0000 30B5     		push	{r4, r5, lr}
 148              	.LCFI0:
 149              		.cfi_def_cfa_offset 12
 150              		.cfi_offset 4, -12
 151              		.cfi_offset 5, -8
 152              		.cfi_offset 14, -4
  66:Power.c       **** 
  67:Power.c       **** // wait until SPI PDC ready
  68:Power.c       **** while( !(AT91C_BASE_SPI1->SPI_SR & AT91C_SPI_TXBUFE) ) // set when TCR & TNCR both 0
 153              		.loc 1 68 0
 154 0002 0A4D     		ldr	r5, .L9
 155 0004 8024     		mov	r4, #128
 156              	.L5:
 157              		.loc 1 68 0 is_stmt 0 discriminator 1
 158 0006 2B69     		ldr	r3, [r5, #16]
 159 0008 1C42     		tst	r4, r3
 160 000a FCD0     		beq	.L5
  69:Power.c       ****   {
  70:Power.c       ****   }
  71:Power.c       **** 
  72:Power.c       **** AT91C_BASE_SPI1->SPI_MR = device;
 161              		.loc 1 72 0 is_stmt 1
 162 000c 074B     		ldr	r3, .L9
 163 000e 5860     		str	r0, [r3, #4]
 164              	.LVL11:
 165              	.LBB53:
 166              	.LBB54:
 245:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_RPR = (unsigned int) address;
 167              		.loc 2 245 0
 168 0010 074B     		ldr	r3, .L9+4
 169 0012 1960     		str	r1, [r3]
 246:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_RCR = bytes;
 170              		.loc 2 246 0
 171 0014 5A60     		str	r2, [r3, #4]
 172              	.LVL12:
 173              	.LBE54:
 174              	.LBE53:
 175              	.LBB55:
 176              	.LBB56:
 258:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_TPR = (unsigned int) address;
 177              		.loc 2 258 0
 178 0016 9960     		str	r1, [r3, #8]
 259:./include/lib_AT91SAM7A3.h **** 	pPDC->PDC_TCR = bytes;
 179              		.loc 2 259 0
 180 0018 DA60     		str	r2, [r3, #12]
 181              	.LBE56:
 182              	.LBE55:
  73:Power.c       ****   
  74:Power.c       **** // receive data
  75:Power.c       **** AT91F_PDC_SetRx( AT91C_BASE_PDC_SPI1, data, length );
  76:Power.c       **** // send data
  77:Power.c       **** AT91F_PDC_SetTx( AT91C_BASE_PDC_SPI1, data, length );
  78:Power.c       **** 
  79:Power.c       **** // wait until SPI PDC ready
  80:Power.c       **** while( !(AT91C_BASE_SPI1->SPI_SR & AT91C_SPI_RXBUFF) ) // set when RCR & RNCR both 0
 183              		.loc 1 80 0
 184 001a 0449     		ldr	r1, .L9
 185              	.LVL13:
 186 001c 4022     		mov	r2, #64
 187              	.LVL14:
 188              	.L6:
 189              		.loc 1 80 0 is_stmt 0 discriminator 1
 190 001e 0B69     		ldr	r3, [r1, #16]
 191 0020 1A42     		tst	r2, r3
 192 0022 FCD0     		beq	.L6
  81:Power.c       ****   {
  82:Power.c       ****   }
  83:Power.c       ****   
  84:Power.c       **** }
 193              		.loc 1 84 0 is_stmt 1
 194              		@ sp needed for prologue
 195 0024 30BC     		pop	{r4, r5}
 196 0026 01BC     		pop	{r0}
 197 0028 0047     		bx	r0
 198              	.L10:
 199 002a C046     		.align	2
 200              	.L9:
 201 002c 0040FEFF 		.word	-114688
 202 0030 0041FEFF 		.word	-114432
 203              		.cfi_endproc
 204              	.LFE377:
 206              		.section	.text.SPI1FlashRead,"ax",%progbits
 207              		.align	2
 208              		.global	SPI1FlashRead
 209              		.code	16
 210              		.thumb_func
 212              	SPI1FlashRead:
 213              	.LFB378:
  85:Power.c       **** /*-----------------------------------------------------------*/
  86:Power.c       **** 
  87:Power.c       **** 
  88:Power.c       **** /*-----------------------------------------------------------*/
  89:Power.c       **** void SPI1FlashRead( unsigned long int address, unsigned char *data, unsigned short int length )
  90:Power.c       **** {
 214              		.loc 1 90 0
 215              		.cfi_startproc
 216              	.LVL15:
 217 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 218              	.LCFI1:
 219              		.cfi_def_cfa_offset 20
 220              		.cfi_offset 4, -20
 221              		.cfi_offset 5, -16
 222              		.cfi_offset 6, -12
 223              		.cfi_offset 7, -8
 224              		.cfi_offset 14, -4
 225 0002 4746     		mov	r7, r8
 226 0004 80B4     		push	{r7}
 227              	.LCFI2:
 228              		.cfi_def_cfa_offset 24
 229              		.cfi_offset 8, -24
 230 0006 061C     		mov	r6, r0
 231 0008 0F1C     		mov	r7, r1
 232 000a 151C     		mov	r5, r2
 233              	.LVL16:
  91:Power.c       **** unsigned char ReadMemoryAllocationFailed;
  92:Power.c       **** unsigned char *pts;
  93:Power.c       **** unsigned int ui;
  94:Power.c       **** 
  95:Power.c       **** ReadMemoryAllocationFailed = 0;
  96:Power.c       **** 
  97:Power.c       **** #ifdef DEVELOP // Testing memory
  98:Power.c       **** TestOutputReadMemAllocFail = 0; // Test output
  99:Power.c       **** #endif
 100:Power.c       **** 
 101:Power.c       **** pts = (unsigned char *)pvPortMalloc( length + 4 );
 234              		.loc 1 101 0
 235 000c 101D     		add	r0, r2, #4
 236              	.LVL17:
 237 000e FFF7FEFF 		bl	pvPortMalloc
 238              	.LVL18:
 239 0012 041C     		mov	r4, r0
 240              	.LVL19:
 102:Power.c       **** if( pts == NULL )
 241              		.loc 1 102 0
 242 0014 0028     		cmp	r0, #0
 243 0016 02D0     		beq	.L15
  95:Power.c       **** ReadMemoryAllocationFailed = 0;
 244              		.loc 1 95 0
 245 0018 0023     		mov	r3, #0
 246 001a 9846     		mov	r8, r3
 247 001c 02E0     		b	.L12
 248              	.L15:
 103:Power.c       ****   {
 104:Power.c       ****   pts = buffer; // use display buffer if allocation fails
 249              		.loc 1 104 0
 250 001e 124C     		ldr	r4, .L16
 105:Power.c       ****   ReadMemoryAllocationFailed = 1;
 251              		.loc 1 105 0
 252 0020 0123     		mov	r3, #1
 253 0022 9846     		mov	r8, r3
 254              	.L12:
 255              	.LVL20:
 106:Power.c       ****   
 107:Power.c       **** #ifdef DEVELOP // Testing memory
 108:Power.c       ****   TestOutputReadMemAllocFail = 1; // Test output
 109:Power.c       **** #endif
 110:Power.c       ****   
 111:Power.c       ****   }
 112:Power.c       **** 	
 113:Power.c       **** pts[0] = SFC_READ;
 256              		.loc 1 113 0
 257 0024 0323     		mov	r3, #3
 258 0026 2370     		strb	r3, [r4]
 259              	.LVL21:
 114:Power.c       **** ui = address / 0x010000;
 260              		.loc 1 114 0
 261 0028 330C     		lsr	r3, r6, #16
 262              	.LVL22:
 115:Power.c       **** pts[1] = ui % 0x100;
 263              		.loc 1 115 0
 264 002a 6370     		strb	r3, [r4, #1]
 116:Power.c       **** ui = address % 0x010000;
 265              		.loc 1 116 0
 266 002c 3604     		lsl	r6, r6, #16
 267              	.LVL23:
 268 002e 330C     		lsr	r3, r6, #16
 269              	.LVL24:
 117:Power.c       **** pts[2] = ui / 0x100;
 270              		.loc 1 117 0
 271 0030 360E     		lsr	r6, r6, #24
 272 0032 A670     		strb	r6, [r4, #2]
 118:Power.c       **** pts[3] = ui % 0x100;
 273              		.loc 1 118 0
 274 0034 E370     		strb	r3, [r4, #3]
 119:Power.c       **** 
 120:Power.c       **** // set SPI1 chip select for Flash Chip
 121:Power.c       **** SPI1TransferData( SPI1_FLASH_MODE, pts, length + 4 ); // Read All
 275              		.loc 1 121 0
 276 0036 2A1D     		add	r2, r5, #4
 277 0038 1204     		lsl	r2, r2, #16
 278 003a 120C     		lsr	r2, r2, #16
 279 003c 0120     		mov	r0, #1
 280 003e 211C     		mov	r1, r4
 281 0040 FFF7FEFF 		bl	SPI1TransferData
 282              	.LVL25:
 122:Power.c       **** 
 123:Power.c       **** if( data != (unsigned char *)NULL )
 283              		.loc 1 123 0
 284 0044 002F     		cmp	r7, #0
 285 0046 04D0     		beq	.L13
 124:Power.c       ****   {
 125:Power.c       ****   memcpy( data, &pts[4], length );  
 286              		.loc 1 125 0
 287 0048 211D     		add	r1, r4, #4
 288 004a 381C     		mov	r0, r7
 289 004c 2A1C     		mov	r2, r5
 290 004e FFF7FEFF 		bl	memcpy
 291              	.LVL26:
 292              	.L13:
 126:Power.c       ****   }
 127:Power.c       **** 
 128:Power.c       **** if(!ReadMemoryAllocationFailed)
 293              		.loc 1 128 0
 294 0052 4346     		mov	r3, r8
 295 0054 002B     		cmp	r3, #0
 296 0056 02D1     		bne	.L11
 297              	.LVL27:
 129:Power.c       ****   vPortFree( (void *)pts );
 298              		.loc 1 129 0
 299 0058 201C     		mov	r0, r4
 300 005a FFF7FEFF 		bl	vPortFree
 301              	.LVL28:
 302              	.L11:
 130:Power.c       **** 	
 131:Power.c       **** }
 303              		.loc 1 131 0
 304              		@ sp needed for prologue
 305              	.LVL29:
 306              	.LVL30:
 307              	.LVL31:
 308 005e 04BC     		pop	{r2}
 309 0060 9046     		mov	r8, r2
 310 0062 F0BC     		pop	{r4, r5, r6, r7}
 311 0064 01BC     		pop	{r0}
 312 0066 0047     		bx	r0
 313              	.L17:
 314              		.align	2
 315              	.L16:
 316 0068 00000000 		.word	buffer
 317              		.cfi_endproc
 318              	.LFE378:
 320              		.section	.text.SPI1FlashWrite,"ax",%progbits
 321              		.align	2
 322              		.global	SPI1FlashWrite
 323              		.code	16
 324              		.thumb_func
 326              	SPI1FlashWrite:
 327              	.LFB379:
 132:Power.c       **** /*-----------------------------------------------------------*/
 133:Power.c       **** 
 134:Power.c       **** 
 135:Power.c       **** /*-----------------------------------------------------------*/
 136:Power.c       **** void SPI1FlashWrite( unsigned char command, unsigned long int address, unsigned char *data, unsigne
 137:Power.c       **** {
 328              		.loc 1 137 0
 329              		.cfi_startproc
 330              	.LVL32:
 331 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 332              	.LCFI3:
 333              		.cfi_def_cfa_offset 20
 334              		.cfi_offset 4, -20
 335              		.cfi_offset 5, -16
 336              		.cfi_offset 6, -12
 337              		.cfi_offset 7, -8
 338              		.cfi_offset 14, -4
 339 0002 5F46     		mov	r7, fp
 340 0004 5646     		mov	r6, sl
 341 0006 4D46     		mov	r5, r9
 342 0008 4446     		mov	r4, r8
 343 000a F0B4     		push	{r4, r5, r6, r7}
 344              	.LCFI4:
 345              		.cfi_def_cfa_offset 36
 346              		.cfi_offset 8, -36
 347              		.cfi_offset 9, -32
 348              		.cfi_offset 10, -28
 349              		.cfi_offset 11, -24
 350 000c 83B0     		sub	sp, sp, #12
 351              	.LCFI5:
 352              		.cfi_def_cfa_offset 48
 353 000e 8346     		mov	fp, r0
 354 0010 8946     		mov	r9, r1
 355 0012 151C     		mov	r5, r2
 356 0014 9846     		mov	r8, r3
 357              	.LVL33:
 138:Power.c       **** unsigned char WriteMemoryAllocationFailed;
 139:Power.c       **** unsigned char *ptd;
 140:Power.c       **** unsigned int ui, towrite;
 141:Power.c       **** 
 142:Power.c       **** WriteMemoryAllocationFailed = 0;
 143:Power.c       **** 
 144:Power.c       **** #ifdef DEVELOP // Testing memory
 145:Power.c       **** TestOutputWriteMemAllocFail = 0; // Test output
 146:Power.c       **** #endif
 147:Power.c       **** 
 148:Power.c       **** ptd = (unsigned char *)pvPortMalloc( length + 4 );
 358              		.loc 1 148 0
 359 0016 181C     		mov	r0, r3
 360              	.LVL34:
 361 0018 0430     		add	r0, r0, #4
 362 001a FFF7FEFF 		bl	pvPortMalloc
 363              	.LVL35:
 364 001e 041C     		mov	r4, r0
 365              	.LVL36:
 149:Power.c       **** if( ptd == NULL )
 366              		.loc 1 149 0
 367 0020 0028     		cmp	r0, #0
 368 0022 02D0     		beq	.L29
 142:Power.c       **** WriteMemoryAllocationFailed = 0;
 369              		.loc 1 142 0
 370 0024 0022     		mov	r2, #0
 371 0026 0192     		str	r2, [sp, #4]
 372 0028 02E0     		b	.L27
 373              	.L29:
 150:Power.c       ****   {
 151:Power.c       ****   ptd = buffer; // use display buffer if allocation fails
 374              		.loc 1 151 0
 375 002a 334C     		ldr	r4, .L38
 152:Power.c       ****   WriteMemoryAllocationFailed = 1;
 376              		.loc 1 152 0
 377 002c 0123     		mov	r3, #1
 378 002e 0193     		str	r3, [sp, #4]
 379              	.L27:
 153:Power.c       ****   
 154:Power.c       **** #ifdef DEVELOP // Testing memory
 155:Power.c       ****   TestOutputWriteMemAllocFail = 1; // Test output
 156:Power.c       **** #endif
 157:Power.c       ****   
 158:Power.c       ****   }
 159:Power.c       **** 
 160:Power.c       **** // loop for multiples of 256 bytes if data pointer passed to function and length > 256
 161:Power.c       **** do
 162:Power.c       ****   {
 163:Power.c       ****   // send write enable as single byte, cs needs to return high
 164:Power.c       ****   ptd[0] = SFC_WREN; // Write Enable
 165:Power.c       ****   // set SPI1 chip select for Flash Chip
 166:Power.c       ****   SPI1TransferData( SPI1_FLASH_MODE, ptd, 1 ); // send 1 byte
 167:Power.c       **** 	
 168:Power.c       ****   ptd[0] = command;
 169:Power.c       ****   ui = address / 0x010000;
 170:Power.c       ****   ptd[1] = ui % 0x100;
 171:Power.c       ****   ui = address % 0x010000;
 172:Power.c       ****   ptd[2] = ui / 0x100;
 173:Power.c       ****   ptd[3] = ui % 0x100;
 174:Power.c       **** 
 175:Power.c       ****   towrite = 4;
 176:Power.c       ****   
 177:Power.c       ****   // no data to send?
 178:Power.c       ****   if( data != (unsigned char *)NULL )
 179:Power.c       ****     {
 180:Power.c       ****     if( length > 256 )
 380              		.loc 1 180 0
 381 0030 8023     		mov	r3, #128
 382 0032 5B00     		lsl	r3, r3, #1
 383 0034 9A46     		mov	sl, r3
 181:Power.c       ****       {
 182:Power.c       **** 	  towrite += 256;
 183:Power.c       ****       }
 184:Power.c       ****     else
 185:Power.c       ****       {
 186:Power.c       ****       towrite += length;
 187:Power.c       ****       }
 188:Power.c       **** 	
 189:Power.c       ****     for( ui = 4; ui < towrite; ui++ )
 190:Power.c       ****       {
 191:Power.c       ****       ptd[ui] = *data++;
 192:Power.c       ****       }
 193:Power.c       ****     }
 194:Power.c       **** 
 195:Power.c       ****   // set SPI1 chip select for Flash Chip
 196:Power.c       ****   SPI1TransferData( SPI1_FLASH_MODE, ptd, towrite ); // Write Command & Page
 197:Power.c       ****   
 198:Power.c       ****   if( length > 256 )
 199:Power.c       ****     {
 200:Power.c       ****     length -= 256;
 201:Power.c       ****     address += 256;
 202:Power.c       ****     }
 203:Power.c       ****   else
 204:Power.c       ****     {
 205:Power.c       ****     length = 0;
 384              		.loc 1 205 0
 385 0036 4646     		mov	r6, r8
 386 0038 C846     		mov	r8, r9
 387              	.LVL37:
 388              	.L32:
 164:Power.c       ****   ptd[0] = SFC_WREN; // Write Enable
 389              		.loc 1 164 0
 390 003a 0622     		mov	r2, #6
 391 003c 2270     		strb	r2, [r4]
 166:Power.c       ****   SPI1TransferData( SPI1_FLASH_MODE, ptd, 1 ); // send 1 byte
 392              		.loc 1 166 0
 393 003e 0120     		mov	r0, #1
 394 0040 211C     		mov	r1, r4
 395 0042 0122     		mov	r2, #1
 396 0044 FFF7FEFF 		bl	SPI1TransferData
 397              	.LVL38:
 168:Power.c       ****   ptd[0] = command;
 398              		.loc 1 168 0
 399 0048 5B46     		mov	r3, fp
 400 004a 2370     		strb	r3, [r4]
 401              	.LVL39:
 169:Power.c       ****   ui = address / 0x010000;
 402              		.loc 1 169 0
 403 004c 4246     		mov	r2, r8
 404 004e 130C     		lsr	r3, r2, #16
 405              	.LVL40:
 170:Power.c       ****   ptd[1] = ui % 0x100;
 406              		.loc 1 170 0
 407 0050 6370     		strb	r3, [r4, #1]
 171:Power.c       ****   ui = address % 0x010000;
 408              		.loc 1 171 0
 409 0052 1304     		lsl	r3, r2, #16
 410              	.LVL41:
 411 0054 1A0C     		lsr	r2, r3, #16
 412              	.LVL42:
 172:Power.c       ****   ptd[2] = ui / 0x100;
 413              		.loc 1 172 0
 414 0056 1B0E     		lsr	r3, r3, #24
 415 0058 A370     		strb	r3, [r4, #2]
 173:Power.c       ****   ptd[3] = ui % 0x100;
 416              		.loc 1 173 0
 417 005a E270     		strb	r2, [r4, #3]
 418              	.LVL43:
 178:Power.c       ****   if( data != (unsigned char *)NULL )
 419              		.loc 1 178 0
 420 005c 002D     		cmp	r5, #0
 421 005e 10D0     		beq	.L30
 180:Power.c       ****     if( length > 256 )
 422              		.loc 1 180 0
 423 0060 5645     		cmp	r6, sl
 424 0062 03D9     		bls	.L21
 182:Power.c       **** 	  towrite += 256;
 425              		.loc 1 182 0
 426 0064 8222     		mov	r2, #130
 427              	.LVL44:
 428 0066 5200     		lsl	r2, r2, #1
 429              	.LVL45:
 430              	.L23:
 182:Power.c       **** 	  towrite += 256;
 431              		.loc 1 182 0 is_stmt 0 discriminator 2
 432 0068 0423     		mov	r3, #4
 433 006a 03E0     		b	.L22
 434              	.LVL46:
 435              	.L21:
 186:Power.c       ****       towrite += length;
 436              		.loc 1 186 0 is_stmt 1
 437 006c 321D     		add	r2, r6, #4
 438              	.LVL47:
 189:Power.c       ****     for( ui = 4; ui < towrite; ui++ )
 439              		.loc 1 189 0
 440 006e 042A     		cmp	r2, #4
 441 0070 FAD8     		bhi	.L23
 442 0072 2FE0     		b	.L37
 443              	.LVL48:
 444              	.L22:
 191:Power.c       ****       ptd[ui] = *data++;
 445              		.loc 1 191 0 discriminator 2
 446 0074 2978     		ldrb	r1, [r5]
 447 0076 E154     		strb	r1, [r4, r3]
 448 0078 0135     		add	r5, r5, #1
 449              	.LVL49:
 189:Power.c       ****     for( ui = 4; ui < towrite; ui++ )
 450              		.loc 1 189 0 discriminator 2
 451 007a 0133     		add	r3, r3, #1
 452              	.LVL50:
 453 007c 9A42     		cmp	r2, r3
 454 007e F9D8     		bhi	.L22
 455 0080 00E0     		b	.L20
 456              	.LVL51:
 457              	.L30:
 175:Power.c       ****   towrite = 4;
 458              		.loc 1 175 0
 459 0082 0422     		mov	r2, #4
 460              	.LVL52:
 461              	.L20:
 196:Power.c       ****   SPI1TransferData( SPI1_FLASH_MODE, ptd, towrite ); // Write Command & Page
 462              		.loc 1 196 0
 463 0084 1204     		lsl	r2, r2, #16
 464              	.LVL53:
 465 0086 120C     		lsr	r2, r2, #16
 466 0088 0120     		mov	r0, #1
 467 008a 211C     		mov	r1, r4
 468 008c FFF7FEFF 		bl	SPI1TransferData
 469              	.LVL54:
 198:Power.c       ****   if( length > 256 )
 470              		.loc 1 198 0
 471 0090 5645     		cmp	r6, sl
 472 0092 07D9     		bls	.L31
 200:Power.c       ****     length -= 256;
 473              		.loc 1 200 0
 474 0094 013E     		sub	r6, r6, #1
 475              	.LVL55:
 476 0096 FF3E     		sub	r6, r6, #255
 477              	.LVL56:
 478 0098 3604     		lsl	r6, r6, #16
 479              	.LVL57:
 480 009a 360C     		lsr	r6, r6, #16
 481              	.LVL58:
 201:Power.c       ****     address += 256;
 482              		.loc 1 201 0
 483 009c 8023     		mov	r3, #128
 484 009e 5B00     		lsl	r3, r3, #1
 485 00a0 9844     		add	r8, r8, r3
 486              	.LVL59:
 487 00a2 00E0     		b	.L26
 488              	.L31:
 489              		.loc 1 205 0
 490 00a4 0026     		mov	r6, #0
 491              	.LVL60:
 492              	.L26:
 206:Power.c       ****     }
 207:Power.c       ****   
 208:Power.c       ****   do
 209:Power.c       ****     {
 210:Power.c       ****     ptd[0] = SFC_RDSR; // Read Status Register
 493              		.loc 1 210 0 discriminator 1
 494 00a6 0522     		mov	r2, #5
 495 00a8 9146     		mov	r9, r2
 211:Power.c       ****     ptd[1] = 0xff;
 496              		.loc 1 211 0 discriminator 1
 497 00aa FF27     		mov	r7, #255
 498              	.L33:
 499              	.LVL61:
 210:Power.c       ****     ptd[0] = SFC_RDSR; // Read Status Register
 500              		.loc 1 210 0 discriminator 1
 501 00ac 4B46     		mov	r3, r9
 502 00ae 2370     		strb	r3, [r4]
 503              		.loc 1 211 0 discriminator 1
 504 00b0 6770     		strb	r7, [r4, #1]
 212:Power.c       ****     // set SPI1 chip select for Flash Chip
 213:Power.c       ****     SPI1TransferData( SPI1_FLASH_MODE, ptd, 2 );
 505              		.loc 1 213 0 discriminator 1
 506 00b2 0120     		mov	r0, #1
 507 00b4 211C     		mov	r1, r4
 508 00b6 0222     		mov	r2, #2
 509 00b8 FFF7FEFF 		bl	SPI1TransferData
 510              	.LVL62:
 214:Power.c       ****     }
 215:Power.c       ****   while( ptd[1] & SFS_WIP ); // check WIP bit (write in progress) and loop until clear
 511              		.loc 1 215 0 discriminator 1
 512 00bc 6378     		ldrb	r3, [r4, #1]
 513 00be DA07     		lsl	r2, r3, #31
 514 00c0 F4D4     		bmi	.L33
 216:Power.c       ****   
 217:Power.c       ****   }
 218:Power.c       **** while( length != 0 );
 515              		.loc 1 218 0
 516 00c2 002E     		cmp	r6, #0
 517 00c4 B9D1     		bne	.L32
 219:Power.c       **** 
 220:Power.c       **** if(!WriteMemoryAllocationFailed)
 518              		.loc 1 220 0
 519 00c6 019B     		ldr	r3, [sp, #4]
 520 00c8 002B     		cmp	r3, #0
 521 00ca 0BD1     		bne	.L18
 221:Power.c       ****   vPortFree( (void *)ptd );	
 522              		.loc 1 221 0
 523 00cc 201C     		mov	r0, r4
 524 00ce FFF7FEFF 		bl	vPortFree
 525              	.LVL63:
 526 00d2 07E0     		b	.L18
 527              	.LVL64:
 528              	.L37:
 196:Power.c       ****   SPI1TransferData( SPI1_FLASH_MODE, ptd, towrite ); // Write Command & Page
 529              		.loc 1 196 0
 530 00d4 1204     		lsl	r2, r2, #16
 531              	.LVL65:
 532 00d6 120C     		lsr	r2, r2, #16
 533 00d8 0120     		mov	r0, #1
 534 00da 211C     		mov	r1, r4
 535 00dc FFF7FEFF 		bl	SPI1TransferData
 536              	.LVL66:
 205:Power.c       ****     length = 0;
 537              		.loc 1 205 0
 538 00e0 0026     		mov	r6, #0
 539              	.LVL67:
 540 00e2 E0E7     		b	.L26
 541              	.LVL68:
 542              	.L18:
 222:Power.c       **** 	
 223:Power.c       **** }
 543              		.loc 1 223 0
 544 00e4 03B0     		add	sp, sp, #12
 545              		@ sp needed for prologue
 546              	.LVL69:
 547              	.LVL70:
 548              	.LVL71:
 549              	.LVL72:
 550 00e6 3CBC     		pop	{r2, r3, r4, r5}
 551 00e8 9046     		mov	r8, r2
 552 00ea 9946     		mov	r9, r3
 553 00ec A246     		mov	sl, r4
 554 00ee AB46     		mov	fp, r5
 555 00f0 F0BC     		pop	{r4, r5, r6, r7}
 556 00f2 01BC     		pop	{r0}
 557 00f4 0047     		bx	r0
 558              	.L39:
 559 00f6 C046     		.align	2
 560              	.L38:
 561 00f8 00000000 		.word	buffer
 562              		.cfi_endproc
 563              	.LFE379:
 565              		.section	.text.vPowerTask,"ax",%progbits
 566              		.align	2
 567              		.code	16
 568              		.thumb_func
 570              	vPowerTask:
 571              	.LFB380:
 224:Power.c       **** /*-----------------------------------------------------------*/
 225:Power.c       **** 
 226:Power.c       **** 
 227:Power.c       **** /*-----------------------------------------------------------*/
 228:Power.c       **** //* Function Name       : vPowerTask
 229:Power.c       **** //* Object              : Save Totals to SPI Flash at power down
 230:Power.c       **** //* Output Parameters   :
 231:Power.c       **** /*-----------------------------------------------------------*/
 232:Power.c       **** static void vPowerTask( void *pvParameters )
 233:Power.c       **** {
 572              		.loc 1 233 0
 573              		.cfi_startproc
 574              	.LVL73:
 575 0000 70B5     		push	{r4, r5, r6, lr}
 576              	.LCFI6:
 577              		.cfi_def_cfa_offset 16
 578              		.cfi_offset 4, -16
 579              		.cfi_offset 5, -12
 580              		.cfi_offset 6, -8
 581              		.cfi_offset 14, -4
 234:Power.c       **** 
 235:Power.c       **** 	vTaskSuspendAll(); // stop task switching
 582              		.loc 1 235 0
 583 0002 FFF7FEFF 		bl	vTaskSuspendAll
 584              	.LVL74:
 236:Power.c       **** 
 237:Power.c       **** 	// test
 238:Power.c       **** 	AT91C_BASE_PIOA->PIO_SODR = TESTPIN;
 585              		.loc 1 238 0
 586 0006 4022     		mov	r2, #64
 587 0008 964B     		ldr	r3, .L62
 588 000a 1A63     		str	r2, [r3, #48]
 239:Power.c       **** 
 240:Power.c       **** 	// read factors from SPI1 Flash @ 0x000000
 241:Power.c       **** 	SPI1FlashRead( pFac_BASEADDRESS, &(pFac.ch[0]), sizeof(pFac.pf) );
 589              		.loc 1 241 0
 590 000c 964C     		ldr	r4, .L62+4
 591 000e 0020     		mov	r0, #0
 592 0010 211C     		mov	r1, r4
 593 0012 9022     		mov	r2, #144
 594 0014 5200     		lsl	r2, r2, #1
 595 0016 FFF7FEFF 		bl	SPI1FlashRead
 596              	.LVL75:
 242:Power.c       **** 
 243:Power.c       **** 	// checksum fail on main block ?
 244:Power.c       **** 	if( pFac.pf.CheckSum != CheckSumIt( &(pFac.ch[0]), (unsigned char *)&(pFac.pf.CheckSum) ) )
 597              		.loc 1 244 0
 598 001a 8E23     		mov	r3, #142
 599 001c 5B00     		lsl	r3, r3, #1
 600 001e E558     		ldr	r5, [r4, r3]
 601 0020 E118     		add	r1, r4, r3
 602 0022 201C     		mov	r0, r4
 603 0024 FFF7FEFF 		bl	CheckSumIt
 604              	.LVL76:
 605 0028 8542     		cmp	r5, r0
 606 002a 1BD0     		beq	.L41
 245:Power.c       **** 	{
 246:Power.c       **** 		// first block checksum fail, then try backup block
 247:Power.c       **** 		RunFactorStatus = RFS_CS1FAIL;
 607              		.loc 1 247 0
 608 002c 0122     		mov	r2, #1
 609 002e 8F4B     		ldr	r3, .L62+8
 610 0030 1A70     		strb	r2, [r3]
 248:Power.c       **** 
 249:Power.c       **** 		// read factors from backup block
 250:Power.c       **** 		SPI1FlashRead( pFac_BASEADDRESS + 0x800, &(pFac.ch[0]), sizeof(pFac.pf) );
 611              		.loc 1 250 0
 612 0032 8D4C     		ldr	r4, .L62+4
 613 0034 8020     		mov	r0, #128
 614 0036 0001     		lsl	r0, r0, #4
 615 0038 211C     		mov	r1, r4
 616 003a 9022     		mov	r2, #144
 617 003c 5200     		lsl	r2, r2, #1
 618 003e FFF7FEFF 		bl	SPI1FlashRead
 619              	.LVL77:
 251:Power.c       **** 
 252:Power.c       **** 		// checksum backup block
 253:Power.c       **** 		if( pFac.pf.CheckSum != CheckSumIt( &(pFac.ch[0]), (unsigned char *)&(pFac.pf.CheckSum) ) )
 620              		.loc 1 253 0
 621 0042 8E23     		mov	r3, #142
 622 0044 5B00     		lsl	r3, r3, #1
 623 0046 E558     		ldr	r5, [r4, r3]
 624 0048 E118     		add	r1, r4, r3
 625 004a 201C     		mov	r0, r4
 626 004c FFF7FEFF 		bl	CheckSumIt
 627              	.LVL78:
 628 0050 8542     		cmp	r5, r0
 629 0052 03D0     		beq	.L42
 254:Power.c       **** 		{
 255:Power.c       **** 			// second set fail...
 256:Power.c       **** 			RunFactorStatus = RFS_CS2FAIL;
 630              		.loc 1 256 0
 631 0054 0222     		mov	r2, #2
 632 0056 854B     		ldr	r3, .L62+8
 633 0058 1A70     		strb	r2, [r3]
 634 005a EDE0     		b	.L43
 635              	.L42:
 257:Power.c       **** 		}
 258:Power.c       **** 		else
 259:Power.c       **** 		{
 260:Power.c       **** 			// second set ok
 261:Power.c       **** 			RunFactorStatus = RFS_CLEAR;
 636              		.loc 1 261 0
 637 005c 0022     		mov	r2, #0
 638 005e 834B     		ldr	r3, .L62+8
 639 0060 1A70     		strb	r2, [r3]
 640 0062 EEE0     		b	.L44
 641              	.L41:
 262:Power.c       **** 		}
 263:Power.c       **** 	}
 264:Power.c       **** 	else // checksum ok, then has software changed 
 265:Power.c       **** 	{
 266:Power.c       **** 		if( pFac.pf.software_type != SOFTWARE )
 642              		.loc 1 266 0
 643 0064 804B     		ldr	r3, .L62+4
 644 0066 1A88     		ldrh	r2, [r3]
 645 0068 9723     		mov	r3, #151
 646 006a 5B00     		lsl	r3, r3, #1
 647 006c 9A42     		cmp	r2, r3
 648 006e 03D0     		beq	.L45
 267:Power.c       **** 		{
 268:Power.c       **** 			RunFactorStatus = RFS_SW1FAIL;
 649              		.loc 1 268 0
 650 0070 0322     		mov	r2, #3
 651 0072 7E4B     		ldr	r3, .L62+8
 652 0074 1A70     		strb	r2, [r3]
 653 0076 D0E0     		b	.L46
 654              	.L45:
 269:Power.c       **** 		}
 270:Power.c       **** 		else if( pFac.pf.software_issue != ISSUE )
 655              		.loc 1 270 0
 656 0078 7B4B     		ldr	r3, .L62+4
 657 007a 5B88     		ldrh	r3, [r3, #2]
 658 007c 012B     		cmp	r3, #1
 659 007e 03D0     		beq	.L47
 271:Power.c       **** 		{
 272:Power.c       **** 			RunFactorStatus = RFS_IS1FAIL;
 660              		.loc 1 272 0
 661 0080 0422     		mov	r2, #4
 662 0082 7A4B     		ldr	r3, .L62+8
 663 0084 1A70     		strb	r2, [r3]
 664 0086 C8E0     		b	.L46
 665              	.L47:
 273:Power.c       **** 		}
 274:Power.c       **** 		else if( pFac.pf.software_revision != REVISION )
 666              		.loc 1 274 0
 667 0088 774B     		ldr	r3, .L62+4
 668 008a 9B88     		ldrh	r3, [r3, #4]
 669 008c 172B     		cmp	r3, #23
 670 008e 03D0     		beq	.L48
 275:Power.c       **** 		{
 276:Power.c       **** 			RunFactorStatus = RFS_RV1FAIL;
 671              		.loc 1 276 0
 672 0090 0522     		mov	r2, #5
 673 0092 764B     		ldr	r3, .L62+8
 674 0094 1A70     		strb	r2, [r3]
 675 0096 C0E0     		b	.L46
 676              	.L48:
 277:Power.c       **** 		}
 278:Power.c       **** 		else
 279:Power.c       **** 		{
 280:Power.c       **** 			RunFactorStatus = RFS_CLEAR;
 677              		.loc 1 280 0
 678 0098 0022     		mov	r2, #0
 679 009a 744B     		ldr	r3, .L62+8
 680 009c 1A70     		strb	r2, [r3]
 681 009e D0E0     		b	.L44
 682              	.L56:
 281:Power.c       **** 		}
 282:Power.c       **** 		
 283:Power.c       **** 		// software seems to have changed, so check backup
 284:Power.c       **** 		if( RunFactorStatus != RFS_CLEAR )
 285:Power.c       **** 		{
 286:Power.c       **** 			// read factors from backup block
 287:Power.c       **** 			SPI1FlashRead( pFac_BASEADDRESS + 0x800, &(pFac.ch[0]), sizeof(pFac.pf) );
 288:Power.c       **** 			
 289:Power.c       **** 			// software changed?
 290:Power.c       **** 			if( pFac.pf.software_type != SOFTWARE )
 291:Power.c       **** 			{
 292:Power.c       **** 				RunFactorStatus = RFS_SW2FAIL; // software type changed 
 683              		.loc 1 292 0
 684 00a0 0622     		mov	r2, #6
 685 00a2 724B     		ldr	r3, .L62+8
 686 00a4 1A70     		strb	r2, [r3]
 687 00a6 C7E0     		b	.L43
 688              	.L61:
 293:Power.c       **** 			}
 294:Power.c       **** 			else if( pFac.pf.software_issue != ISSUE )
 689              		.loc 1 294 0
 690 00a8 6F4B     		ldr	r3, .L62+4
 691 00aa 5B88     		ldrh	r3, [r3, #2]
 692 00ac 012B     		cmp	r3, #1
 693 00ae 03D0     		beq	.L49
 295:Power.c       **** 			{
 296:Power.c       **** 				RunFactorStatus = RFS_IS2FAIL;
 694              		.loc 1 296 0
 695 00b0 0722     		mov	r2, #7
 696 00b2 6E4B     		ldr	r3, .L62+8
 697 00b4 1A70     		strb	r2, [r3]
 698 00b6 BFE0     		b	.L43
 699              	.L49:
 297:Power.c       **** 			}
 298:Power.c       **** 			else if( pFac.pf.software_revision != REVISION )
 700              		.loc 1 298 0
 701 00b8 6B4B     		ldr	r3, .L62+4
 702 00ba 9B88     		ldrh	r3, [r3, #4]
 703 00bc 172B     		cmp	r3, #23
 704 00be 03D0     		beq	.L50
 299:Power.c       **** 			{
 300:Power.c       **** 				RunFactorStatus = RFS_RV2FAIL;
 705              		.loc 1 300 0
 706 00c0 0822     		mov	r2, #8
 707 00c2 6A4B     		ldr	r3, .L62+8
 708 00c4 1A70     		strb	r2, [r3]
 709 00c6 B7E0     		b	.L43
 710              	.L50:
 301:Power.c       **** 			}
 302:Power.c       **** 			else
 303:Power.c       **** 			{
 304:Power.c       **** 				RunFactorStatus = RFS_CLEAR;
 711              		.loc 1 304 0
 712 00c8 0022     		mov	r2, #0
 713 00ca 684B     		ldr	r3, .L62+8
 714 00cc 1A70     		strb	r2, [r3]
 715 00ce B8E0     		b	.L44
 716              	.L58:
 305:Power.c       **** 			}
 306:Power.c       **** 			
 307:Power.c       **** 		}
 308:Power.c       **** 	}
 309:Power.c       **** 	
 310:Power.c       **** 	// set defaults
 311:Power.c       **** 	if( RunFactorStatus != RFS_CLEAR ) 	// Preserved factors changed
 312:Power.c       **** 	{
 313:Power.c       **** 		// set default program factors & write to flash
 314:Power.c       **** 		SetDefaultFactors(); // checksum calculated here for the first time
 315:Power.c       **** 		SetDefaultTotals();
 316:Power.c       **** 	}
 317:Power.c       **** 	else //Preserved factors not changed so check Runtime
 318:Power.c       **** 	{
 319:Power.c       **** 		// read runtime factors and totals from SPI1 Flash @ 0x001000
 320:Power.c       **** 		SPI1FlashRead( pRun_BASEADDRESS, &(pRun.ch[0]), sizeof(pRun.pr) );
 321:Power.c       **** 
 322:Power.c       **** 		// checksum fail on first block ?
 323:Power.c       **** 		if( pRun.pr.CheckSum != CheckSumIt( &(pRun.ch[0]), (unsigned char *)&(pRun.pr.CheckSum) ) )
 324:Power.c       **** 		{
 325:Power.c       **** 			// first block checksum fail, then try second block
 326:Power.c       **** 			RunFactorStatus = 0x08;
 717              		.loc 1 326 0
 718 00d0 0822     		mov	r2, #8
 719 00d2 664B     		ldr	r3, .L62+8
 720 00d4 1A70     		strb	r2, [r3]
 327:Power.c       **** 
 328:Power.c       **** 			// read runtime factors and totals from SPI1 Flash @ 0x001800
 329:Power.c       **** 			SPI1FlashRead( pRun_BASEADDRESS + 0x800, &(pRun.ch[0]), sizeof(pRun.pr) );
 721              		.loc 1 329 0
 722 00d6 664C     		ldr	r4, .L62+12
 723 00d8 C020     		mov	r0, #192
 724 00da 4001     		lsl	r0, r0, #5
 725 00dc 211C     		mov	r1, r4
 726 00de 1022     		mov	r2, #16
 727 00e0 FFF7FEFF 		bl	SPI1FlashRead
 728              	.LVL79:
 330:Power.c       **** 
 331:Power.c       **** 			if( pRun.pr.CheckSum != CheckSumIt( &(pRun.ch[0]), (unsigned char *)&(pRun.pr.CheckSum) ) )
 729              		.loc 1 331 0
 730 00e4 E568     		ldr	r5, [r4, #12]
 731 00e6 211C     		mov	r1, r4
 732 00e8 0C31     		add	r1, r1, #12
 733 00ea 201C     		mov	r0, r4
 734 00ec FFF7FEFF 		bl	CheckSumIt
 735              	.LVL80:
 736 00f0 8542     		cmp	r5, r0
 737 00f2 04D0     		beq	.L51
 332:Power.c       **** 			{
 333:Power.c       **** 				// second set fail...
 334:Power.c       **** 				RunFactorStatus = 0x09;
 738              		.loc 1 334 0
 739 00f4 0922     		mov	r2, #9
 740 00f6 5D4B     		ldr	r3, .L62+8
 741 00f8 1A70     		strb	r2, [r3]
 335:Power.c       **** 				// set default runtime factors and reset totals	
 336:Power.c       **** 				SetDefaultTotals();
 742              		.loc 1 336 0
 743 00fa FFF7FEFF 		bl	SetDefaultTotals
 744              	.LVL81:
 745              	.L51:
 337:Power.c       **** 				// factors are erased at this location for faster write at power down!
 338:Power.c       **** 				// so no need to write them
 339:Power.c       **** 				// write runtime factors and totals to SPI1 Flash @ 0x001000
 340:Power.c       **** 				// SPI1FlashWrite( SFC_PW, pRun_BASEADDRESS, &(pRun.ch[0]), sizeof(pRun.pr) );
 341:Power.c       **** 			}  
 342:Power.c       **** 
 343:Power.c       **** 		}
 344:Power.c       **** 	}
 345:Power.c       **** 
 346:Power.c       **** 	AT91C_BASE_PIOA->PIO_CODR = BUZZER;
 746              		.loc 1 346 0
 747 00fe 594C     		ldr	r4, .L62
 748 0100 8026     		mov	r6, #128
 749 0102 F601     		lsl	r6, r6, #7
 750 0104 6663     		str	r6, [r4, #52]
 347:Power.c       **** //	AT91C_BASE_PIOA->PIO_CODR = OUT5;
 348:Power.c       **** 
 349:Power.c       **** 	// write runtime factors and totals to SPI1 Flash @ 0x001800
 350:Power.c       **** 	SPI1FlashWrite( SFC_PW, pRun_BASEADDRESS + 0x800, &(pRun.ch[0]), sizeof(pRun.pr) );
 751              		.loc 1 350 0
 752 0106 5A4D     		ldr	r5, .L62+12
 753 0108 0A20     		mov	r0, #10
 754 010a C021     		mov	r1, #192
 755 010c 4901     		lsl	r1, r1, #5
 756 010e 2A1C     		mov	r2, r5
 757 0110 1023     		mov	r3, #16
 758 0112 FFF7FEFF 		bl	SPI1FlashWrite
 759              	.LVL82:
 351:Power.c       **** 
 352:Power.c       **** 	// erase runtime factors and totals from SPI1 Flash @ 0x001000
 353:Power.c       **** 	SPI1FlashWrite( SFC_PE, pRun_BASEADDRESS, (unsigned char *)NULL, sizeof(pRun.pr) );
 760              		.loc 1 353 0
 761 0116 DB20     		mov	r0, #219
 762 0118 8021     		mov	r1, #128
 763 011a 4901     		lsl	r1, r1, #5
 764 011c 0022     		mov	r2, #0
 765 011e 1023     		mov	r3, #16
 766 0120 FFF7FEFF 		bl	SPI1FlashWrite
 767              	.LVL83:
 354:Power.c       **** 
 355:Power.c       **** 	AT91C_BASE_PIOA->PIO_SODR = BUZZER;
 768              		.loc 1 355 0
 769 0124 2663     		str	r6, [r4, #48]
 356:Power.c       **** //	AT91C_BASE_PIOA->PIO_SODR = OUT5;
 357:Power.c       **** 
 358:Power.c       ****   //SetFactorPointers();
 359:Power.c       **** 	SetStartupDefaults();
 770              		.loc 1 359 0
 771 0126 FFF7FEFF 		bl	SetStartupDefaults
 772              	.LVL84:
 360:Power.c       **** 
 361:Power.c       **** 	// test
 362:Power.c       **** 	AT91C_BASE_PIOA->PIO_CODR = TESTPIN;
 773              		.loc 1 362 0
 774 012a 4023     		mov	r3, #64
 775 012c 6363     		str	r3, [r4, #52]
 363:Power.c       **** 
 364:Power.c       **** 	pRun.pr.PowerCount++;
 776              		.loc 1 364 0
 777 012e 2B89     		ldrh	r3, [r5, #8]
 778 0130 0133     		add	r3, r3, #1
 779 0132 2B81     		strh	r3, [r5, #8]
 365:Power.c       **** 
 366:Power.c       **** 	// turn on wakeup on WKUP1 low to high level, set maximum slow clock cycles event should last
 367:Power.c       **** 	// AT91C_BASE_SHDWC->SHDWC_SHMR = AT91C_SHDWC_CPTWK1 | AT91C_SHDWC_WKMODE1_LOW;
 368:Power.c       **** 
 369:Power.c       **** 	// turn on supply voltage check atod interrupt & PIOB interrupts
 370:Power.c       **** 	/* AT91F_AIC_EnableIt( AT91C_BASE_AIC, AT91C_ID_ADC0 ); */
 371:Power.c       **** 	AT91C_BASE_AIC->AIC_IECR = (0x1 << AT91C_ID_ADC0) | (0x1 << AT91C_ID_PIOB);
 780              		.loc 1 371 0
 781 0134 4F4D     		ldr	r5, .L62+16
 782 0136 504A     		ldr	r2, .L62+20
 783 0138 9023     		mov	r3, #144
 784 013a 5B00     		lsl	r3, r3, #1
 785 013c EA50     		str	r2, [r5, r3]
 372:Power.c       **** 
 373:Power.c       **** 	// timer1 - enable clock and start timer
 374:Power.c       **** 	AT91C_BASE_TC1->TC_CCR = AT91C_TC_CLKEN | AT91C_TC_SWTRG;
 786              		.loc 1 374 0
 787 013e 0522     		mov	r2, #5
 788 0140 4E4B     		ldr	r3, .L62+24
 789 0142 1A60     		str	r2, [r3]
 375:Power.c       **** 
 376:Power.c       **** 	xTaskResumeAll(); // restart task switching
 790              		.loc 1 376 0
 791 0144 FFF7FEFF 		bl	xTaskResumeAll
 792              	.LVL85:
 377:Power.c       **** 
 378:Power.c       **** 	vTaskSuspend( NULL ); // suspend current task - task is woken by atod interrupt
 793              		.loc 1 378 0
 794 0148 0020     		mov	r0, #0
 795 014a FFF7FEFF 		bl	vTaskSuspend
 796              	.LVL86:
 379:Power.c       **** 
 380:Power.c       **** 	vTaskSuspendAll(); // stop task switching
 797              		.loc 1 380 0
 798 014e FFF7FEFF 		bl	vTaskSuspendAll
 799              	.LVL87:
 381:Power.c       **** 
 382:Power.c       **** 	// Disable Interrupts
 383:Power.c       **** 	//AT91F_AIC_DisableIt( AT91C_BASE_AIC, AT91C_ID_TC0 );
 384:Power.c       **** 	//AT91F_AIC_DisableIt( AT91C_BASE_AIC, AT91C_ID_ADC0 );
 385:Power.c       **** 
 386:Power.c       **** 	// Disable all interrupts on the interrupt controller except PIT 
 387:Power.c       **** 	AT91C_BASE_AIC->AIC_IDCR = ~((unsigned int)1 << AT91C_ID_SYS);
 800              		.loc 1 387 0
 801 0152 0323     		mov	r3, #3
 802 0154 5B42     		neg	r3, r3
 803 0156 9222     		mov	r2, #146
 804 0158 5200     		lsl	r2, r2, #1
 805 015a AB50     		str	r3, [r5, r2]
 388:Power.c       **** 	// Clear pending interrupts on the Interrupt Controller except PIT
 389:Power.c       **** 	AT91C_BASE_AIC->AIC_ICCR = ~((unsigned int)1 << AT91C_ID_SYS);
 806              		.loc 1 389 0
 807 015c 9422     		mov	r2, #148
 808 015e 5200     		lsl	r2, r2, #1
 809 0160 AB50     		str	r3, [r5, r2]
 390:Power.c       **** 
 391:Power.c       **** 	// Stop PWM
 392:Power.c       **** 	AT91C_BASE_PWMC->PWMC_DIS = (AT91C_PWMC_CHID0 | AT91C_PWMC_CHID1 | AT91C_PWMC_CHID2 | AT91C_PWMC_C
 810              		.loc 1 392 0
 811 0162 FF22     		mov	r2, #255
 812 0164 464B     		ldr	r3, .L62+28
 813 0166 9A60     		str	r2, [r3, #8]
 393:Power.c       **** 
 394:Power.c       **** 	// set outputs to PIO mode then turn off - some may be in PWM mode
 395:Power.c       **** 	AT91C_BASE_PIOA->PIO_PER = OUTPUT_MASK_PIOA; // Set in PIO mode
 814              		.loc 1 395 0
 815 0168 464B     		ldr	r3, .L62+32
 816 016a 2360     		str	r3, [r4]
 396:Power.c       **** 	AT91C_BASE_PIOA->PIO_OER = OUTPUT_MASK_PIOA; // Configure as Output
 817              		.loc 1 396 0
 818 016c 2361     		str	r3, [r4, #16]
 397:Power.c       **** 	AT91C_BASE_PIOA->PIO_SODR = OUTPUT_MASK_PIOA; // Set Outputs - OFF if set
 819              		.loc 1 397 0
 820 016e 2363     		str	r3, [r4, #48]
 398:Power.c       **** 
 399:Power.c       **** 	AT91C_BASE_PIOB->PIO_PER = OUTPUT_MASK_PIOB | PFAIL; // Set in PIO mode
 821              		.loc 1 399 0
 822 0170 454B     		ldr	r3, .L62+36
 823 0172 464A     		ldr	r2, .L62+40
 824 0174 1A60     		str	r2, [r3]
 400:Power.c       **** 	AT91C_BASE_PIOB->PIO_OER = OUTPUT_MASK_PIOB; // Configure as Output
 825              		.loc 1 400 0
 826 0176 464A     		ldr	r2, .L62+44
 827 0178 1A61     		str	r2, [r3, #16]
 401:Power.c       **** 	AT91C_BASE_PIOB->PIO_SODR = OUTPUT_MASK_PIOB; // Set Outputs - OFF if set
 828              		.loc 1 401 0
 829 017a 1A63     		str	r2, [r3, #48]
 402:Power.c       **** 
 403:Power.c       **** 	// Turn Pullups Off
 404:Power.c       **** 	//AT91C_BASE_PIOA->PIO_PPUDR 
 405:Power.c       **** 	//AT91C_BASE_PIOB->PIO_PPUDR = SW_MASK;
 406:Power.c       **** 
 407:Power.c       **** 	// Disable Serial Debug Interrupt (DEBUG unit is on AT91C_ID_SYS)
 408:Power.c       **** 	AT91C_BASE_DBGU->DBGU_IDR = AT91C_US_RXRDY | AT91C_US_TXRDY;
 830              		.loc 1 408 0
 831 017c 0322     		mov	r2, #3
 832 017e 454B     		ldr	r3, .L62+48
 833 0180 DA60     		str	r2, [r3, #12]
 409:Power.c       **** 
 410:Power.c       **** 	AT91C_BASE_CAN0->CAN_MR = 0; // turn off CAN0
 834              		.loc 1 410 0
 835 0182 0023     		mov	r3, #0
 836 0184 444A     		ldr	r2, .L62+52
 837 0186 1360     		str	r3, [r2]
 411:Power.c       **** 	AT91C_BASE_CAN1->CAN_MR = 0; // turn off CAN1
 838              		.loc 1 411 0
 839 0188 444A     		ldr	r2, .L62+56
 840 018a 1360     		str	r3, [r2]
 412:Power.c       **** 
 413:Power.c       **** 	// turn all io clocks off but leave PIT & PIOA
 414:Power.c       **** 	AT91C_BASE_PMC->PMC_PCDR = ~( ((unsigned int)1 << AT91C_ID_SYS) | ((unsigned int)1 << AT91C_ID_PIO
 841              		.loc 1 414 0
 842 018c 0721     		mov	r1, #7
 843 018e 4942     		neg	r1, r1
 844 0190 434A     		ldr	r2, .L62+60
 845 0192 5161     		str	r1, [r2, #20]
 415:Power.c       **** 
 416:Power.c       **** 	// turn off wakeup on WKUP1/0
 417:Power.c       **** 	AT91C_BASE_SHDWC->SHDWC_SHMR = AT91C_SHDWC_WKMODE1_NONE | AT91C_SHDWC_WKMODE0_NONE;
 846              		.loc 1 417 0
 847 0194 434A     		ldr	r2, .L62+64
 848 0196 5360     		str	r3, [r2, #4]
 418:Power.c       **** 
 419:Power.c       **** 	// wait for SPI to finish if running
 420:Power.c       **** 	while( !(AT91C_BASE_SPI1->SPI_SR & AT91C_SPI_TXBUFE) )
 849              		.loc 1 420 0
 850 0198 434A     		ldr	r2, .L62+68
 851 019a 8023     		mov	r3, #128
 852              	.L52:
 853              		.loc 1 420 0 is_stmt 0 discriminator 1
 854 019c 1169     		ldr	r1, [r2, #16]
 855 019e 0B42     		tst	r3, r1
 856 01a0 FCD0     		beq	.L52
 421:Power.c       **** 	{
 422:Power.c       **** 	}
 423:Power.c       **** 	AT91C_BASE_PIOA->PIO_SODR = AT91C_PA5_SPI1_NPCS1; // set output
 857              		.loc 1 423 0 is_stmt 1
 858 01a2 304B     		ldr	r3, .L62
 859 01a4 2022     		mov	r2, #32
 860 01a6 1A63     		str	r2, [r3, #48]
 424:Power.c       **** 	AT91C_BASE_PIOA->PIO_PDR = AT91C_PA5_SPI1_NPCS1; // disable PIO
 861              		.loc 1 424 0
 862 01a8 5A60     		str	r2, [r3, #4]
 425:Power.c       **** 
 426:Power.c       **** 	// turn off all peripherals clocks
 427:Power.c       **** 	AT91C_BASE_PMC->PMC_PCDR = AT91C_BASE_PMC->PMC_PCSR;
 863              		.loc 1 427 0
 864 01aa 3D4A     		ldr	r2, .L62+60
 865 01ac 9169     		ldr	r1, [r2, #24]
 866 01ae 5161     		str	r1, [r2, #20]
 867              	.LVL88:
 868              	.LBB57:
 869              	.LBB58:
1327:./include/lib_AT91SAM7A3.h **** 	pRSTC->RSTC_RMR = (0xA5000000 | mode);
 870              		.loc 2 1327 0
 871 01b0 3E49     		ldr	r1, .L62+72
 872 01b2 3F4A     		ldr	r2, .L62+76
 873 01b4 9160     		str	r1, [r2, #8]
 874              	.LBE58:
 875              	.LBE57:
 428:Power.c       **** 
 429:Power.c       **** 	// disable reset pin - leave delay
 430:Power.c       **** 	AT91F_RSTSetMode( AT91C_BASE_RSTC, (0x4 << 8) ); // 0.5 sec == 2^(13 + 1) / 32768hz
 431:Power.c       **** 
 432:Power.c       **** 	// test
 433:Power.c       **** 	AT91C_BASE_PIOA->PIO_SODR = TESTPIN;
 876              		.loc 1 433 0
 877 01b6 4022     		mov	r2, #64
 878 01b8 1A63     		str	r2, [r3, #48]
 434:Power.c       **** 
 435:Power.c       **** 	// setup SPI1
 436:Power.c       **** 	SPI1Setup();
 879              		.loc 1 436 0
 880 01ba FFF7FEFF 		bl	SPI1Setup
 881              	.LVL89:
 437:Power.c       **** 
 438:Power.c       **** 	pRun.pr.CheckSum = CheckSumIt( &(pRun.ch[0]), (unsigned char *)&(pRun.pr.CheckSum) );
 882              		.loc 1 438 0
 883 01be 2C4C     		ldr	r4, .L62+12
 884 01c0 211C     		mov	r1, r4
 885 01c2 0C31     		add	r1, r1, #12
 886 01c4 201C     		mov	r0, r4
 887 01c6 FFF7FEFF 		bl	CheckSumIt
 888              	.LVL90:
 889 01ca E060     		str	r0, [r4, #12]
 439:Power.c       **** 
 440:Power.c       **** 	// write runtime factors and totals to SPI1 Flash @ 0x001000
 441:Power.c       **** 	SPI1FlashWrite( SFC_PP, pRun_BASEADDRESS, &(pRun.ch[0]), sizeof(pRun.pr) );
 890              		.loc 1 441 0
 891 01cc 0220     		mov	r0, #2
 892 01ce 8021     		mov	r1, #128
 893 01d0 4901     		lsl	r1, r1, #5
 894 01d2 221C     		mov	r2, r4
 895 01d4 1023     		mov	r3, #16
 896 01d6 FFF7FEFF 		bl	SPI1FlashWrite
 897              	.LVL91:
 442:Power.c       **** 
 443:Power.c       **** 	// setup SPI0 for display
 444:Power.c       **** 	SPI0Setup();
 898              		.loc 1 444 0
 899 01da FFF7FEFF 		bl	SPI0Setup
 900              	.LVL92:
 445:Power.c       **** 
 446:Power.c       **** 	// then reset display
 447:Power.c       **** 	adm[0] = 0xe2;
 901              		.loc 1 447 0
 902 01de 3548     		ldr	r0, .L62+80
 903 01e0 E223     		mov	r3, #226
 904 01e2 0370     		strb	r3, [r0]
 448:Power.c       **** 	SendToDisplay( &adm[0], 1, DM_COMMAND );
 905              		.loc 1 448 0
 906 01e4 0121     		mov	r1, #1
 907 01e6 0122     		mov	r2, #1
 908 01e8 FFF7FEFF 		bl	SendToDisplay
 909              	.LVL93:
 449:Power.c       **** 
 450:Power.c       **** 	// wait for SPI to finish writing to display
 451:Power.c       **** 	while( !(AT91C_BASE_SPI0->SPI_SR & AT91C_SPI_TXBUFE) )
 910              		.loc 1 451 0
 911 01ec 324A     		ldr	r2, .L62+84
 912 01ee 8023     		mov	r3, #128
 913              	.L53:
 914              		.loc 1 451 0 is_stmt 0 discriminator 1
 915 01f0 1169     		ldr	r1, [r2, #16]
 916 01f2 0B42     		tst	r3, r1
 917 01f4 FCD0     		beq	.L53
 452:Power.c       **** 	{
 453:Power.c       **** 	}
 454:Power.c       **** 
 455:Power.c       **** 	// test
 456:Power.c       **** 	AT91C_BASE_PIOA->PIO_CODR = TESTPIN;
 918              		.loc 1 456 0 is_stmt 1
 919 01f6 4022     		mov	r2, #64
 920 01f8 1A4B     		ldr	r3, .L62
 921 01fa 5A63     		str	r2, [r3, #52]
 457:Power.c       **** 
 458:Power.c       **** 	if( PowerSwitchedOff == 1 )	
 922              		.loc 1 458 0
 923 01fc 2F4B     		ldr	r3, .L62+88
 924 01fe 1B78     		ldrb	r3, [r3]
 925 0200 012B     		cmp	r3, #1
 926 0202 03D1     		bne	.L54
 459:Power.c       **** 	{
 460:Power.c       **** 		// set /PFAIL input to output mode, and set low to 
 461:Power.c       **** 		// indicate to PIC16F506 that power should remain off
 462:Power.c       **** 		// if removed then restored
 463:Power.c       **** 		AT91C_BASE_PIOB->PIO_OER = PFAIL; // Enable Output
 927              		.loc 1 463 0
 928 0204 204B     		ldr	r3, .L62+36
 929 0206 0122     		mov	r2, #1
 930 0208 1A61     		str	r2, [r3, #16]
 464:Power.c       **** 		AT91C_BASE_PIOB->PIO_CODR = PFAIL; // clear output
 931              		.loc 1 464 0
 932 020a 5A63     		str	r2, [r3, #52]
 933              	.L54:
 465:Power.c       **** 	}
 466:Power.c       **** 
 467:Power.c       **** 	// save all data then shutdown	
 468:Power.c       **** 	AT91C_BASE_SHDWC->SHDWC_SHCR = SHUTDOWN_KEY | AT91C_SHDWC_SHDW;
 934              		.loc 1 468 0
 935 020c 2C4A     		ldr	r2, .L62+92
 936 020e 254B     		ldr	r3, .L62+64
 937 0210 1A60     		str	r2, [r3]
 469:Power.c       **** 
 470:Power.c       **** 	// all done so stay here until power goes off
 471:Power.c       **** 	while( 1 ) 
 472:Power.c       **** 	{
 473:Power.c       **** 		// restart watchdog counter
 474:Power.c       **** 		AT91C_BASE_WDTC->WDTC_WDCR = WATCHDOG_KEY | AT91C_WDTC_WDRSTT;
 938              		.loc 1 474 0
 939 0212 2C4A     		ldr	r2, .L62+96
 940 0214 2A4B     		ldr	r3, .L62+92
 941              	.L55:
 942              		.loc 1 474 0 is_stmt 0 discriminator 1
 943 0216 1360     		str	r3, [r2]
 944 0218 FDE7     		b	.L55
 945              	.LVL94:
 946              	.L46:
 287:Power.c       **** 			SPI1FlashRead( pFac_BASEADDRESS + 0x800, &(pFac.ch[0]), sizeof(pFac.pf) );
 947              		.loc 1 287 0 is_stmt 1
 948 021a 134C     		ldr	r4, .L62+4
 949 021c 8020     		mov	r0, #128
 950 021e 0001     		lsl	r0, r0, #4
 951 0220 211C     		mov	r1, r4
 952 0222 9022     		mov	r2, #144
 953 0224 5200     		lsl	r2, r2, #1
 954 0226 FFF7FEFF 		bl	SPI1FlashRead
 955              	.LVL95:
 290:Power.c       **** 			if( pFac.pf.software_type != SOFTWARE )
 956              		.loc 1 290 0
 957 022a 2288     		ldrh	r2, [r4]
 958 022c 9723     		mov	r3, #151
 959 022e 5B00     		lsl	r3, r3, #1
 960 0230 9A42     		cmp	r2, r3
 961 0232 00D0     		beq	.LCB936
 962 0234 34E7     		b	.L56	@long jump
 963              	.LCB936:
 964 0236 37E7     		b	.L61
 965              	.L43:
 314:Power.c       **** 		SetDefaultFactors(); // checksum calculated here for the first time
 966              		.loc 1 314 0
 967 0238 FFF7FEFF 		bl	SetDefaultFactors
 968              	.LVL96:
 315:Power.c       **** 		SetDefaultTotals();
 969              		.loc 1 315 0
 970 023c FFF7FEFF 		bl	SetDefaultTotals
 971              	.LVL97:
 972 0240 5DE7     		b	.L51
 973              	.L44:
 320:Power.c       **** 		SPI1FlashRead( pRun_BASEADDRESS, &(pRun.ch[0]), sizeof(pRun.pr) );
 974              		.loc 1 320 0
 975 0242 0B4C     		ldr	r4, .L62+12
 976 0244 8020     		mov	r0, #128
 977 0246 4001     		lsl	r0, r0, #5
 978 0248 211C     		mov	r1, r4
 979 024a 1022     		mov	r2, #16
 980 024c FFF7FEFF 		bl	SPI1FlashRead
 981              	.LVL98:
 323:Power.c       **** 		if( pRun.pr.CheckSum != CheckSumIt( &(pRun.ch[0]), (unsigned char *)&(pRun.pr.CheckSum) ) )
 982              		.loc 1 323 0
 983 0250 E568     		ldr	r5, [r4, #12]
 984 0252 211C     		mov	r1, r4
 985 0254 0C31     		add	r1, r1, #12
 986 0256 201C     		mov	r0, r4
 987 0258 FFF7FEFF 		bl	CheckSumIt
 988              	.LVL99:
 989 025c 8542     		cmp	r5, r0
 990 025e 00D0     		beq	.LCB963
 991 0260 36E7     		b	.L58	@long jump
 992              	.LCB963:
 993 0262 4CE7     		b	.L51
 994              	.L63:
 995              		.align	2
 996              	.L62:
 997 0264 00F4FFFF 		.word	-3072
 998 0268 00000000 		.word	pFac
 999 026c 00000000 		.word	RunFactorStatus
 1000 0270 00000000 		.word	pRun
 1001 0274 00F0FFFF 		.word	-4096
 1002 0278 08000001 		.word	16777224
 1003 027c 4000FAFF 		.word	-393152
 1004 0280 00C0FCFF 		.word	-212992
 1005 0284 00E0FC03 		.word	66904064
 1006 0288 00F6FFFF 		.word	-2560
 1007 028c 012C802A 		.word	713042945
 1008 0290 002C802A 		.word	713042944
 1009 0294 00F2FFFF 		.word	-3584
 1010 0298 0000F8FF 		.word	-524288
 1011 029c 0040F8FF 		.word	-507904
 1012 02a0 00FCFFFF 		.word	-1024
 1013 02a4 10FDFFFF 		.word	-752
 1014 02a8 0040FEFF 		.word	-114688
 1015 02ac 000400A5 		.word	-1526725632
 1016 02b0 00FDFFFF 		.word	-768
 1017 02b4 00000000 		.word	adm
 1018 02b8 0000FEFF 		.word	-131072
 1019 02bc 00000000 		.word	PowerSwitchedOff
 1020 02c0 010000A5 		.word	-1526726655
 1021 02c4 40FDFFFF 		.word	-704
 1022              		.cfi_endproc
 1023              	.LFE380:
 1025              		.section	.text.vStartPowerTask,"ax",%progbits
 1026              		.align	2
 1027              		.global	vStartPowerTask
 1028              		.code	16
 1029              		.thumb_func
 1031              	vStartPowerTask:
 1032              	.LFB381:
 475:Power.c       **** 	} // end of while( 1 )
 476:Power.c       **** 
 477:Power.c       **** }
 478:Power.c       **** /*-----------------------------------------------------------*/
 479:Power.c       **** 
 480:Power.c       **** 
 481:Power.c       **** /*-----------------------------------------------------------*/
 482:Power.c       **** void vStartPowerTask( unsigned portBASE_TYPE uxPriority )
 483:Power.c       **** {
 1033              		.loc 1 483 0
 1034              		.cfi_startproc
 1035              	.LVL100:
 1036 0000 00B5     		push	{lr}
 1037              	.LCFI7:
 1038              		.cfi_def_cfa_offset 4
 1039              		.cfi_offset 14, -4
 1040 0002 85B0     		sub	sp, sp, #20
 1041              	.LCFI8:
 1042              		.cfi_def_cfa_offset 24
 484:Power.c       **** 
 485:Power.c       **** 	/* Spawn the task. */
 486:Power.c       **** 	xTaskCreate( vPowerTask, "POWER", configPOWER_STACK_SIZE, (void *)NULL, uxPriority, (xTaskHandle *
 1043              		.loc 1 486 0
 1044 0004 0090     		str	r0, [sp]
 1045 0006 064B     		ldr	r3, .L65
 1046 0008 0193     		str	r3, [sp, #4]
 1047 000a 0023     		mov	r3, #0
 1048 000c 0293     		str	r3, [sp, #8]
 1049 000e 0393     		str	r3, [sp, #12]
 1050 0010 0448     		ldr	r0, .L65+4
 1051              	.LVL101:
 1052 0012 0549     		ldr	r1, .L65+8
 1053 0014 6422     		mov	r2, #100
 1054 0016 FFF7FEFF 		bl	xTaskGenericCreate
 1055              	.LVL102:
 487:Power.c       **** }
 1056              		.loc 1 487 0
 1057 001a 05B0     		add	sp, sp, #20
 1058              		@ sp needed for prologue
 1059 001c 01BC     		pop	{r0}
 1060 001e 0047     		bx	r0
 1061              	.L66:
 1062              		.align	2
 1063              	.L65:
 1064 0020 00000000 		.word	POWERtaskhandle
 1065 0024 00000000 		.word	vPowerTask
 1066 0028 00000000 		.word	.LC12
 1067              		.cfi_endproc
 1068              	.LFE381:
 1070              		.comm	POWERtaskhandle,4,4
 1071              		.comm	TWItaskhandle,4,4
 1072              		.comm	SetTime,4,4
 1073              		.section	.rodata.str1.4,"aMS",%progbits,1
 1074              		.align	2
 1075              	.LC12:
 1076 0000 504F5745 		.ascii	"POWER\000"
 1076      5200
 1077 0006 0000     		.text
 1078              	.Letext0:
 1079              		.file 3 "./include/AT91SAM7A3.h"
 1080              		.file 4 "c:\\gnuarm-471_eabi\\bin\\../lib/gcc/arm-none-eabi/4.7.1/include/stddef.h"
 1081              		.file 5 "./include/projdefs.h"
 1082              		.file 6 "./include/task.h"
 1083              		.file 7 "./include/queue.h"
 1084              		.file 8 "./include/semphr.h"
 1085              		.file 9 "Board.h"
 1086              		.file 10 "./include/portable.h"
DEFINED SYMBOLS
                            *ABS*:00000000 Power.c
  C:\Temp\ccv6vmlo.s:18     .text.SPI1Setup:00000000 $t
  C:\Temp\ccv6vmlo.s:23     .text.SPI1Setup:00000000 SPI1Setup
  C:\Temp\ccv6vmlo.s:127    .text.SPI1Setup:00000038 $d
  C:\Temp\ccv6vmlo.s:137    .text.SPI1TransferData:00000000 $t
  C:\Temp\ccv6vmlo.s:142    .text.SPI1TransferData:00000000 SPI1TransferData
  C:\Temp\ccv6vmlo.s:201    .text.SPI1TransferData:0000002c $d
  C:\Temp\ccv6vmlo.s:207    .text.SPI1FlashRead:00000000 $t
  C:\Temp\ccv6vmlo.s:212    .text.SPI1FlashRead:00000000 SPI1FlashRead
  C:\Temp\ccv6vmlo.s:316    .text.SPI1FlashRead:00000068 $d
  C:\Temp\ccv6vmlo.s:321    .text.SPI1FlashWrite:00000000 $t
  C:\Temp\ccv6vmlo.s:326    .text.SPI1FlashWrite:00000000 SPI1FlashWrite
  C:\Temp\ccv6vmlo.s:561    .text.SPI1FlashWrite:000000f8 $d
  C:\Temp\ccv6vmlo.s:566    .text.vPowerTask:00000000 $t
  C:\Temp\ccv6vmlo.s:570    .text.vPowerTask:00000000 vPowerTask
  C:\Temp\ccv6vmlo.s:997    .text.vPowerTask:00000264 $d
  C:\Temp\ccv6vmlo.s:1026   .text.vStartPowerTask:00000000 $t
  C:\Temp\ccv6vmlo.s:1031   .text.vStartPowerTask:00000000 vStartPowerTask
  C:\Temp\ccv6vmlo.s:1064   .text.vStartPowerTask:00000020 $d
                            *COM*:00000004 POWERtaskhandle
                            *COM*:00000004 TWItaskhandle
                            *COM*:00000004 SetTime
  C:\Temp\ccv6vmlo.s:1074   .rodata.str1.4:00000000 $d
                     .debug_frame:00000010 $d
                           .group:00000000 wm4.1.e755308d0f97ac5a4d77c88bfa88161b
                           .group:00000000 wm4.Board.h.9.fb7d243db0e7e4c70fc5c5308962051c
                           .group:00000000 wm4.AT91SAM7A3.h.47.d520374ed0d352801eee6a21dd2220a3
                           .group:00000000 wm4.lib_AT91SAM7A3.h.43.b96965aef7b64d3c61b53421dff32f3d
                           .group:00000000 wm4.stddef.h.40.50cf36416e06376af8a9dca28536f2e4
                           .group:00000000 wm4.projdefs.h.55.cdae9ead80b5a2ac004f41bb277aad45
                           .group:00000000 wm4.FreeRTOSConfig.h.55.21a0bf6949661856eb9bd458ca526d69
                           .group:00000000 wm4.portmacro.h.78.312ea2a2591c2c784e5cb239eea0b39c
                           .group:00000000 wm4.portable.h.311.02653c2286cc0addcb8e7b32211fdde5
                           .group:00000000 wm4.mpu_wrappers.h.55.46a4a008a193040c38098e9a5f07ff9d
                           .group:00000000 wm4.FreeRTOS.h.136.ac0125896626c2d69b79b44ea315652b
                           .group:00000000 wm4.list.h.90.ffdb657f66139f74e2982d5a33457923
                           .group:00000000 wm4.task.h.75.6c9adf28cb16a37dd5593a2f9c33f128
                           .group:00000000 wm4.queue.h.62.c626e69c2c492f5b1e4920732a8be821
                           .group:00000000 wm4.semphr.h.65.030ef7caa4665b46960b9de8a1cccba7
                           .group:00000000 wm4.Board.h.1257.275975018c8e952526c2554b98141b95
                           .group:00000000 wm4.Board.h.1481.126b635f2c4daf829686312d1e66f9ec
                           .group:00000000 wm4.config.h.193.5fb8ef056cdff92dec3dee9552839d8c
                           .group:00000000 wm4._ansi.h.23.95dee4059009fe3ab635a191bb73dc66
                           .group:00000000 wm4._default_types.h.6.1dbd2e581fd590860c7c17f21d147e91
                           .group:00000000 wm4.lock.h.2.9bc98482741e5e2a9450b12934a684ea
                           .group:00000000 wm4.stddef.h.161.c6104a0666cf681b6269ddc9b4f516d4
                           .group:00000000 wm4.reent.h.16.9e42f0e588b85e70b2bf6572af57ce64
                           .group:00000000 wm4.cdefs.h.45.6b392759c8a421d1199268021d4987e3
                           .group:00000000 wm4.stddef.h.161.e50ff8a9d5d1abbc15641da28ac571bf
                           .group:00000000 wm4.string.h.118.0034ce03f0efcb6576b1b96865c749d5

UNDEFINED SYMBOLS
pvPortMalloc
memcpy
vPortFree
buffer
vTaskSuspendAll
CheckSumIt
SetDefaultTotals
SetStartupDefaults
xTaskResumeAll
vTaskSuspend
SPI0Setup
SendToDisplay
SetDefaultFactors
pFac
RunFactorStatus
pRun
adm
PowerSwitchedOff
xTaskGenericCreate
